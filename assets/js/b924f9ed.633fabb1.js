"use strict";(self.webpackChunk_finos_perspective_docs=self.webpackChunk_finos_perspective_docs||[]).push([[280],{4661:function(e,t,n){n.r(t),n.d(t,{main:function(){return a}});n(6246),n(8049),n(7495);var r=n(569);async function a(e){const t=document.querySelectorAll("perspective-viewer:not(.nosuperstore)");for(const n of t){n.load(r.SUPERSTORE_TABLE);const t={settings:!0,theme:"dark"===e?"Pro Dark":"Pro Light"};for(const e of n.attributes)"settings"!==e.name&&"theme"!==e.name&&(t[e.name]=JSON.parse(e.nodeValue));n.restore(t)}}},5378:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(7378),a=n(8089),o=n(5421),l=n(161);function i(e){if(l.Z.canUseDOM){const{main:e}=n(4661),{colorMode:t}=(0,o.I)();(0,r.useEffect)((()=>{e(t)}),[t])}return r.createElement(a.Z,e)}},569:function(e,t,n){n.r(t),n.d(t,{SUPERSTORE_TABLE:function(){return o}});var r=n(7115),a=n(5939);const o=async function(){const e=r.ZP.shared_worker(),t=await fetch(a),n=await t.arrayBuffer();return await e.table(n.slice())}()},7495:function(e,t,n){var r=n(7580),a=n(9580),o=n(3603),l=n(9951),i=n(760),s=n(9452),c=Object.defineProperty,u=(e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var d="none",_="ordinal",g="time",h="linear",p=e=>{let t="crossValues",n=null,r=null,a=()=>{let a=r=>{let a=n?e[t].filter((e=>n==e.name)):e[t];return!("crossValues"==t&&a.length>1)&&a.some((e=>r.includes(e.type)))};return 0===e[t].length?d:r!=g&&a(["datetime","date"])?g:r!=h&&a(["integer","float"])||r==_?h:_};return a.settingName=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.settingValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.excludeType=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a},f={};u(f,{domain:()=>y,labelFunction:()=>v,scale:()=>w});var b=e=>Array.isArray(e)?e.flat(1/0):[e],m=e=>{let t=t=>e(t);return(0,r.rebindAll)(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(...arguments),t):Math.max(e.bandwidth(),1)},t},w=()=>(e=>{let t=t=>e(t);return(0,r.rebindAll)(t,e),t.ticks=function(){return[]},t})(m(a.tiA())),y=()=>{let e=["crossValue"],t="horizontal",n=t=>{let n=b(t);return r([...new Set(n.map((t=>t[e[0]])))])},r=e=>"vertical"==t?e.reverse():e;return n.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],n):e[0]},n.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},v=e=>t=>t[e].join("|"),x={};u(x,{component:()=>N,domain:()=>T,labelFunction:()=>C,scale:()=>L,tickFormatFunction:()=>M});var k=()=>{let e=[0,0],t="percent",n=n=>{switch(t){case"domain":n[0]-=e[0],n[1]+=e[1];break;case"percent":{let t=n[1]-n[0];n[0]-=e[0]*t,n[1]+=e[1]*t;break}default:throw new Error("Unknown padUnit: "+t)}return n};return n.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.padUnit=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},S=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},V=e=>Math.abs(e)>=1e7?a.WUZ(".3s")(e):Number.isInteger(e)?a.WUZ(",.0f")(e):a.WUZ(",.2f")(e);function E(e){return e.getRootNode().host}function A(e){return e.closest("#container.chart")}var L=()=>a.BYU(),T=()=>{let e=function(){let e=[function(e){return e}],t=null,n=[],r=k(),a=function(a){let i,s=new Array(a.length),c=!0,u=!1,d=e[Symbol.iterator]();try{for(let e;!(c=(e=d.next()).done);c=!0){let t=e.value;for(let e=0;e<a.length;e++){let n=t(a[e],e);Array.isArray(n)?s.push.apply(s,S(n)):s.push(n)}}}catch(g){u=!0,i=g}finally{try{!c&&d.return&&d.return()}finally{if(u)throw i}}let _=[o.Z(s),l.Z(s)];if(_[0]=null==_[0]?o.Z(n):o.Z([_[0]].concat(S(n))),_[1]=null==_[1]?l.Z(n):l.Z([_[1]].concat(S(n))),null!=t){let e=Math.max(Math.abs(_[1]-t),Math.abs(_[0]-t));_[0]=t-e,_[1]=t+e}return r(_)};return a.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.pad=function(){return arguments.length?(r.pad(arguments.length<=0?void 0:arguments[0]),a):r.pad},a.padUnit=function(){return arguments.length?(r.padUnit(arguments.length<=0?void 0:arguments[0]),a):r.padUnit},a.include=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.symmetricalAbout=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.paddingStrategy=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a}().pad([0,.1]).padUnit("percent"),t=["crossValue"],n=n=>(e.accessors(t.map((e=>t=>parseFloat(t[e])))),a(b(n)));r.rebindAll(n,e);let a=n=>{if("domain"==e.padUnit()){let r=(e=>{let n=t.map((t=>e.map((e=>e[t])).sort(((e,t)=>e-t)).filter(((e,t,n)=>0===t||e!==n[t-1])).reduce(((e,t,n,r)=>0===n||e<=t-r[n-1]?e:Math.abs(t-r[n-1])))));return Math.min(...n)})(n);return e.pad([r/2,r/2])(n)}return e(n)};return n.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],n):t[0]},n.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},C=e=>t=>t[e][0],M=V,N=e=>{let t=null,n="horizontal",o=null,l=(e,t)=>{let r=e.getBoundingClientRect();t.each(((e,t,o)=>{let l=a.Ys(o[t]).node().getBoundingClientRect();("vertical"==n&&r.width<l.width||"horizontal"==n&&r.height<l.height)&&(e=>{a.Ys(e).select("text").node().style.fontSize="80%"})(o[t])}))},i=(e,t,n)=>{let r=((e,t)=>{try{return A(e.node()).querySelector(".cartesian-chart").querySelector(`.${t}-axis`)}catch{return null}})(e,t);r&&l(r,e)},s=()=>({bottom:r.axisBottom,left:r.axisLeft,top:r.axisTop,right:r.axisRight,decorate:i});return s.domain=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.settingName=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},s},z={};u(z,{domain:()=>O,labelFunction:()=>R,scale:()=>P});var P=()=>a.Xf(),O=()=>{let e=r.extentTime(),t=["crossValue"],n=n=>(e.accessors(t.map((e=>t=>new Date(t[e])))),a(b(n)));r.rebindAll(n,e,r.exclude("include","paddingStrategy"));let a=n=>{let r=Math.abs((e=>{let n=t.map((t=>e.map((e=>new Date(e[t]).getTime())).sort(((e,t)=>e-t)).filter(((e,t,n)=>0===t||e!==n[t-1])).reduce(((e,t,n,r)=>0===n||Math.abs(e)<=Math.abs(t-r[n-1])?Math.abs(e):Math.abs(t-r[n-1])))));return Math.min(...n)})(n));return e.padUnit("domain").pad([r/2,r/2])(n)};return n.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],n):t[0]},n.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},R=e=>t=>new Date(t[e][0]),$={};u($,{component:()=>q,domain:()=>H,labelFunction:()=>W,scale:()=>Y});var j=(e,t,n)=>{let o=6,l=6,i=function(){let e={},t=t=>{for(let n of Object.keys(e))t[n](e[n]);return t};for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(let o of r)t[o]=function(){return arguments.length?(e[o]=arguments.length<=0?void 0:arguments[0],t):e[o]};return t}("tickFormat","ticks","tickArguments","tickValues","tickPadding"),s=()=>{},c=null,u=(0,r.dataJoin)("g","group"),d=(0,r.dataJoin)("path","domain"),_=(e,t)=>g()?`translate(${t}, ${e})`:`translate(${e}, ${t})`,g=()=>"left"===e||"right"===e,h=r=>{c?r.each(((r,h,f)=>{let b=f[h],m=(0,a.Ys)(b),w="bottom"===e||"right"===e?1:-1,y=n.range(),v=(e=>g()?e.map((e=>[e[1],e[0]])):e)([[y[0],w*o],[y[0],0],[y[1],0],[y[1],w*o]]);d(m,[r]).attr("d",(0,a.jvg)()(v)).attr("stroke","#000").attr("fill","none");let x=u(m,c),k=e=>Array.isArray(l)?l[e]:l,S=e=>{let t=0;for(let n=0;n<e;n++)t+=k(n);return t};x.attr("transform",((e,t)=>_(0,w*S(t)))).each(((e,r,o)=>{let l=(0,a.Ys)(o[r]),c=p(n,e);i(t(c)).decorate(((e,t)=>s(e,t,r))).tickSizeInner(k(r)).tickOffset((e=>c.step(e)/2))(l),l.select("path.domain").attr("visibility","hidden")})),x.exit().attr("transform",((e,t)=>_(0,w*S(t))))})):i(t(n).decorate(s))(r)},p=(e,t)=>{function n(t){let n=t.domain;return n.reduce(((t,n)=>t+e(n)),0)/n.length}return n.ticks=()=>t,n.tickFormat=()=>e=>e.text,n.copy=()=>p(e,t),n.step=t=>t.domain.length*e.step(),(0,r.rebindAll)(n,e,(0,r.exclude)("ticks","step","copy")),n};return h.tickSize=function(){return arguments.length?(l=o=Number(arguments.length<=0?void 0:arguments[0]),h):l},h.tickSizeInner=function(){return arguments.length?(l=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Number(arguments.length<=0?void 0:arguments[0]),h):l},h.tickSizeOuter=function(){return arguments.length?(o=Number(arguments.length<=0?void 0:arguments[0]),h):o},h.decorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],h):s},h.groups=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],h):c},(0,r.rebindAll)(h,i),h},D=e=>j("top",r.axisOrdinalTop,e),I=e=>j("bottom",r.axisOrdinalBottom,e),F=e=>j("left",r.axisOrdinalLeft,e),B=e=>j("right",r.axisOrdinalRight,e),Y=()=>m(a.tiA()).padding(.5),H=()=>{let e=["crossValue"],t="horizontal",n=t=>{let n=b(t);return r([...Array.from(new Set(n.map((t=>t[e[0]]))))])},r=e=>"vertical"==t?e.reverse():e;return n.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],n):e[0]},n.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},W=e=>t=>t[e].join("|"),q=e=>{let t="horizontal",n="crossValues",o=null,l=()=>{let r=e[n].length>1,a=s(o),l=a.map(c),d=r?l.map((e=>e.size)):l[0].size,g=l.reduce(((e,t)=>e+t.size),0),h=e=>n=>{let o=e(n);return r&&o.groups(a).tickSizeInner(d).tickSizeOuter(g),"horizontal"!==t&&o.tickPadding(10),o},p=i(r);return{bottom:h(p.bottom),left:h(p.left),right:h(p.right),top:h(p.top),size:`${g+10}px`,decorate:(e,n,r)=>{let a=l[r].rotation;"horizontal"===t&&_(e,a),u(e,a)}}},i=e=>e?{bottom:I,left:F,top:D,right:B}:{bottom:r.axisOrdinalBottom,left:r.axisOrdinalLeft,top:r.axisOrdinalTop,right:r.axisOrdinalRight},s=e=>{let t=[];return e.forEach((e=>{(e&&e.split?e.split("|"):[e]).forEach(((n,r)=>{for(;t.length<=r;)t.push([]);let a=t[r];a.length>0&&a[a.length-1].text===n?a[a.length-1].domain.push(e):a.push({text:n,domain:[e]})}))})),t.reverse()},c=n=>{let r=e.size.width,a=Math.max(...n.map((e=>e.text?e.text.length:0)));return"horizontal"===t?n&&16*n.length>r-100?{size:5*a+10,rotation:90}:n&&n.length*(6*a+10)>r-100?{size:3*a+20,rotation:45}:{size:25,rotation:0}:{size:5*a+10,rotation:0}},u=(e,n)=>{let r=n?(e,t)=>e.x+e.width+14>t.x+t.width:(e,t)=>e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height,o="horizontal"==t?d(e):null,l=[];e.each(((e,t,n)=>{let i=a.Ys(n[t]),s=(e=>{let t=-1!==e.indexOf(",")?",":" ",n=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(t).map((e=>parseInt(e)));for(;n.length<2;)n.push(0);return n})(i.attr("transform")),c=i.node().getBBox(),u={x:c.x+s[0],y:c.y+s[1],width:c.width,height:c.height},d=l.some((e=>r(e,u)))||o&&!((e,t)=>e.x>=t.x&&e.x+e.width<=t.x+t.width&&e.y>=t.y&&e.y+e.height<=t.y+t.height)(u,o);i.attr("visibility",d?"hidden":""),d||l.push(u)}))},d=e=>{let t=A(e.node());if(null===t)return;let n=t.querySelector(".cartesian-chart"),r=n.querySelector(".x-axis"),a=n.getBoundingClientRect(),o=r.getBoundingClientRect();return{x:a.left-o.left,width:a.width,y:a.top-o.top,height:a.height}},_=(e,t)=>{let n=(e=>e?e<60?`rotate(-${e} 5 5)`:`rotate(-${e} 3 7)`:"translate(0, 8)")(t),r=t?"end":"";e.each(((e,t,o)=>{a.Ys(o[t]).select("text").attr("transform",n).style("text-anchor",r)}))};return l.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.settingName=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.domain=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l},U={none:f,ordinal:$,time:z,linear:x},K=e=>{let t=null,n="horizontal",a="crossValues",o=null,l=["crossValue"],i=null,s=null,c=["include","paddingStrategy","pad"],u={},d=r=>{let d=p(e).excludeType(t).settingName(a).settingValue(o)(),h=U[d],f=h.domain().valueNames(l);c.forEach((e=>{u[e]&&f[e]&&f[e](u[e])})),f.orient&&f.orient(n);let b=f(r);null!==i&&(b=i(b)),s&&"number"==typeof b[0]&&(s[0]=b[0]=Math.min(b[0],s[0]),s[1]=b[1]=Math.max(b[1],s[1]));let m=h.component?_(h,b,r):g();return{scale:h.scale(),domain:b,domainFunction:f,labelFunction:h.labelFunction,component:{bottom:m.bottom,left:m.left,top:m.top,right:m.right},size:m.size,decorate:m.decorate,label:e[a].map((e=>e.name)).join(", "),tickFormatFunction:h.tickFormatFunction}},_=(t,r,o)=>t.component(e).orient(n).settingName(a).domain(r)(o),g=()=>({bottom:r.axisBottom,left:r.axisLeft,top:r.axisTop,right:r.axisRight,decorate:()=>{}});return d.memoValue=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.excludeType=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],d):t},d.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.settingName=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],d):a},d.settingValue=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],d):o},d.valueName=function(){return arguments.length?(l=[arguments.length<=0?void 0:arguments[0]],d):l[0]},d.valueNames=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},d.modifyDomain=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],d):i},c.forEach((e=>{d[e]=function(){return arguments.length?(u[e]=arguments.length<=0?void 0:arguments[0],d):u[e]}})),d},G=(e,t)=>J(e,t,((e,t)=>e.svgPlotArea(t)),!1),X=(e,t)=>J(e,t,((e,t)=>e.canvasPlotArea(t).svgPlotArea(r.seriesSvgPoint())),!0),J=(e,t,n,o)=>{let l=null,i=null,s=r.chartCartesian({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&s.xDecorate(e.decorate),t.decorate&&s.yDecorate(t.decorate),s.xPaddingInner&&s.xPaddingInner(1),s.xPaddingOuter&&s.xPaddingOuter(.5),s.yPaddingInner&&s.yPaddingInner(1),s.yPaddingOuter&&s.yPaddingOuter(.5),s.axisSplitter=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.altAxis=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.plotArea=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0==t.length?o?this.canvasPlotArea():this.svgPlotArea():n(this,...t)};let c=s.decorate();return s.decorate(((n,u)=>{let d=n.select("d3fc-svg.plot-area"),_=d.select("svg").node();_.setAttribute("viewBox",`0 0 ${d.node().clientWidth} ${d.node().clientHeight}`),_.setAttribute("preserveAspectRatio","none");for(let e of["x-axis","y-axis"])n.select(`d3fc-svg.${e} svg`).node().setAttribute("preserveAspectRatio","none");if(c(n,u),o){let e=n.select(".svg-plot-area").node(),t=n.select(".canvas-plot-area").node();a.td_([e,t]).order()}if(l){if(l.haveSplit()){let c=l.altData(),d=r.dataJoin("d3fc-svg","y2-axis").key((e=>e)),_=r.dataJoin("g","y-series").key((e=>e));n.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",i.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let g=i.scale.domain(i.domain),h=i.component.right(g);if(h.tickFormat(i.tickFormatFunction),i.decorate&&h.decorate(i.decorate),d(n,["right"]).attr("class",(e=>`y-axis ${e}-axis`)).on("measure",(function(e,t){let{width:n,height:r}=e.detail;"left"===t&&a.Ys(e.currentTarget).select("svg").attr("viewBox",`${-n} 0 ${n} ${r}`).attr("preserveAspectRatio","none"),g.range([r,0])})).on("draw",(function(e,t){a.Ys(e.currentTarget).select("svg").call(h)})),o){let r=n=>{let r=s.plotArea();r.context(n.node().getContext("2d")).xScale(e.scale);let a=[t.scale,g];[u,c].forEach(((e,t)=>{r.yScale(a[t]),r(e)}))};n.select("d3fc-canvas.plot-area").on("draw",(function(e,t){r(a.Ys(e.currentTarget).select("canvas"))}))}else{let r=function(n){let r=s.plotArea();r.xScale(e.scale);let o=[t.scale,g];_(n,[u,c]).each(((e,t,n)=>{r.yScale(o[t]),a.Ys(n[t]).datum(e).call(r)}))};n.select("d3fc-svg.plot-area").on("draw",(function(e,t){r(a.Ys(e.currentTarget).select("svg"))}))}}l(n)}})),s};function Z(e,t,n){let r=e.select(t);return r.size()>0?r:n()}function Q(e,t,n){if(void 0===n&&(n="right"),"right"===n||"bottom"===n)return e[n]<t[n];if("left"===n||"top"===n)return e[n]>t[n];throw`Direction being checked for overflow is invalid: ${n}`}function ee(e,t,n,r){void 0===r&&(r=0);let a="x"===e?"width":"height",o=t[e],l=t[e]+t[a],i=n[e],s=n[e]+n[a];return i+r>o&&i-r<l||s+r>o&&s-r<l||i+r<o&&s-r>l}var te='<ul id="tooltip-values"></ul>\n',ne={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}};function re(e){let t={};if(le().types[e]&&Object.assign(t,le().types[e]),t.type){let e=re(t.type);return Object.assign(e,t),e}return t}function ae(e){return e&&"object"==typeof e&&!Array.isArray(e)}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;let a=n.shift();if(ae(e)&&ae(a))for(let o in a)ae(a[o])?(e[o]||Object.assign(e,{[o]:{}}),oe(e[o],a[o])):Object.assign(e,{[o]:a[o]});return oe(e,...n)}function le(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=oe(ne,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}function ie(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],re(e).format);case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function se(e,t){return 0===t.crossValues.length||0===e.crossValue.length?[]:((e.crossValue.split?e.crossValue.split("|"):[e.crossValue])||[e.key]).map(((e,n)=>({name:t.crossValues[n].name,value:ie(t.crossValues[n].type,e)})))}function ce(e,t){if(0===t.splitValues.length)return[];let n=[e.mainValue];return e.key?n=e.key.split("|"):e.mainValue?.split&&(n=e.mainValue.split("|")),t.splitValues.map(((e,t)=>({name:e.name,value:ie(e.type,n[t])})))}function ue(e,t){return t.mainValues.length>1?e.mainValues?t.mainValues.map(((t,n)=>({name:t.name,value:ie(t.type,e.mainValues[n])}))):t.mainValues.map((t=>({name:t.name,value:ie(t.type,e.row[t.name])}))):[{name:t.mainValues[0].name,value:ie(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}function de(e,t,n){!function(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each((function(e){(0,a.Ys)(this).text(`${e.name}: `).append("b").text(_e(e.value))}))}(e,se(t,n).concat(ce(t,n)).concat(ue(t,n)))}var _e=e=>null==e?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:re("float").precision,maximumFractionDigits:re("float").precision}),ge=e=>[e.name,"==",e.value],he=(e,t,n)=>{let r=ue(t,n).map((e=>e.name)),a=se(t,n).map(ge),o=ce(t,n).map(ge),l=n.filter.concat(a).concat(o);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:r,config:{filter:l},row:t.row}}))},pe=()=>{let e=!1,t=null,n=null,r=!1,o=o=>{let l=o.node();if(!l||!l.isConnected)return void fe(t);let i=(0,a.Ys)(A(l));t=function(e){return Z(e,"div.tooltip",(()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(te)))}(i);let s=function(e,l){de(t,l,n);let s=o.nodes(),c=s.indexOf(this);(function(e,t,n,r){let a=e.getBoundingClientRect(),o=t.getBoundingClientRect(),l=o.left+o.width/2-a.left,i=o.top-a.top+e.scrollTop;r&&(i=o.top+o.height/2-a.top+e.scrollTop),n.style("left",`${l}px`).style("top",`${i}px`).style("opacity",.9),r&&([l,i]=function(e,t){let n=e.node().getBoundingClientRect(),r=n.width/2,a=n.left-r-t.left;e.style("left",`${a}px`);let o=n.height/2,l=n.top-o-t.top;return e.style("top",`${l}px`),[a,l]}(n,a)),function(e,t,n,r,a){void 0===a&&(a=!1);let o=e.node().getBoundingClientRect();if(Q(t,o)){let r=o.right-t.right;e.style("left",n-r+"px")}if(Q(t,o,"bottom")){let n=o.bottom-t.bottom;e.style("top",r-n+"px")}if(a){if(Q(t,o,"left")){let r=o.left-t.left;e.style("left",n-r+"px")}if(Q(t,o,"top")){let n=o.top-t.top;e.style("top",r-n+"px")}}}(n,a,l,i,r)})(i.node(),s[c],t,r),(0,a.Ys)(s[c]).style("opacity","0.7")};e?o.each((function(e){return s.call(this,void 0,e)})):(o.on("mouseover",s).on("mouseout",(function(e,n){fe(t);let r=o.nodes(),l=r.indexOf(this);r&&(0,a.Ys)(r[l]).style("opacity","1")})),(()=>{let e=null,t=t=>{let n=t.node();t.on("click",((t,r)=>he(n,r,e)))};return t.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t})().settings(n)(o))};return o.alwaysShow=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.centered=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o};function fe(e){e&&e.style("opacity",0)}function be(e,t){let n=e.mainValues.length>1?r.seriesSvgGrouped(r.seriesSvgBar()):r.seriesSvgBar();return n=n.decorate((n=>{pe().settings(e)(n),n.style("fill",(e=>t(e.key)))})),r.autoBandwidth(me(n)).crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue?e.mainValue:0)).baseValue((e=>e.baseValue))}var me=e=>{let t=t=>e(t);return r.rebindAll(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(Math.max(arguments.length<=0?void 0:arguments[0],1)),t):e.bandwidth()},t};function we(e){return e.split("|").slice(0,-1).join("|")}function ye(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter((e=>"__ROW_PATH__"!==e));return ke().settings(e).domain(n)()}function ve(e,t){let n=Array.from(new Set(t));return ke().settings(e).domain(n)()}function xe(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach((e=>{if("__ROW_PATH__"!==e){let t=we(e);n.includes(t)||n.push(t)}})),ke().settings(e).domain(n)()}function ke(){let e=null,t=null,n={},r=e=>Ve(e,n.colorStyles&&n.colorStyles.opacity),o=()=>{let o=n.colorStyles,l=t||[o.series];if(l||e.length>1){let t=e.length>1?o.scheme:l;return a.PKp(t.map(r)).domain(e)}return null};return o.domain=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.defaultColors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.mapFunction=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o}function Se(e){return Ee(1)(e)}function Ve(e,t){return void 0===t&&(t=.5),Ee(t)(e)}function Ee(e){return t=>{let n=a.$_Y(t);return n.opacity=e,n+""}}var Ae={none:v,ordinal:W,time:R,linear:C},Le=e=>{let t=p(e),n="__ROW_PATH__",a=(e,r)=>Ae[t()](n)(e,r);return(0,r.rebindAll)(a,t),a.valueName=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a};function Te(e,t,n){let{stack:r=!1,excludeEmpty:a=!1}=void 0===n?{}:n,o=t||e.data;return e.splitValues.length>0?function(e,t,n){let{stack:r=!1,excludeEmpty:a=!1}=n,o={};return t.forEach((e=>{let t={},n={};Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).filter((t=>!a||null!=e[t]&&null!=e[t])).forEach((a=>{let o=a.split("|"),l=o[o.length-1],i=e[a]||0,s=`${l}${i>=0?"+ve":"-ve"}`,c=o.slice(0,o.length-1).join("|"),u=n[c]=n[c]||{__ROW_PATH__:e.__ROW_PATH__},d=t[s]||0;u.__KEY__=c,r?(u[l]=d+i,u[`__BASE_VALUE__${l}`]=d,t[s]=u[l]):u[l]=i,u.row=e})),Object.keys(n).forEach((e=>{(o[e]=o[e]||[]).push(n[e])}))})),Object.keys(o).map((e=>{let t=o[e];return t.key=e,t}))}(0,o,{stack:r,excludeEmpty:a}):[o]}function Ce(e,t){let n={stack:!0};return Te(e,t,n).map((t=>Me(e,t,n)))}function Me(e,t,n){let{stack:r=!1}=n,a=function(e,t,n){let{stack:r=!1}=n,a=Le(e);return e=>{let n=t=>r&&t[`__BASE_VALUE__${e.name}`]||0,o=t.map(((t,r)=>({crossValue:a(t,r),mainValue:t[e.name]?t[e.name]:null,baseValue:n(t),key:t.__KEY__?`${t.__KEY__}|${e.name}`:e.name,row:t.row||t})));return o.key=o[0].key,o}}(e,t,{stack:r});return e.mainValues.length>1?e.mainValues.map(a):a(e.mainValues[0])}var Ne=10;function ze(e,t,n){let r=a.Ys(E(e).getContainer()).node().getBoundingClientRect(),o=e.getBoundingClientRect(),l={top:o.top+n-Ne,right:o.right+t+Ne,bottom:o.bottom+n+Ne,left:o.left+t-Ne},i={x:t,y:n};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach((e=>{if(Q(r,l,e.edge)){let t=l[e.edge]-r[e.edge];i[e.dimension]=i[e.dimension]-t}})),i}var Pe="resize.for-dragging";function Oe(){let e=!0,t=null,n=n=>{let r=n.node(),o=r.getRootNode().host.closest("perspective-viewer");r.style.cursor="move",t.legend&&(r.style.left=t.legend.left,r.style.top=t.legend.top);let l=a.ohM().on("drag",(function(n){let o=ze(this,n.dx,n.dy);this.style.left=`${this.offsetLeft+o.x}px`,this.style.top=`${this.offsetTop+o.y}px`;let l={left:this.style.left,top:this.style.top};t.legend={...t.legend,...l},e=function(e){let t=e.getBoundingClientRect(),n=a.Ys(A(e)).node().getBoundingClientRect(),r=5;return t.right+Ne+r>=n.right&&t.top-Ne-r<=n.top}(r)?function(e){return a.Ys(window).on(Pe,null),e.style.left="auto",!0}(r):function(e,t){return!1!==t&&a.Ys(window).on(Pe,(function(){let t=ze(e,0,0);e.style.left=`${e.offsetLeft+t.x}px`,e.style.top=`${e.offsetTop+t.y}px`})),!1}(r,e)}));l.on("end",(function(e){a.Ys(window).on(Pe,null),o?.dispatchEvent(new Event("perspective-config-update"))})),n.call(l)};return n.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}var Re="horizontal-drag-handle",$e="vertical-drag-handle",je="dragHandles",De="resize";var Ie=(e,t,n,r)=>{e.selectAll(`.${r}`).each(((e,r,o)=>{let l=o[r];a.Ys(l).attr(n,l.getBoundingClientRect()[n]-t)}))},Fe=e=>e.select(`#${je}`).size()>0,Be=(e,t,n)=>e.attr(t,Number(e.attr(t))-n),Ye=(e,t,n)=>e.attr(t,e.node().getBoundingClientRect()[t]-n),He=(e,t)=>{let n,o,l=e||i.wg(),s=[],c=1,u=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,d=()=>{},_=Oe().settings(t),g=e=>{s=l.scale().domain(),o=function(){let e=9,t=3,n=null,r={height:100,width:100},o={height:null,width:null},l=[],i=(e,t)=>l.filter((t=>t.event===e)).forEach((e=>e.execute(t))),s=r=>{if(Fe(r))return;let l={left:e=>i(De,{horizontal:A(e),vertical:!1}),top:e=>i(De,{horizontal:!1,vertical:T(e)}),right:e=>i(De,{horizontal:L(e),vertical:!1}),bottom:e=>i(De,{horizontal:!1,vertical:C(e)}),topleft:e=>i(De,{horizontal:A(e),vertical:T(e)}),topright:e=>i(De,{horizontal:L(e),vertical:T(e)}),bottomright:e=>i(De,{horizontal:L(e),vertical:C(e)}),bottomleft:e=>i(De,{horizontal:A(e),vertical:C(e)})},s=r.node();n.legend&&(s.style.height=n.legend.height,s.style.width=n.legend.width);let d=s.getBoundingClientRect(),_=r.append("svg").attr("id",je).attr("width",d.width).attr("height",d.height),g=_.append("g"),h=e=>"left"===e||"right"===e,p={left:0,top:e,right:d.width-e,bottom:e},f={left:e,top:0,right:e,bottom:d.height-e},[b,m,w,y]=["left","top","right","bottom"].map((n=>g.append("rect").attr("id",`drag${n}`).attr("class",h(n)?$e:Re).attr("y",f[n]).attr("x",p[n]).attr("height",h(n)?d.height-2*e:e).attr("width",h(n)?e:d.width-2*e).attr("fill",h(n)?"lightgreen":"lightblue").attr("fill-opacity",0).style("z-index",t).attr("cursor",h(n)?"ew-resize":"ns-resize").call(a.ohM().on("drag",l[n])))),v=e=>`${e[0]}${e[1]}`,x={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},[k,S,V,E]=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]].map((n=>g.append("rect").attr("id",`drag${v(n)}`).attr("class",`corner-drag-handle ${n[0]} ${n[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",0).style("z-index",t).attr("cursor",`${x[v(n)]}-resize`).call(a.ohM().on("drag",l[v(n)]))));function A(e){let t=u(ze(b.node(),e.x,0).x,_,"width",((e,t)=>e-t));return s.style.left=`${s.offsetLeft+t}px`,s.style.width=s.offsetWidth-t+"px",M(),N(w,t,"width","x")}function L(e){let t=-u(ze(w.node(),e.dx,0).x,_,"width",((e,t)=>e+t));return!c(t,"x",w,e)&&(s.style.width=s.offsetWidth-t+"px",M(),N(w,t,"width","x"))}function T(e){let t=u(ze(m.node(),0,e.y).y,_,"height",((e,t)=>e-t));return s.style.top=`${s.offsetTop+t}px`,s.style.height=s.offsetHeight-t+"px",M(),N(y,t,"height","y")}function C(e){let t=-u(ze(y.node(),0,e.dy).y,_,"height",((e,t)=>e+t));return!c(t,"y",y,e)&&(s.style.height=s.offsetHeight-t+"px",M(),N(y,t,"height","y"))}function M(){let e={top:s.style.top,left:s.style.left,height:s.style.height,width:s.style.width};n.legend={...n.legend,...e}}function N(e,t,n,r){return Ye(_,n,t),Be(e,r,t),Ie(_,t,n,"height"===n?$e:Re),z(_),0!=t}function z(t){k.attr("y",0,"x",0),S.attr("y",0).attr("x",t.attr("width")-e),V.attr("y",t.attr("height")-e).attr("x",t.attr("width")-e),E.attr("y",t.attr("height")-e).attr("x",0)}function P(e,t,n){o[e]&&o[e]<d[e]&&(s.style[e]=`${o[e]}px`,N(n,d[e]-o[e],e,t))}P("height","y",y),P("width","x",w),z(_)};function c(e,t,n,r){return a=t,o=n,e<0&&r[a]<Number(o.attr(a))||((e,t,n,r)=>e>0&&r[t]>Number(n.attr(t)))(e,t,n,r);var a,o}function u(e,t,n,a){let l=a(Number(t.attr(n)),e);return l<r[n]?a(e,r[n]-l):o[n]&&l>o[n]?a(e,o[n]-l):e}return s.on=(e,t)=>(l.push({event:e,execute:t}),s),s.zIndex=e=>(t=e,s),s.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.minWidth=e=>(r.width=e,o.width&&(o.width=Math.max(r.width,o.width)),s),s.minHeight=e=>(r.height=e,o.height&&(o.height=Math.max(r.height,o.height)),s),s.handleWidth=t=>(e=t,s),s.maxWidth=e=>(o.width=e,r.width=Math.min(r.width,o.width),s),s.maxHeight=e=>(o.height=e,r.height=Math.min(r.height,o.height),s),s}().settings(t).maxHeight(16*s.length+20).on("resize",(()=>h(e))),o(e),_(e),h(e)},h=e=>{w(e),p(e),f(e),function(e){let t=e.select("g.legendCells"),n=e.node().getBoundingClientRect();if(!Q(n,t.node().getBoundingClientRect()))return;let r=e.select(".legend");t.selectAll(".label").text(((e,t,a)=>{let o=a[t];if(Q(n,o.getBoundingClientRect())){let t=function(e,t,n){let r=e.getBoundingClientRect(),a=t.node().createSVGPoint(),o=3;return a.x=n.right-r.left-o,a.y=0,e.getCharNumAtPosition(a)}(o,r,n);return`${e.substring(0,t-3)}...`}return e}))}(e)},p=e=>{let t=v(e);t.style("display",c<=1?"none":"block"),t.select("#page-text").text(`${u+1}/${c}`),t.select("#up-arrow").attr("class",0===u?"disabled":"").on("click",(()=>{u>0&&(b(u-1),h(e))})),t.select("#down-arrow").attr("class",u>=c-1?"disabled":"").on("click",(()=>{u<c-1&&(b(u+1),h(e))}))},f=e=>{c>1&&l.cellFilter(m()),e.select("g.legendCells").remove();let t=x(e);t.call(l);let n=e.select("g.legendCells").node().getBBox();t.attr("height",n.height+20),d(e)},b=e=>{u=e,t.legend={...t.legend,pageIndex:u}},m=()=>(e,t)=>t>=n*u&&t<n*u+n,w=e=>{let t=e.node().getBoundingClientRect(),r=Math.floor(t.height/16)-1;n=r<s.length?r-1:r,c=y(r),u=Math.min(u,c-1)},y=e=>Math.ceil(s.length/e),v=e=>Z(e,".legend-controls",(()=>e.append("g").attr("class","legend-controls").html('<span id="up-arrow">&#9650;</span>\n<span id="page-text"></span>\n<span id="down-arrow">&#9660;</span>\n'))),x=e=>Z(e,".legend",(()=>e.append("svg").attr("class","legend")));return g.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],g):d},(0,r.rebindAll)(g,l),g},We=e=>He(i.wg().shape("circle").shapeRadius(6),e),qe=e=>He(i.ry().shapePadding(1).labelOffset(3),e),Ue=()=>Xe(We),Ke=()=>Xe(qe,Ge);function Ge(e){if(!e)return null;let t=e.domain(),n=e.range().map((e=>a.NAG().type(e)()));return a.PKp().domain(t).range(n)}function Xe(e,t){let n={},r=null,a=null;function o(t){if(r&&r.range().length>1){let o=e(n);o.scale(r).orient("vertical").on("cellclick",(function(e){let t=this.__data__;n.hideKeys=n.hideKeys||[],n.hideKeys.includes(t)?n.hideKeys=n.hideKeys.filter((e=>e!==t)):n.hideKeys.push(t),E(this)._draw()})),o.labels((e=>{let t=e.domain[e.i].split("|");return n.mainValues.length<=1&&t.length>1?t.slice(0,t.length-1).join("|"):e.domain[e.i]}));let l=Z(t,"div.legend-container",(()=>t.append("div")));o.decorate((e=>{let t=e=>n.hideKeys&&n.hideKeys.includes(e),r=e.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");r.classed("hidden",t),r.append("title").html((e=>e)),a&&r.select("circle, path").style("fill",(e=>t(e)?null:a(e))).style("stroke",(e=>t(e)?null:Se(a(e))))})),l.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(o)}}return o.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.scale=function(){return arguments.length?(r=t?t(arguments.length<=0?void 0:arguments[0]):arguments.length<=0?void 0:arguments[0],o):r},o.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function Je(e,t){let n=t||e.data;return e.hideKeys&&e.hideKeys.length>0?n.map((t=>{let n={...t};return e.hideKeys.forEach((e=>{delete n[e]})),n})):n}function Ze(e,t){let n=t||e.data;return e.hideKeys&&e.hideKeys.length>0?n.map((t=>{let n={};return Object.keys(t).map((r=>{e.hideKeys.includes(we(r))||(n[r]=t[r])})),n})):n}var Qe=e=>t=>{t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb",t.lineWidth=1},et=e=>e.style("display","none"),tt=e=>t=>{t.lineWidth=1,t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb"},nt=(e,t)=>{let n="both",a=!1,o=null,l=null,i=null,s=r.seriesSvgMulti(),c=r.annotationSvgGridline(),u=(e=>t=>t.style("stroke-width","1.0").style("stroke",e?e.colorStyles.grid.gridLineColor:"#bbb"))(t),d=et,_=function(){a&&(s=r.seriesCanvasMulti().context(i),c=r.annotationCanvasGridline(),u=Qe(t),d=tt(t));let _=s.xScale(o).yScale(l),g="vertical"===n?d:u,h="horizontal"===n?d:u,p=c.xDecorate(g).yDecorate(h);return _.series([p,e])(...arguments)};return _.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],_):n},_.canvas=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],_):a},_.xScale=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],_):o},_.yScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],_):l},_.context=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],_):i},_},rt=()=>{let e=k(),t=t=>{let n=e.pad(),r=e.padUnit(),a=1;switch(r){case"domain":break;case"percent":a=t[1]-t[0];break;default:throw new Error("Unknown padUnit: "+r)}let o=t[0]-n[0]*a,l=t[1]+n[1]*a;return t[0]=t[0]>=0&&o<0?0:o,t[1]=t[1]<=0&&l>0?0:l,t};return r.rebindAll(t,e),t},at=()=>{let e=null,t=null,n=null,r=null,o=null,l=null,i=!1,s=!1,c=()=>{};function u(c){let u=`d3fc-${s?"canvas":"svg"}.plot-area`;if(n||o){let g=r&&r.domain()[0]instanceof Date,h=a.sPX().on("zoom",(i=>{let{transform:s}=i;t.zoom={k:s.k,x:s.x,y:s.y},d(s),c.call(e);let p=1===s.k&&0===s.x&&0===s.y,f=_(c).style("display",p?"none":"");f.select("#zoom-reset").on("click",(()=>c.select(u).call(h.transform,a.CRH)));let b=f.select("#one-year").style("display",g?"":"none"),m=f.select("#six-months").style("display",g?"":"none"),w=f.select("#one-month").style("display",g?"":"none");if(g){let e=e=>()=>{let t=new Date(n.domain()[0]),i=new Date(t);e(t,i);let s=r.range(),d=(s[1]-s[0])/(r(i)-r(t)),_=-r(t)*d,g=0;if(o){let e=o.domain().reduce(((e,t)=>e+t))/2;g=-l(e)*d+o(e)}c.select(u).call(h.transform,a.CRH.translate(_,g).scale(d))};b.on("click",e(((e,t)=>t.setYear(e.getFullYear()+1)))),m.on("click",e(((e,t)=>t.setMonth(e.getMonth()+6)))),w.on("click",e(((e,t)=>t.setMonth(e.getMonth()+1))))}})),p=e.decorate();e.decorate(((e,n)=>{if(p(e,n),!i){i=!0;let n=e.select(u),o=s?window.devicePixelRatio:1;n.on("measure.zoom-range",(e=>{if(r&&r.range([0,e.detail.width/o]),l&&l.range([0,e.detail.height/o]),t.zoom){let e=a.CRH.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);n.call(h.transform,e)}})).call(h)}}))}c.call(e)}u.chart=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.xScale=function(){return arguments.length?(n=g(arguments.length<=0?void 0:arguments[0]),r=n?n.copy():null,u):n},u.yScale=function(){if(!arguments.length)return o;if(o=g(arguments.length<=0?void 0:arguments[0]),l=o?o.copy():null,l){let e=l.domain();l.domain([e[1],e[0]])}return u},u.canvas=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],u):s},u.onChange=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],u):c};let d=e=>{let t={...e};if(n&&(n.domain(e.rescaleX(r).domain()),t.xDomain=n.domain()),o){let n=e.rescaleY(l).domain();o.domain([n[1],n[0]]),t.yDomain=o.domain()}c(t)},_=e=>Z(e,".zoom-controls",(()=>e.append("div").attr("class","zoom-controls").style("display","none").html('<button id="zoom-reset">Reset zoom</button>\n<button id="one-year">1 Year</button>\n<button id="six-months">6 Months</button>\n<button id="one-month">1 Month</button>\n'))),g=e=>e&&e.nice?e:null;return u};function ot(e,t){let n=Ce(t,Je(t)),a=ye(t),o=Ue().settings(t).scale(a),l=be(t,a).orient("horizontal"),i=r.seriesSvgMulti().mapping(((e,t)=>e[t])).series(n.map((()=>l))),s=K(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[0]).excludeType(_).include([0]).paddingStrategy(rt())(n),c=K(t).excludeType(h).settingName("crossValues").valueName("crossValue").orient("vertical")(n),u=G(s,c).plotArea(nt(i,t).orient("horizontal"));u.yPaddingInner&&(u.yPaddingInner(.5),u.yPaddingOuter(.25),l.align("left")),u.xNice&&u.xNice();let d=at().chart(u).settings(t).yScale(c.scale);e.datum(n).call(d),e.call(o)}ot.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["X Axis"]}};var lt=ot,it=e=>2===e.length&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],st=e=>(0-e[0])/(e[1]-e[0]),ct=(e,t)=>t*e[1]/(t-1),ut=function(e,t,n){void 0===n&&(n=dt);let a,o,l,i=e.splitMainValues||[],s=e=>{let t=e.split("|");return i.includes(t[t.length-1])},c=e.mainValues.some((e=>s(e.name)));o=c?n(t,(e=>!s(e))):t,l=c?n(t,s):null;let u=t=>{if(1===e.mainValues.length)return;let n=e.mainValues.map(((e,t)=>({index:t,name:e.name}))),o=n.filter((e=>!s(e.name))),l=n.filter((e=>s(e.name))),i=()=>(e=>{let t,n=[],a=!1,o=o=>{o.text("");let i=r.dataJoin("span","splitter-label").key((e=>e)),s=!a&&1===n.length,c=t&&0===e.splitValues.length;i(o,n).classed("disabled",s).text((e=>e.name)).style("color",(e=>c?Se(t(e.name)):void 0)).on("click",((t,n)=>{s||(e.splitMainValues=a?e.splitMainValues.filter((e=>e!=n.name)):[n.name].concat(e.splitMainValues||[]),t.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),l(o))}))},l=e=>{let t=E(e.node());t._container.innerHTML="",t._draw()};return o.labels=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.alt=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o.color=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o})(e).color(a);t.select(".y-label.left-label").call(i().labels(o)),t.select(".y-label.right-label").call(i().labels(l).alt(!0))};return u.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],u):a},u.haveSplit=()=>c,u.data=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.altData=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],u):l},u},dt=(e,t)=>e.map((e=>e.filter((e=>t(e.key))))),_t=(e,t)=>e.map((e=>t(e.key)?e:e.map((e=>Object.assign({},e,{mainValue:null}))))),gt=(e,t)=>e.map((e=>_t(e,t)));function ht(e,t){let n=Ce(t,Je(t)),a=ye(t),o=Ue().settings(t).scale(a),l=be(t,a).orient("vertical"),i=r.seriesSvgMulti().mapping(((e,t)=>e[t])).series(n.map((()=>l))),s=K(t).excludeType(h).settingName("crossValues").valueName("crossValue")(n),c=K(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(_).orient("vertical").include([0]).paddingStrategy(rt()),u=t.mainValues.length>1?gt:_t,d=ut(t,n,u).color(a),g=c(d.data()),p=d.haveSplit()?i:nt(i,t).orient("vertical"),f=G(s,g).axisSplitter(d).plotArea(p);f.xPaddingInner&&(f.xPaddingInner(.5),f.xPaddingOuter(.25),l.align("left")),f.yNice&&f.yNice();let b=at().chart(f).settings(t).xScale(s.scale);if(d.haveSplit()){let e=c(d.altData());((e,t)=>{if(!it(e)||!it(t))return;let n=st(e),r=st(t);n>r?t[0]=ct(t,n):e[0]=ct(e,r)})(g.domain,e.domain),f.yDomain(g.domain).altAxis(e)}e.datum(d.data()).call(b),e.call(o)}ht.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var pt=ht;function ft(e,t){let n=r.seriesSvgLine(),a=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),o=Math.max(1,Math.min(3,Math.floor(e.size.width/a/2)));return n=n.decorate((e=>{e.style("stroke",(e=>Se(t(e[0]&&e[0].key)))).style("stroke-width",o)})),n.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue))}var bt=function(e){let t=[];for(let n of e)for(let e=0;e<n.length;e++)null!==n[e].mainValue&&(t[e]=t[e]||[],t[e].push(n[e]));return t},mt=function(e,t,n){void 0===n&&(n=Math.min);let r=e=>e.reduce(((e,r)=>{let o=a(r,t);return!o||e&&n(e.value,o.value)!==o.value?e:o}),null),a=e=>{if(Array.isArray(e))return r(e);let n=t(e);return null!==n?{item:e,value:n}:null},o=r(e);return o?o.item:null},wt=()=>{let e=pe().alwaysShow(!0),t=null,n=null,a=null,o=null,l=!1,i=null,s="crossValue",c="mainValue",u=null,d=1;function _(a){let o=`d3fc-${l?"canvas":"svg"}.plot-area`;if(t||n){let t=null,l=r.pointer().on("point",(e=>{let r=e.length?h(e[0]):null;t=r?[r.data]:[];let o=r?r.scale:n;g(a,t,o)}));a.select(o).on("measure.nearbyTip",(()=>g(a,[]))).on("click",(()=>{t.length&&he(a.node(),t[0],e.settings())})).call(l)}}let g=function(r,l,i){void 0===i&&(i=n);let u=r.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(l);u.exit().remove(),u.enter().append("circle").attr("class","nearbyTip").merge(u).attr("r",(e=>o?d*Math.sqrt(o(e.size)):10)).attr("transform",(e=>`translate(${t(e[s])},${i(e[c])})`)).style("stroke","none").style("fill",(e=>a&&e.key&&Ve(a(e.key)))),e(u)},h=e=>{let r=n=>r=>void 0===r[c]||null===r[c]||void 0===r[s]||null===r[s]?null:Math.sqrt(Math.pow(t(r[s])-e.x,2)+Math.pow(n(r[c])-e.y,2)),a=r(n),o=mt(i,a,Math.min);if(u){let e=r(u.yScale),t=mt(u.data,e,Math.min);return a(o)<=e(t)?{data:o,scale:n}:{data:t,scale:u.yScale}}return{data:o,scale:n}};return _.scaleFactor=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},_.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],_):t},_.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],_):n},_.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],_):a},_.size=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length?(o=t[0]?t[0].copy().range([40,4e3]):null,_):o},_.canvas=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],_):l},_.data=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],_):i},_.xValueName=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],_):s},_.yValueName=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],_):c},_.altDataWithScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],_):u},r.rebindAll(_,e),_};function yt(e,t){let n=function(e,t){let n=Le(e);return t.map(((e,t)=>Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).map((r=>({key:r,crossValue:n(e,t),mainValue:e[r],row:e})))))}(t,Je(t)),a=ye(t),o=Ue().settings(t).scale(a),l=r.seriesSvgRepeat().series(ft(t,a)).orient("horizontal"),i=rt().pad([.1,.1]).padUnit("percent"),s=ut(t,bt(n)).color(a),c=K(t).excludeType(h).settingName("crossValues").valueName("crossValue")(n),u=K(t).settingName("mainValues").valueName("mainValue").memoValue(s.haveSplit()?null:t.axisMemo[0]).orient("vertical").paddingStrategy(i),d=u(s.data()),_=s.haveSplit()?l:nt(l,t).orient("vertical"),g=G(c,d).axisSplitter(s).plotArea(_);g.yNice&&g.yNice();let p=at().chart(g).settings(t).xScale(c.scale),f=wt().settings(t).xScale(c.scale).yScale(d.scale).color(a).data(n);if(s.haveSplit()){let e=u(s.altData());g.altAxis(e),f.data(s.data()).altDataWithScale({yScale:e.scale,data:s.altData()})}let b=s.data();e.datum(b).call(p),e.call(f),e.call(o)}yt.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var vt=yt,xt=[a.JFv,a.tJO,a.rZl,a.m_s,a.Hmc,a.P67,a.n31];function kt(e){return e.length>1?a.PKp().domain(e).range(xt):null}function St(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach((e=>{if("__ROW_PATH__"!==e){let t=we(e);n.includes(t)||n.push(t)}})),kt(n)}function Vt(e,t){let n=bt(function(e,t){let n=e.mainValues.length;return t.map((e=>{let t=Object.keys(e).filter((e=>"__ROW_PATH__"!==e)),r=new Array(t.length/n);for(let a=0;a<t.length/n;a++)r[a]={key:we(t[a*n]),crossValue:e[t[a*n]],mainValue:e[t[a*n+1]],row:e};return r}))}(t,Ze(t))),a=xe(t),o=St(t),l=null;a.domain().length>=2&&(l=Xe(We,Ge).settings(t).scale(o).color(a));let i=r.seriesSvgRepeat().series(ft(t,a)).orient("horizontal"),s=rt().pad([.1,.1]).padUnit("percent"),c=K(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").memoValue(t.axisMemo[0]).paddingStrategy(s),u=K(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(s)(n),d=c(n),_=nt(i,t).orient("vertical"),g=G(d,u).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(_);g.xNice&&g.xNice(),g.yNice&&g.yNice();let h=at().chart(g).settings(t).xScale(d.scale).yScale(u.scale),p=wt().settings(t).xScale(d.scale).yScale(u.scale).color(a).data(n);e.datum(n).call(h),e.call(p),l&&e.call(l)}Vt.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Et=Vt;function At(e,t){let n=function(e,t){let n=Le(e);return t.map(((e,t)=>{let r={};return Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).map((a=>{let o=a.split("|"),l=o[o.length-1],i=r[l]||0,s=i+e[a];return r[l]=s,{key:a,crossValue:n(e,t),mainValue:s,baseValue:i,row:e}}))}))}(t,Je(t)),a=ye(t),o=Ue().settings(t).scale(a),l=r.seriesSvgRepeat().series(function(e,t){let n=r.seriesSvgArea();return n=n.decorate((e=>{e.style("fill",(e=>t(e[0].key))).style("opacity",.5)})),n.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue)).baseValue((e=>e.baseValue))}(0,a).orient("vertical")),i=r.seriesSvgRepeat().series(ft(t,a)).orient("vertical"),s=r.seriesSvgMulti().series([l,i]),c=K(t).excludeType(h).settingName("crossValues").valueName("crossValue")(n),u=K(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(_).orient("vertical").include([0]).paddingStrategy(rt()),d=ut(t,n).color(a),g=u(d.data()),p=d.haveSplit()?s:nt(s,t).orient("vertical"),f=G(c,g).axisSplitter(d).plotArea(p);f.yNice&&f.yNice();let b=at().chart(f).settings(t).xScale(c.scale),m=wt().settings(t).xScale(c.scale).yScale(g.scale).color(a).data(n);if(d.haveSplit()){let e=u(d.altData());f.altAxis(e),m.data(d.data()).altDataWithScale({yScale:e.scale,data:d.altData()})}e.datum(d.data()).call(b),e.call(m),e.call(o)}At.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Lt=At;function Tt(e,t){let n=function(e,t){let n={stack:!1},r=Te(e,t,n).map((t=>Me(e,t,n)));return e.mainValues.length>1?r.reduce(((e,t)=>e.concat(t))):r}(t,Je(t)),a=function(e){let t=e.data&&e.data.length>0?e.data[0]:{};return kt(Object.keys(t).filter((e=>"__ROW_PATH__"!==e)))}(t),o=ye(t),l=Ke().settings(t).scale(a).color(o),i=r.seriesSvgMulti().mapping(((e,t)=>e[t])).series(n.map((e=>function(e,t,n,a){let o=r.seriesSvgPoint().size(100),l=e.colorStyles&&e.colorStyles.opacity;return a&&o.type(a(t)),o.decorate((e=>{e.style("stroke",(e=>Se(n(e.colorValue||t)))).style("fill",(e=>Ve(n(e.colorValue||t),l)))})),o.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue))}(t,e.key,o,a)))),s=rt().pad([.05,.05]).padUnit("percent"),c=K(t).excludeType(h).settingName("crossValues").valueName("crossValue")(n),u=K(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(s),d=ut(t,n).color(o),_=u(d.data()),g=d.haveSplit()?i:nt(i,t).orient("vertical"),p=G(c,_).axisSplitter(d).plotArea(g);p.yNice&&p.yNice();let f=at().chart(p).settings(t).xScale(c.scale),b=wt().settings(t).xScale(c.scale).yScale(_.scale).color(o).data(n);if(d.haveSplit()){let e=u(d.altData());p.altAxis(e),b.data(d.data()).altDataWithScale({yScale:e.scale,data:d.altData()})}e.datum(d.data()).call(f),e.call(b),l&&e.call(l)}Tt.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Ct=Tt;function Mt(e,t){return Te(e,t,{excludeEmpty:!0}).map((t=>function(e,t){let n=Le(e),r=t.map(((r,a)=>({crossValue:n(r,a),mainValues:e.mainValues.map((e=>r[e.name])),x:r[e.mainValues[0].name],y:r[e.mainValues[1].name],colorValue:e.realValues[2]?r[e.realValues[2]]:void 0,size:e.realValues[3]?r[e.realValues[3]]:void 0,key:t.key,row:r})));return r.key=t.key,r}(e,t)))}function Nt(e,t,n,r){let o=zt(t,n,r),l=e.colorStyles.gradient.full;if(o[0]>=0)l=e.colorStyles.gradient.positive;else if(o[1]<=0)l=e.colorStyles.gradient.negative;else{let e=Math.max(-o[0],o[1]);o=[-e,e]}let i=Pt(l);return a.cJy(i).domain(o)}var zt=(e,t,n)=>n||T().valueName(t).pad([0,0])(e),Pt=e=>{let t=e.slice(1).map(((t,n)=>a.sXR(e[n][1],t[1])));return n=>{let r=e.findIndex(((t,r)=>r<e.length-1&&n<=e[r+1][0]&&n>t[0]));if(-1===r)return n<=e[0][0]?e[0][1]:e[e.length-1][1];let a=t[r],[o]=e[r],[l]=e[r+1];return a((n-o)/(l-o))}};function Ot(){let e=null;function t(t){let n=Z(t,"div.legend-container",(()=>t.append("div").attr("class","legend-container legend-color").style("z-index","2"))),{width:o,height:l}=n.node().getBoundingClientRect(),i=a.tiA().domain([0,1]).range([0,o]),s=e.copy().nice().domain(),c=r.extentLinear().pad([.1,.1]).padUnit("percent")(s),[u,d]=c,_=a.w6H(u,d,(d-u)/l),g=a.BYU().domain(c).range([l,0]),h=r.autoBandwidth(r.seriesSvgBar()).xScale(i).yScale(g).crossValue(0).baseValue(((e,t)=>_[Math.max(0,t-1)])).mainValue((e=>e)).decorate((t=>{t.selectAll("path").style("fill",(t=>e(t)))})),p=s[0]<0&&s[1]>0?0:Math.round((s[1]+s[0])/2),f=[...s,p],b=r.axisRight(g).tickValues(f).tickSizeOuter(0).tickFormat((e=>V(e))),m=Z(n,"svg",(()=>n.append("svg"))).style("width",o).style("height",l),w=Z(m,"g",(()=>m.append("g"))).datum(_).call(h),y=Math.abs(w.node().getBBox().x);Z(m,"#legend-axis",(()=>m.append("g").attr("id","legend-axis"))).attr("transform",`translate(${y})`).datum(_).call(b).select(".domain").attr("visibility","hidden")}return t.scale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t}function Rt(e,t){let n=Mt(t,Ze(t)),o=St(t),l=t.realValues.length<=2||null===t.realValues[2],i=null,s=null;l?(i=xe(t),s=Ke().settings(t).scale(o).color(l?i:null)):(i=Nt(t,n,"colorValue"),s=Ot().scale(i));let c=t.realValues[3]?function(e,t,n,r){return a.BYU().domain(zt(t,n,r))}(0,n,"size").range([10,1e4]):null,u=t.realValues[4],d=function(e,t){let[n,r]=e,[a,o]=t,l=(o-r)/(a-n),i=o-l*a;return function(e){let t=e.node(),n=Math.min(t.clientWidth,t.clientHeight);return Math.min(o,Math.max(r,l*n+i))}}([600,.1],[1600,1])(e),_=r.seriesCanvasMulti().mapping(((e,t)=>e[t])).series(n.map((e=>function(e,t,n,a,o,l,i){void 0===i&&(i=1);let s=(0,r.seriesCanvasPoint)().crossValue((e=>e.x)).mainValue((e=>e.y));return n&&s.size((e=>Math.round(i*n(e.size)))),l&&s.type(l(t)),s.decorate(((r,l)=>{let s=a(void 0!==l.colorValue?l.colorValue:t),c=e.colorStyles&&e.colorStyles.opacity;if(o){let{type:t}=e.mainValues.find((e=>e.name===o)),a=ie(t,l.row[o]);if(null!==a){r.fillStyle=e.textStyles.color,r.font=e.textStyles.font;let t=0;n&&(t=1*Math.sqrt(i*n(l.size)/Math.PI));let o=t+8;r.fillText(a,o,4)}}r.strokeStyle=Se(s),r.fillStyle=Ve(s,c)})),s}(t,e.key,c,i,u,o,d)))),g=()=>K(t).settingName("mainValues").paddingStrategy(rt()).pad([.1,.1]),h=g().settingValue(t.mainValues[0].name).memoValue(t.axisMemo[0]).valueName("x")(n),p=g().orient("vertical").settingValue(t.mainValues[1].name).memoValue(t.axisMemo[1]).valueName("y")(n),f=X(h,p).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(nt(_,t).canvas(!0));f.xNice&&f.xNice(),f.yNice&&f.yNice();let b=at().chart(f).settings(t).xScale(h.scale).yScale(p.scale).canvas(!0),m=wt().scaleFactor(d).settings(t).canvas(!0).xScale(h.scale).xValueName("x").yValueName("y").yScale(p.scale).color(l&&i).size(c).data(n);e.datum(n).call(b),e.call(m),s&&e.call(s)}Rt.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Label","Tooltip"]},selectMode:"toggle"};var $t=Rt;function jt(e,t){let n=function(e,t){let n=Le(e),r=p(e).excludeType(h).settingName("splitValues")(),a=[];return t.forEach(((e,t)=>{let o=n(e,t);Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).forEach((t=>{let n=function(e){let t=e.split("|");return t.pop(),t.join("|")}(t);a.push({crossValue:o,mainValue:r===g?new Date(n):n,colorValue:e[t],row:e})}))})),a}(t,Je(t)),a=Nt(t,n,"colorValue"),o=function(e,t){let n=r.seriesCanvasHeatmap();return n.decorate(((e,n)=>{e.fillStyle=t(n.colorValue)})),r.autoBandwidth(n).xValue((e=>e.crossValue)).yValue((e=>e.mainValue)).colorValue((e=>e.colorValue)).colorInterpolate(t.interpolator()).widthFraction(1)}(0,a),l=Ot().scale(a),i=K(t).excludeType(h).settingName("crossValues").valueName("crossValue")(n),s=K(t).excludeType(h).settingName("splitValues").valueName("mainValue").modifyDomain((e=>isNaN(e[0])?e:e.reverse())).orient("vertical")(n),c=X(i,s).plotArea(nt(o,t).canvas(!0));c.xPaddingInner&&(c.xPaddingInner(0),c.xPaddingOuter(0),o.xAlign("right")),c.yPaddingInner&&(c.yPaddingInner(0),c.yPaddingOuter(0),o.yAlign("top"));let u=at().chart(c).settings(t).xScale(i.scale).yScale(s.scale).canvas(!0),d=wt().settings(t).canvas(!0).xScale(i.scale).yScale(s.scale).color(a).data(n);e.datum(n).call(u),e.call(l),e.call(d)}jt.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0,initial:{names:["Color"]}};var Dt=jt;function It(e,t){return Te(e,t,{excludeEmpty:!0}).map((t=>function(e,t){let n=Le(e),r=n=>t[n<t.length-1?n+1:n][e.realValues[0]],a=t.map(((a,o)=>{let l=e.realValues[0]?a[e.realValues[0]]:void 0,i=e.realValues[1]?a[e.realValues[1]]:r(o);return{crossValue:n(a,o),mainValues:e.mainValues.map((e=>a[e.name])),openValue:l,closeValue:i,highValue:e.realValues[2]?a[e.realValues[2]]:Math.max(l,i),lowValue:e.realValues[3]?a[e.realValues[3]]:Math.min(l,i),key:t.key,row:a}}));return a.key=t.key,a}(e,t)))}var Ft=function(e){return function(t,n){let a=It(n,Ze(n)),o=r.indicatorBollingerBands().value((e=>e.openValue)),l=a.map((e=>{let t=o(e);return e.map(((e,n)=>Object.assign({bollinger:t[n]},e)))})),i=a.map((e=>e.key)).concat(n.hideKeys?n.hideKeys:[]).sort(),s=ke().domain(i).settings(n).mapFunction(Ee(1))(),c=Ue().settings(n).scale(i.length>1?s:null),u=function(e,t,n){let a=n.domain(),o=ke().domain(a).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(Ee(.5))(),l=ke().settings(e).domain(a)(),i=t().crossValue((e=>e.crossValue)).openValue((e=>e.openValue)).highValue((e=>e.highValue)).lowValue((e=>e.lowValue)).closeValue((e=>e.closeValue)).decorate(((e,t)=>{let r=(e=>e.closeValue>=e.openValue)(t)?n(t.key):o(t.key);e.fillStyle=r,e.strokeStyle=r})),s=r.seriesCanvasLine().mainValue((e=>e.bollinger.average)).crossValue((e=>e.crossValue)).decorate(((e,t)=>{e.strokeStyle=l(t[0].key)})),c=r.seriesCanvasArea().mainValue((e=>e.bollinger.upper)).baseValue((e=>e.bollinger.lower)).crossValue((e=>e.crossValue)).decorate(((e,t)=>{e.fillStyle=Ee(.25)(l(t[0].key))}));return r.seriesCanvasMulti().series([c,i,s])}(n,e,s),d=r.seriesCanvasMulti().mapping(((e,t)=>e[t])).series(l.map((()=>u))),_=rt().pad([.1,.1]).padUnit("percent"),g=K(n).settingName("crossValues").valueName("crossValue")(l),h=K(n).settingName("mainValues").valueNames(["lowValue","highValue"]).memoValue(n.axisMemo[1]).orient("vertical").paddingStrategy(_)(l),p=X(g,h).plotArea(nt(d,n).orient("vertical").canvas(!0));p.yNice&&p.yNice();let f=at().chart(p).settings(n).xScale(g.scale).onChange((e=>{let t=l.map((t=>t.filter((t=>t.crossValue>=e.xDomain[0]&&t.crossValue<=e.xDomain[1]))));p.yDomain(h.domainFunction(t))})).canvas(!0),b=wt().settings(n).xScale(g.scale).yScale(h.scale).yValueName("closeValue").color(s).data(l).canvas(!0);t.datum(l).call(f),t.call(b),t.call(c)}},Bt=Ft(r.seriesCanvasOhlc);Bt.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Yt=Bt,Ht=Ft(r.seriesCanvasCandlestick);Ht.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Wt=Ht;function qt(e,t){if(e.realValues.length>1&&null!==e.realValues[1]){let n=e.realValues[1];if("string"===e.mainValues.find((e=>e.name===n))?.type){return ve(e,t.map((e=>e.data)).filter((e=>e.height>0)).map((e=>Ut(e))).reduce(((e,t)=>e.concat(t))))}return Nt(e,null,null,(e=>{let t=e=>(t,n)=>void 0===t?n:void 0===n?t:e(t,n);return e.reduce(((e,n)=>[t(Math.min)(e[0],n[0]),t(Math.max)(e[1],n[1])]),[void 0,void 0])})(t.map((e=>e.extents))))}}function Ut(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((e=>t.concat(Ut(e,t)))):e.data.color&&t.push(e.data.color),t}function Kt(e){let t={},n=e.realValues.map((t=>null===t?null:e.mainValues.find((e=>e.name===t))));return e.data.forEach(((r,a)=>{let o=r.__ROW_PATH__;(function(e){let t=[];return Object.keys(e).forEach((e=>{if("__ROW_PATH__"!==e){let n=e.split("|").slice(0,-1).join("|");t.includes(n)||t.push(n)}})),t})(r).forEach((l=>{let i;t[l]||(t[l]=[]),i=t[l],o.forEach(((t,s)=>{let c=i.find((e=>e.name===t));if(c||(c={name:t,children:[]},i.push(c)),e.realValues.length>1&&null!==e.realValues[1]){let t=s===o.length-1,n=Gt(t?r:e.agg_paths[a][s+1]||r,e.mainValues[1],l);void 0!==n&&(c.color=n)}if(e.realValues.length>2&&null!==e.realValues[2]){c.tooltip=[];for(let t=2;t<e.realValues.length;++t)c.tooltip.push(Gt(r,n[t],l))}if(s===o.length-1)if(c.name=o.slice(-1)[0],0===e.crossValues.length)c.size=Gt(r,e.mainValues[0],"");else if(o.length===e.crossValues.length){let t=Gt(r,e.mainValues[0],l);c.size=t>0?t:0}i=c.children}))}))})),Object.entries(t).map((t=>{let n={name:"root",children:t[1]},r=a.bT9(n).sum((e=>e.size)),o=a.uKc().size([2*Math.PI,r.height+1])(r);return o.each((n=>{n.current=n,n.mainValues=1===e.realValues.length||null===e.realValues[1]&&null===e.realValues[2]?n.value:[n.value,n.data.color].concat(n.data.tooltip||[]).filter((e=>void 0!==e)),n.crossValue=n.ancestors().slice(0,-1).reverse().map((e=>e.data.name)),n.key=t[0],n.label=ie(e.crossValues[n.depth-1<0?0:n.depth-1]?.type||e.mainValues[0].type,n.data.name)})),{split:t[0],data:o,extents:Xt(e,t)}}))}var Gt=(e,t,n)=>n.length?e[`${n}|${t.name}`]:e[t.name];function Xt(e,t){let[n,r]=t;if(e.realValues.length>1&&null!==e.realValues[1]){return[Math.min(...e.data.map((t=>Gt(t,e.mainValues[1],n)))),Math.max(...r.map((e=>e.color)))]}}var Jt=e=>(0,a.Nb1)().startAngle((e=>e.x0)).endAngle((e=>e.x1)).padAngle((e=>Math.min((e.x1-e.x0)/2,.005))).padRadius(e).innerRadius((t=>Math.max(1,(t.y0-1)*e))).outerRadius((t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1))),Zt=e=>e.y0>=1&&e.x1>e.x0,Qt=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function en(e,t){let n=(e.x0+e.x1)/2*180/Math.PI;return`rotate(${n-90}) translate(${(e.y0-1+(e.y1-1))/2*t},0) rotate(${n<180?0:180})`}function tn(e,t){let n=this.getBBox().width;if(n>t){let r=e.label,o=(0,a.Ys)(this);for(;n>t;)r=r.substring(0,r.length-1),o.text((()=>r)),n=this.getBBox().width;o.text((()=>`${r.substring(0,r.length-3).replace(/\s+$/,"")}...`))}}var nn=(e,t,n,r,o,l,i,s,c)=>(u,d)=>{c.sunburstLevel[s]=u.data.name,u.parent?(n.datum(u.parent),n.style("cursor","pointer"),r.html(`&#8682; ${u.label}`)):(n.datum(e),n.style("cursor","default"),r.html("")),e.each((e=>e.target={x0:2*Math.max(0,Math.min(1,(e.x0-u.x0)/(u.x1-u.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(e.x1-u.x0)/(u.x1-u.x0)))*Math.PI,y0:Math.max(0,e.y0-u.depth),y1:Math.max(0,e.y1-u.depth)}));let _=t.transition().duration(d?0:750);o.transition(_).tween("data",(e=>{let t=(0,a.sXR)(e.current,e.target);return n=>e.current=t(n)})).filter((function(e){return+this.getAttribute("fill-opacity")||Zt(e.target)})).attr("fill-opacity",(e=>Zt(e.target)?1:0)).attr("user-select",(e=>Zt(e.target)?"initial":"none")).style("pointer-events",(e=>Zt(e.target)?"initial":"none")).attrTween("d",(e=>()=>Jt(i)(e.current))),l.filter((function(e){return+this.getAttribute("fill-opacity")||Qt(e.target)})).transition(_).attr("fill-opacity",(e=>+Qt(e.target))).attrTween("transform",(e=>()=>en(e.current,i)))};function rn(){let e=null,t=null,n=null,r=null,a=null,o=o=>{let l=o.selectAll("g.segment").data(n.descendants().slice(1)),i=l.enter().append("g").attr("class","segment");i.append("path"),i.append("text").attr("class","segment").attr("dy","0.35em");let s=i.merge(l),c=s.select("path").attr("fill-opacity",(e=>Zt(e.current)?1:0)).attr("user-select",(e=>Zt(e.current)?"initial":"none")).style("pointer-events",(e=>Zt(e.current)?"initial":"none")).attr("d",(e=>Jt(a)(e.current)));r&&c.style("fill",(e=>r(e.data.color)));let u=s.select("text").attr("fill-opacity",(e=>+Qt(e.current))).attr("transform",(e=>en(e.current,a))).text((e=>e.label)).each((function(e){tn.call(this,e,a)})),d=o.select("text.parent"),_=o.select("circle").attr("r",a).datum(n),g=nn(n,o,_,d,c,u,a,t,e);if(e.sunburstLevel){let r=n.descendants().find((n=>n.data.name===e.sunburstLevel[t]));r&&g(r,!0)}else e.sunburstLevel={};_.on("click",(e=>g(e,!1))),c.filter((e=>e.children)).style("cursor","pointer").on("click",(e=>g(e,!1)))};return o.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.split=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.radius=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function an(){let e="element-prefix-unset",t=null,n=null,r=null,a=null,o=null,l=l=>{let i=Z(l,"div.inner-container",(()=>l.append("div").attr("class","inner-container"))),s=i.node().getBoundingClientRect(),c=s.height,u=s.width-0,d=l.datum(),_=Math.max(1,Math.min(d.length,Math.floor(u/300))),g=Math.ceil(d.length/_);o={width:u/Math.max(_,1),height:Math.min(c,Math.max(c/g,u/Math.max(_,1)))},c/g>.75*o.height&&(o.height=c/g),d.length>1?(i.style("grid-template-columns",`repeat(${_}, ${100/_}%)`),i.style("grid-template-rows",`repeat(${g}, ${o.height}px)`)):(i.style("grid-template-columns","repeat(1, 100%)"),i.style("grid-template-rows","repeat(1, 100%)")),r=i.selectAll(`div.${e}-container`).data(d,(e=>e.split)),r.exit().remove(),n=r.enter().append("div").attr("class",`${e}-container`),a=n.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),t=n.append("svg").append("g").attr("class",e)};return l.elementsPrefix=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.chartContainer=()=>t,l.chartEnter=()=>n,l.chartDiv=()=>r,l.chartTitle=()=>a,l.containerSize=()=>o,l}function on(e,t){let n=Kt(t),r=qt(t,n),o=an().elementsPrefix("sunburst");if(e.datum(n).call(o),r){let n=t.realValues[1];if("string"===t.mainValues.find((e=>e.name===n))?.type){let n=Ue().settings(t).scale(r);e.call(n)}else{let t=Ot().scale(r);e.call(t)}}let l=o.chartContainer(),i=o.chartEnter(),s=o.chartDiv(),c=o.chartTitle(),u=o.containerSize();c.each(((e,t,n)=>(0,a.Ys)(n[t]).text(e.split))),l.append("circle").attr("fill","none").style("pointer-events","all"),l.append("text").attr("class","parent"),i.merge(s).select("svg").select("g.sunburst").attr("transform",`translate(${u.width/2}, ${u.height/2})`).each((function(e){let{split:n,data:o}=e,l=(0,a.Ys)(this),i=this.parentNode,{width:s,height:c}=i.getBoundingClientRect(),u=(Math.min(s,c)-24)/Math.max(2,2*t.crossValues.length);rn().settings(t).split(n).data(o).color(r).radius(u)(l),pe().settings(t)(l.selectAll("g.segment"))}))}on.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var ln=on;function sn(e,t){if(e.realValues.length<1||null===e.realValues[1]||void 0===e.realValues[1])return;let n=e.realValues[1],r=t.filter((e=>e.height>0)).map((e=>cn(e))).reduce(((e,t)=>e.concat(t)));if("string"===e.mainValues.find((e=>e.name===n))?.type)return ve(e,r);return Nt(e,null,null,[Math.min(...r),Math.max(...r)])}function cn(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((e=>t.concat(cn(e,t)))):e.data.color&&t.push(e.data.color),t}var un=e=>!(!e.target||!e.target.textAttributes),dn=(e,t,n)=>{e.selectAll("text").each((function(e,r){let a=yn(e,t,n);this.style=a}));let r=hn(e);fn(r),_n(r)},_n=e=>{let t=e=>e.getBoundingClientRect(),n=[];e.selectAll("text").filter(((e,t,n)=>(0,a.Ys)(n[t]).attr("style")===vn.high)).each(((e,t,r)=>n.push(r[t]))),e.selectAll("text").filter(((e,t,n)=>(0,a.Ys)(n[t]).attr("style")===vn.low)).each(((e,r,o)=>{let l=o[r];n.filter((e=>ee("x",t(e),t(l))&&ee("y",t(e),t(l),-2))).forEach((()=>(0,a.Ys)(l).attr("dy",Number((0,a.Ys)(l).attr("dy"))+14)))}))},gn={top:1,mid:.7,lower:0},hn=e=>e.filter(((e,t,n)=>(0,a.Ys)(n[t]).selectAll("text").attr("style")!==vn.zero)),pn=e=>e.selectAll("text").each(((e,t,n)=>mn(n[t]))),fn=e=>e.selectAll("text").each(((e,t,n)=>bn(n[t]))),bn=e=>{let t=(0,a.Ys)(e),n=e.getBoundingClientRect();t.attr("dx",0-n.width/2).attr("dy",0+n.height/4)},mn=e=>{let t=e.parentNode.childNodes[0],n=e.getBBox(),r=t.getBBox();wn(e,r,n)||(0,a.Ys)(e).attr("style",(0,a.Ys)(e).attr("style"))},wn=(e,t,n)=>{let r=Math.min(t.height/n.height,t.width/n.width);if(r<1){let t=parseInt((0,a.Ys)(e).style("font-size")),n=Math.floor(t*r);return t>7&&n>7?((0,a.Ys)(e).style("font-size",`${n}px`),bn(e)):((0,a.Ys)(e).style("font-size",null),(0,a.Ys)(e).style("opacity","0")),!0}return!1},yn=(e,t,n)=>{if(!n.filter((e=>""!==e)).every((t=>e.crossValue.includes(t))))return vn.zero;switch(e.depth){case t+1:return vn.high;case t+2:return vn.low;default:return vn.zero}},vn={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"},xn=(e,t)=>{let n=a.pNI().size([e,t]).paddingInner((e=>1+2*(e.height-1)));return n.tile(a.wLP),n};function kn(e,t,n,r,o,l){(function(e,t,n,r,a){let o={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},l={width:a.x1-a.x0,height:a.y1-a.y0},i={width:l.width/o.width,height:l.height/o.height};n.each((e=>{let n=(e.x0-o.x)*i.width,a=(e.y0-o.y)*i.height,l=On(e)*i.width,s=Rn(e)*i.height,c=((e,t)=>t.every((t=>e.crossValue.includes(t))))(e,t)&&e.data.name!==t[r-1];e.mapLevel[r]={x0:n,x1:l+n,y0:a,y1:s+a,visible:c,opacity:c?1:0}})),e.mapLevel[r].levelRoot=!0})(e,t,n,r,o),e.mapLevel[r].levelRoot=!0,function(e,t,n,r){let o=xn(t,n)((0,a.bT9)(e.data).sum((e=>e.size))).descendants(),l=e.descendants();o.forEach(((e,t)=>{l[t].mapLevel[r].x0=o[t].x0,l[t].mapLevel[r].x1=o[t].x1,l[t].mapLevel[r].y0=o[t].y0,l[t].mapLevel[r].y1=o[t].y1}))}(e,l.node().getBoundingClientRect().width,l.node().getBoundingClientRect().height,r),Vn(n,r)}var Sn=(e,t)=>{e.each(((e,n,r)=>{let o=(0,a.Ys)(r[n]).selectAll("text");e.mapLevel[t].textAttributes={dx:o.attr("dx"),dy:o.attr("dy"),class:o.attr("class"),"font-size":o.style("font-size")}}))};function Vn(e,t){e.selectAll("text").each(((e,n,r)=>{let o=(0,a.Ys)(r[n]),l=(0,a.Ys)(r[n]).datum(),i=o.attr("class");l.mapLevel[t].textLockedAt={opacity:gn[i]}}))}function En(e,t,n,r,a,o,l,i,s,c){if(!e.children)return;a.treemapLevel<e.depth?a.treemapRoute.push(e.crossValue):a.treemapRoute.pop(),a.treemapLevel=e.depth;let u=e.crossValue;(!e.mapLevel[a.treemapLevel]||!e.mapLevel[a.treemapLevel].levelRoot)&&kn(e,u,n,a.treemapLevel,i,o),An(e,t,n,r,a,o,l,i,a.treemapLevel,u,s,c)}function An(e,t,n,r,o,l,i,s,c,u,d,_,g,h){void 0===g&&(g=500),void 0===h&&(h=!0);let p=e.parent,f=i.transition("main transition").duration(g).ease(a.oSY);n.each((e=>e.target=e.mapLevel[c])),un(e)||Cn(n,d),n.transition(f).tween("data",(e=>{let t=a.sXR(e.current,e.target);return n=>e.current=t(n)})).styleTween("opacity",(e=>()=>e.current.opacity)).attrTween("pointer-events",(e=>()=>e.target.visible?"all":"none")),t.transition(f).filter((e=>e.target.visible)).styleTween("x",(e=>()=>`${e.current.x0}px`)).styleTween("y",(e=>()=>`${e.current.y0}px`)).styleTween("width",(e=>()=>e.current.x1-e.current.x0+"px")).styleTween("height",(e=>()=>e.current.y1-e.current.y0+"px")),r.transition(f).filter((e=>e.target.visible)).attrTween("x",(e=>()=>e.current.x0+On(e.current)/2)).attrTween("y",(e=>()=>e.current.y0+Rn(e.current)/2)).end().catch((()=>Mn(n))).then((()=>{un(e)||(_n(b),pn(b),async function(e,t,n){void 0===n&&(n=400);let r=t.transition("text fade transition").duration(n).ease(a.oSY);await e.transition(r).filter((e=>e.target.visible)).tween("data",((e,t,n)=>{let r=n[t],o=a.sXR(Ln(e),Tn(r));return t=>e.current.opacity=o(t)})).styleTween("opacity",(e=>()=>e.current.opacity)).end().catch((e=>console.error("Exception in text fade transition",e))).then((()=>e.each(((e,t,n)=>(e=>(0,a.Ys)(e).style("opacity",null))(n[t])))))}(r,i,g),h&&Sn(n,c),Mn(n,d,p))})).catch((e=>{console.error("Exception completing promises after main transition",e),Mn(n,d,p)})),un(e)?(e=>{e.each(((e,t,n)=>{(0,a.Ys)(n[t]).selectAll("text").attr("dx",e.target.textAttributes.dx).attr("dy",e.target.textAttributes.dy).attr("style",e.target.textAttributes.style)}))})(n):(r.each(((e,t,n)=>(e=>(0,a.Ys)(e).style("opacity",gn[(0,a.Ys)(e).attr("class")]))(n[t]))),dn(n,c,u));let b=hn(n);p?d.hide(!1).text(e.label).onClick((()=>{En(p,t,n,r,o,l,i,s,d,_);let e=l.node().getRootNode().host.parentElement;he(e,p,_)}))():d.hide(!0)()}var Ln=e=>e.target.textLockedAt.opacity,Tn=e=>gn[a.Ys(e).attr("class")],Cn=(e,t)=>{t.deactivate(!0),e.each(((e,t,n)=>{a.Ys(n[t]).selectAll("rect").style("pointer-events","none")}))},Mn=(e,t)=>{t&&t.deactivate(!1),e.each(((e,t,n)=>{a.Ys(n[t]).selectAll("rect").style("pointer-events",null)}))};var Nn="leafnode",zn="branchnode",Pn="rootnode",On=e=>e.x1-e.x0,Rn=e=>e.y1-e.y0,$n=(e,t)=>0===t.depth?Pn:((e,t)=>t.depth===e)(e,t)?Nn:zn;function jn(){let e=null,t=null,n=null,r=null,a=null,o=null,l=l=>{o=function(e){let t=null,n=null,r=!0,a=!1,o=Z(e,".parent-controls",(()=>e.append("div").attr("class","parent-controls").style("display",r?"none":"").html('<button id="goto-parent">Goto parent</button>\n'))),l=()=>{o.style("display",r?"none":"").select("#goto-parent").style("pointer-events",a?"none":null).html(`\u21ea ${n}`).on("click",(()=>t()))};return l.deactivate=function(){if(!arguments.length)return a;a=arguments.length<=0?void 0:arguments[0];let e=o.select("#goto-parent");return a?e.style("pointer-events","none"):e.style("pointer-events",null),l},l.hide=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.text=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.onClick=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l}(a),o();let i=n.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),xn(a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height)(n);let s=l.selectAll("g").data(n.descendants()),c=s.enter().append("g");c.append("rect"),c.append("text");let u=c.merge(s).sort(((e,t)=>t.depth-e.depth)),d=u.select("rect").attr("class",(e=>`treerect ${$n(i,e)}`)).style("x",(e=>e.x0)).style("y",(e=>e.y0)).style("width",(e=>On(e))).style("height",(e=>Rn(e)));d.style("fill",(e=>$n(i,e)===Nn?e.data.color?r(e.data.color):t.colorStyles.series:"transparent"));let _=u.filter((e=>0!==e.value)).select("text").attr("x",(e=>e.x0+On(e)/2)).attr("y",(e=>e.y0+Rn(e)/2)).text((e=>e.label)),g=d.filter((e=>0===e.crossValue.length)).datum();(function(e,t){e.each((e=>{e.mapLevel=[],e.mapLevel[0]={x0:e.x0,x1:On(e)+e.x0,y0:e.y0,y1:Rn(e)+e.y0,visible:!0,opacity:1}})),t.mapLevel[0].levelRoot=!0,Vn(e,0)})(u,g),dn(u,0,[]),pn(hn(u)),Sn(u,0),0===e.treemapRoute.length&&e.treemapRoute.push(g.crossValue),d.filter((e=>e.children)).on("click",((n,r)=>En(r,d,u,_,e,a,l,g,o,t))),function(e,t,n,r,a,o,l,i,s){if(r.treemapLevel>0){let c=l.crossValue;An(l,e,t,n,r,a,o,l,0,c,i,s,1,!1),r.treemapRoute.slice(1,r.treemapRoute.length).forEach((c=>{let u=t.filter((e=>e.crossValue===c)).datum(),d=u.crossValue;kn(u,d,t,u.depth,l,a),An(u,e,t,n,r,a,o,l,u.depth,d,i,s,1,!1)}))}}(d,u,_,e,a,l,g,o,t)};return l.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],l):e},l.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.container=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l}function Dn(e,t){t.treemaps||(t.treemaps={});let n=Kt(t),r=sn(t,n.map((e=>e.data)));r&&this._container.classList.add("has-legend");let o=an().elementsPrefix("treemap");if(e.datum(n).call(o),r){let n=t.realValues[1];if("string"===t.mainValues.find((e=>e.name===n))?.type){let n=Ue().settings(t).scale(r);e.call(n)}else{let t=Ot().scale(r);e.call(t)}}let l=o.chartEnter(),i=o.chartDiv();o.chartTitle().each(((e,t,n)=>a.Ys(n[t]).text(e.split))),l.merge(i).select("svg").select("g.treemap").each((function(e){let{split:n,data:o}=e,l=a.Ys(this);t.treemaps[n]||(t.treemaps[n]={}),jn().settings(t.treemaps[n],t).data(o).container(a.Ys(a.Ys(this.parentNode).node().parentNode)).color(r)(l),pe().settings(t).centered(!0)(l.selectAll("g"))}))}Dn.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:3e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var In=[lt,pt,vt,Et,Lt,Ct,$t,Yt,Wt,Dn,ln,Dt],Fn=(e,t)=>{if(!t.colorStyles){let n={scheme:[],gradient:{},interpolator:{},grid:{}},r=Hn(e);n.series=r("--d3fc-local-series");for(let e=1;;e++){let t=`series-${e}`,a=r(`--d3fc-local-${t}`);if(!a)break;n[t]=a,n.scheme.push(a)}n.opacity=Bn(n.series),n.grid.gridLineColor=r`--d3fc-gridline--color`,["full","positive","negative"].forEach((e=>{let t=r(`--d3fc-local-${e}--gradient`);n.gradient[e]=Wn(t,n.opacity)})),t.colorStyles=n}if(!t.textStyles){let n=window.getComputedStyle(e),r=n.getPropertyValue("color"),a=`12px ${n.getPropertyValue("font-family")}`;t.textStyles={color:r,font:a}}},Bn=e=>a.$_Y(e).opacity,Yn=(e,t)=>{let n=a.$_Y(`#${e}`);return n.opacity=t,n+""},Hn=e=>{let t=getComputedStyle(e);return e=>t?.getPropertyValue(e)},Wn=(e,t)=>{let n=s.Q(e)[0].colorStops;return n.map(((e,r)=>[e.length?e.length.value/100:r/(n.length-1),Yn(e.value,t)])).sort(((e,t)=>e[0]-t[0]))},qn={initial:{type:"number",count:1},selectMode:"select"},Un=`:host .chart{--d3fc-local-full--gradient:var(--d3fc-full--gradient,linear-gradient(#4d342f 0%,#e4521b 22.5%,#feeb65 42.5%,#f0f0f0 50%,#dcedc8 57.5%,#42b3d5 67.5%,#1a237e 100%));--d3fc-local-positive--gradient:var(--d3fc-positive--gradient,linear-gradient(#dcedc8 0%,#42b3d5 35%,#1a237e 100%));--d3fc-local-negative--gradient:var(--d3fc-negative--gradient,linear-gradient(#feeb65 100%,#e4521b 70%,#4d342f 0%));--d3fc-local-series:var(--d3fc-series,rgba(31,119,180,0.5));--d3fc-local-series-1:var(--d3fc-series-1,#0366d6);--d3fc-local-series-2:var(--d3fc-series-2,#ff7f0e);--d3fc-local-series-3:var(--d3fc-series-3,#2ca02c);--d3fc-local-series-4:var(--d3fc-series-4,#d62728);--d3fc-local-series-5:var(--d3fc-series-5,#9467bd);--d3fc-local-series-6:var(--d3fc-series-6,#8c564b);--d3fc-local-series-7:var(--d3fc-series-7,#e377c2);--d3fc-local-series-8:var(--d3fc-series-8,#7f7f7f);--d3fc-local-series-9:var(--d3fc-series-9,#bcbd22);--d3fc-local-series-10:var(--d3fc-series-10,#17becf);}:host .chart .series{fill:var(--d3fc-local-series);}:host .chart .series-1{fill:var(--d3fc-local-series-1);}:host .chart .series-2{fill:var(--d3fc-local-series-2);}:host .chart .series-3{fill:var(--d3fc-local-series-3);}:host .chart .series-4{fill:var(--d3fc-local-series-4);}:host .chart .series-5{fill:var(--d3fc-local-series-5);}:host .chart .series-6{fill:var(--d3fc-local-series-6);}:host .chart .series-7{fill:var(--d3fc-local-series-7);}:host .chart .series-8{fill:var(--d3fc-local-series-8);}:host .chart .series-9{fill:var(--d3fc-local-series-9);}:host .chart .series-10{fill:var(--d3fc-local-series-10);}:host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover="true"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover="true"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}${function(){let e=document.querySelector("head").querySelectorAll("style"),t=[];return e.forEach((e=>{-1!==e.innerText.indexOf("d3fc-")&&t.push(e.innerText)})),t.join("")}()}`,Kn=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps","axisMemo"];function Gn(e){customElements.get("perspective-viewer").registerPlugin(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=new Set(t.length>0?t:In.map((e=>e.plugin.name))),In.forEach((e=>{if(t.has(e.plugin.name)){let t=e.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,""),n=`perspective-viewer-d3fc-${t}`;customElements.define(n,class extends HTMLElement{constructor(){super(),this._chart=null,this._settings=null,this.render_warning=!0}connectedCallback(){this._initialized||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${Un}</style>`,this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0)}get name(){return e.plugin.name}get category(){return e.plugin.category}get select_mode(){return e.plugin.selectMode||"select"}get min_config_columns(){return e.plugin.initial?.count||qn.initial.count}get config_column_names(){return e.plugin.initial?.names||qn.initial.names}get max_cells(){return e.plugin.max_cells||4e3}set max_cells(t){e.plugin.max_cells=t}get max_columns(){return e.plugin.max_columns||50}set max_columns(t){e.plugin.max_columns=t}async render(){var e=document.createElement("canvas"),t=this.shadowRoot.querySelector("#container");e.width=t.offsetWidth,e.height=t.offsetHeight;let n=e.getContext("2d");n.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",n.fillRect(0,0,e.width,e.height);let r=window.getComputedStyle(this).getPropertyValue("color"),a=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let s of a.reverse()){var o=document.createElement("img");o.width=s.parentNode.offsetWidth,o.height=s.parentNode.offsetHeight;let e=s.cloneNode(!0);e.hasAttribute("viewBox")||e.setAttribute("viewBox",`0 0 ${o.width} ${o.height}`),e.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let n of e.querySelectorAll("text"))n.setAttribute("fill",r);var l=(new XMLSerializer).serializeToString(e);l=l.replace(/[^\x00-\x7F]/g,"");let t=new Promise(((e,t)=>{o.onload=e,o.onerror=t}));try{o.src=`data:image/svg+xml;base64,${btoa(l)}`,await t}catch{let e=new Promise(((e,t)=>{o.onload=e,o.onerror=t}));o.src=`data:image/svg+xml;utf8,${l}`,await e}n.drawImage(o,s.parentNode.offsetLeft,s.parentNode.offsetTop,o.width,o.height)}let i=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let s of i.reverse())n.drawImage(s,s.parentNode.offsetLeft,s.parentNode.offsetTop,s.width/window.devicePixelRatio,s.height/window.devicePixelRatio);return await new Promise((t=>e.toBlob((e=>t(e)))),"image/png")}async draw(e,t,n){null!==this.offsetParent?(this._staged_view=void 0,this._settings&&(this._settings.axisMemo=[[1/0,-1/0],[1/0,-1/0]]),await this.update(e,t,n,!0)):this._staged_view=[e,t,n]}async update(t,n,r,a){if(void 0===a&&(a=!1),null===this.offsetParent)return;let o,l,i=this.parentElement,s="Sunburst"!==e.plugin.name;o=n&&r?t.to_json({end_row:r,end_col:n,leaves_only:s}):n?t.to_json({end_col:n,leaves_only:s}):r?t.to_json({end_row:r,leaves_only:s}):t.to_json({leaves_only:s}),l=await Promise.all([i.save(),i.getTable().then((e=>e.schema(!1))),t.expression_schema(!1),t.schema(!1),o,t.get_config()]);let[c,u,d,_,g,h]=l;this.config=c;let p=this.config.columns,f=function(e){let t=u[e];return t||(t=d[e]),t},{columns:b,group_by:m,split_by:w,filter:y}=h,v=m.length>0?g.reduce(((e,t)=>{if(t.__ROW_PATH__&&t.__ROW_PATH__.length==m.length)e.agg_paths.push(e.aggs.slice()),e.rows.push(t);else{let n=t.__ROW_PATH__.filter((e=>void 0!==e)).length;e.aggs[n]=t,e.aggs=e.aggs.slice(0,n+1)}return e}),{rows:[],aggs:[],agg_paths:[]}):{rows:g},x=v.rows.map(((e,t)=>m.length?e:{...e,__ROW_PATH__:[t]})),k={realValues:p,crossValues:m.map((e=>({name:e,type:f(e)}))),mainValues:b.map((e=>({name:e,type:_[e]}))),splitValues:w.map((e=>({name:e,type:f(e)}))),filter:y,data:x,agg_paths:v.agg_paths};this._chart=e;let S={set:(e,t,n)=>(Kn.includes(t)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),e[t]=n,!0)};this._settings=new Proxy({axisMemo:[[1/0,-1/0],[1/0,-1/0]],...this._settings,...k},S),this._settings.splitMainValues&&this._settings.splitMainValues.length>=b.length&&(this._settings.splitMainValues=[]),Fn(this._container,this._settings),a&&(this._container.innerHTML=""),this._draw(),await new Promise((e=>requestAnimationFrame(e)))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(null!==this.offsetParent){let e=a.Ys(this._container),n=`chart ${t}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(e.attr("class",n),this._settings):e.attr("class",`${n} disabled`)}}async resize(e){if(null!==this.offsetParent)if(void 0!==this._settings?.data)this._draw();else{let[e,t,n]=this._staged_view;this._staged_view=void 0,this.draw(e,t,n)}}async restyle(){let e=this._settings;e&&(delete e.colorStyles,delete e.textStyles,await this.draw(...arguments))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let e={...this._settings};return Kn.forEach((t=>{delete e[t]})),e}restore(e){let t={};for(let n of Kn)void 0!==this._settings?.[n]&&(t[n]=this._settings?.[n]);this._settings={...t,...e}}}),customElements.whenDefined("perspective-viewer").then((()=>Gn(n)))}}))}()},8049:function(e,t,n){n(837);var r=n(6558),a=n.n(r),o={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}};function l(e){const t={};if(c().types[e]&&Object.assign(t,c().types[e]),t.type){const e=l(t.type);return Object.assign(e,t),e}return t}function i(e){return e&&"object"==typeof e&&!Array.isArray(e)}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const a=n.shift();if(i(e)&&i(a))for(const o in a)i(a[o])?(e[o]||Object.assign(e,{[o]:{}}),s(e[o],a[o])):Object.assign(e,{[o]:a[o]});return s(e,...n)}function c(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=s(o,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}function u(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function d(e){let t=e._view_cache.config.row_pivots.length-1,n=Array.from(e.children[0].children[0].children);if(n.length>0){let[r]=n.splice(n.length-1,1);for(let n of r?.children){let r=e.getMeta(n),a=r.column_header?.[r.column_header?.length-1],o=this._config.sort.find((e=>e[0]===a)),l=r.row_header_x===t,i=typeof r.x>"u";l=l||(r.x+1)%this._config.columns.length==0,n.classList.toggle("psp-header-border",l),n.classList.toggle("psp-header-group",!1),n.classList.toggle("psp-header-leaf",!0),n.classList.toggle("psp-is-top",!1),n.classList.toggle("psp-header-corner",i),n.classList.toggle("psp-header-sort-asc",!!o&&"asc"===o[1]),n.classList.toggle("psp-header-sort-desc",!!o&&"desc"===o[1]),n.classList.toggle("psp-header-sort-col-asc",!!o&&"col asc"===o[1]),n.classList.toggle("psp-header-sort-col-desc",!!o&&"col desc"===o[1]);let s=u.call(this,r),c="integer"===s||"float"===s,d="string"===s,_="date"===s,g="datetime"===s;n.classList.toggle("psp-align-right",c),n.classList.toggle("psp-align-left",!c),n.classList.toggle("psp-menu-open",this._open_column_styles_menu[0]===r._virtual_x),n.classList.toggle("psp-menu-enabled",(d||c||_||g)&&!i),n.classList.toggle("psp-is-width-override",void 0!==e._column_sizes?.override[r.size_key])}}}function _(e){let t=e._view_cache.config.row_pivots.length-1,n=Array.from(e.children[0].children[0].children),r=[],a=new Set,o=e.children[0];for(let l=0;l<n.length;l++){let n=o.rows[l],i=new Set;for(let o=0;o<n.cells.length;o++){let s=n.cells[o];s.style.backgroundColor="";let c=e.getMeta(s),u=c.row_header_x===t||c.x>=0;s.classList.toggle("psp-align-right",!1),s.classList.toggle("psp-align-left",!1),s.classList.toggle("psp-header-group",!0),s.classList.toggle("psp-header-leaf",!1),s.classList.toggle("psp-header-border",u),s.classList.toggle("psp-header-group-corner",typeof c.x>"u"),s.classList.toggle("psp-color-mode-bar",!1),s.classList.toggle("psp-header-sort-asc",!1),s.classList.toggle("psp-header-sort-desc",!1),s.classList.toggle("psp-header-sort-col-asc",!1),s.classList.toggle("psp-header-sort-col-desc",!1);let d,_,g=n.cells[o],h=o;for(;r[l]&&r[l][h];++h);for(i.add(h),d=h;d<h+g.colSpan;++d)for(_=l;_<l+g.rowSpan;++_)r[_]||(r[_]=[]),r[_][d]=!0;g.classList.toggle("psp-is-top",0===l||!a.has(d))}a=i}}var g=Symbol("Plugin Symbol");function h(e,t,n,r){let[,,,,,a,o]=n,[,,,,,l,i]=r,s=this._ids?.[e.dy]?.join("|"),c=e.column_header.join("|");if(this.last_reverse_columns?.has(c)&&this.last_reverse_ids?.has(s)){let n=this.last_reverse_ids?.get(s),r=this.last_reverse_columns.get(c);this._is_old_viewport?this.last_meta?.[r]?.[n]>e.user?(t.style.setProperty("--pulse--background-color-start",l),t.style.setProperty("--pulse--background-color-end",i),"pulse_neg"===t.style.animationName?t.style.animation="pulse_neg2 0.5s linear":t.style.animation="pulse_neg 0.5s linear"):this.last_meta?.[r]?.[n]<e.user?(t.style.setProperty("--pulse--background-color-start",a),t.style.setProperty("--pulse--background-color-end",o),"pulse_pos"===t.style.animationName?t.style.animation="pulse_pos2 0.5s linear":t.style.animation="pulse_pos 0.5s linear"):n!==e.dy&&(t.style.animation=""):t.style.animation=""}else t.style.animation=""}function p(e,t){return a().mix(e,`rgb(${t[0]},${t[1]},${t[2]})`,.5).hex()}function f(e,t){let[n,r,a,o]=e;function l(e,n){return 255*((1-o)*(t[e]/255)+o*(n/255))}return void 0===t&&(t=[255,255,255]),[l(0,n),l(1,r),l(2,a)]}function b(e){let[t,n,r]=e;return Math.sqrt(t*t*.299+n*n*.587+r*r*.114)>130?"#161616":"#ffffff"}function m(e){let t=a()(e),n=function(e){let[t,n,r]=e.rgb(),[a,o,l]=e.set("hsl.h",(e.get("hsl.h")-15)%360).rgb(),[i,s,c]=e.set("hsl.h",(e.get("hsl.h")+15)%360).rgb();return`linear-gradient(to right top,rgb(${a},${o},${l}),rgb(${t},${n},${r}) 50%,rgb(${i},${s},${c}))`}(t),r=t.rgb();return[e,...r,n,`rgba(${r[0]},${r[1]},${r[2]},1)`,`rgba(${r[0]},${r[1]},${r[2]},0)`]}function w(e,t,n){let r,a,o=n.user>0,l=n.user<0;r=void 0!==e?.pos_bg_color?e.pos_bg_color:this._pos_bg_color,a=void 0!==e?.neg_bg_color?e.neg_bg_color:this._neg_bg_color;let i=o?r:l?a:["",...this._plugin_background,""];{let[o,l,s,c,u]=i;if(t.style.position="","color"===e?.number_bg_mode)t.style.animation="",t.style.backgroundColor=o;else if("gradient"===e?.number_bg_mode){let r=Math.max(0,Math.min(1,Math.abs(n.user/e.bg_gradient))),a=b(f([l,s,c,r],this._plugin_background));t.style.animation="",t.style.color=a,t.style.backgroundColor=`rgba(${l},${s},${c},${r})`}else"pulse"===e?.number_bg_mode?(h.call(this,n,t,r,a),t.style.backgroundColor=""):("disabled"===e?.number_bg_mode||e?.number_bg_mode,t.style.animation="",t.style.backgroundColor="")}let[s,c,u,d,_]=(()=>void 0!==e?.pos_fg_color?o?e.pos_fg_color:l?e.neg_fg_color:["",...this._plugin_background,""]:o?this._pos_fg_color:l?this._neg_fg_color:["",...this._plugin_background,""])();if("disabled"===e?.number_fg_mode)if("color"===e?.number_bg_mode){let e=this._plugin_background,n=b(f([i[1],i[2],i[3],1],e));t.style.color=n}else"gradient"===e?.number_bg_mode||(t.style.color="");else"bar"===e?.number_fg_mode?(t.style.color="",t.style.position="relative",""!==_&&t.children.length>0&&t.children[0].nodeType===Node.ELEMENT_NODE&&(t.children[0].style.background=_)):("color"===e?.number_fg_mode||!e?.number_fg_mode)&&(t.style.color=s)}function y(e,t,n){let r=n.column_header?.[n.column_header?.length-1],[o,l,i,s,c]=(()=>void 0!==e?.color?e.color:this._color)();if("foreground"===e?.string_color_mode&&null!==n.user)t.style.color=o,t.style.backgroundColor="","link"===e?.format&&(t.children[0].style.color=o);else if("background"===e?.string_color_mode&&null!==n.user){let e=b(f([l,i,s,1],this._plugin_background));t.style.color=e,t.style.backgroundColor=o}else if("series"===e?.string_color_mode&&null!==n.user){this._series_color_map.has(r)||(this._series_color_map.set(r,new Map),this._series_color_seed.set(r,0));let e=this._series_color_map.get(r);if(!e.has(n.user)){let t=this._series_color_seed.get(r);e.set(n.user,t),this._series_color_seed.set(r,t+1)}let l=e.get(n.user),[i,s,c]=a()(o).hsl();i+=150*l%360;let u=a()(i,s,c,"hsl"),[d,_,g]=u.rgb(),h=u.hex(),p=b(f([d,_,g,1],this._plugin_background));t.style.color=p,t.style.backgroundColor=h}else t.style.backgroundColor="",t.style.color=""}function v(e,t,n){n.column_header?.[n.column_header?.length-1];let[r,a,o,l,i]=(()=>void 0!==e?.color?e.color:this._color)();if("foreground"===e?.datetime_color_mode&&null!==n.user)t.style.color=r,t.style.backgroundColor="";else if("background"===e?.datetime_color_mode&&null!==n.user){let e=b(f([a,o,l,1],this._plugin_background));t.style.color=e,t.style.backgroundColor=r}else t.style.backgroundColor="",t.style.color=""}function x(e,t,n){let[r]=!0===n.user?this._pos_fg_color:!1===n.user?this._neg_fg_color:["",0,0,0,""];t.style.backgroundColor="",t.style.color=r}function k(e,t,n){let r=null!=typeof n.value&&null!=typeof n.value&&n.value?.toString()?.trim().length>0,a=n.row_header_x>=this._config.group_by.length,o=e.getMeta({dx:0,dy:n.y-n.y0+1}),l=o&&o.row_header&&typeof o.row_header[n.row_header_x+1]<"u";t.classList.toggle("psp-tree-label",r&&!a),t.classList.toggle("psp-tree-label-expand",r&&!a&&!l),t.classList.toggle("psp-tree-label-collapse",r&&!a&&l),t.classList.toggle("psp-tree-leaf",r&&a)}function S(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function V(e){let t=e[g]||{};for(let n of e.children[0].children[1].children)for(let r of n.children){let n=e.getMeta(r),a=n.column_header?.[n.column_header?.length-1],o=S.call(this,n),l=t[a],i="integer"===o||"float"===o;i?w.call(this,l,r,n):"boolean"===o?x.call(this,l,r,n):"string"===o?y.call(this,l,r,n):"date"===o||"datetime"===o?v.call(this,l,r,n):(r.style.backgroundColor="",r.style.color=""),r.classList.toggle("psp-bool-type","boolean"===o&&null!==n.user);let s="TH"===r.tagName;s&&k.call(this,e,r,n),r.classList.toggle("psp-align-right",!s&&i),r.classList.toggle("psp-align-left",s||!i),r.classList.toggle("psp-color-mode-bar","bar"===l?.number_fg_mode&&i)}}async function E(e,t,n){let r=e.getMeta(n),a=r.column_header[r.column_header.length-1],o=(t.shiftKey?A:L).call(this,a);this._preserve_focus_state=!0,await e.parentElement.parentElement.restore({sort:o})}function A(e){let t=[],n=!1;for(let r of this._config.sort){let[a,o]=r;if(a===e){n=!0;let r=T.call(this,e,o);r&&t.push(r)}else t.push(r)}return n||t.push([e,"desc"]),t}function L(e){for(let[t,n]of this._config.sort)if(t===e){let t=T.call(this,e,n);return t?[t]:[]}return[[e,"desc"]]}function T(e,t){let n=this._config.split_by.length>0?M:C,r=t?n[t]:"desc";if(r)return[e,r]}var C={desc:"asc",asc:void 0},M={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0};function N(e,t,n){let r,a=e.getMeta(t),o=a.column_header[a.column_header.length-1],l=this._schema[o],i="integer"===l||"float"===l,s=document.createElement(`perspective-${{float:"number",integer:"number",string:"string",date:"date",datetime:"datetime"}[l]}-column-style`);if(r=i?{fg_gradient:n,pos_fg_color:this._pos_fg_color[0],neg_fg_color:this._neg_fg_color[0],number_fg_mode:"color",bg_gradient:n,pos_bg_color:this._pos_bg_color[0],neg_bg_color:this._neg_bg_color[0],number_bg_mode:"disabled"}:{color:this._color[0],bg_color:this._color[0]},"string"!==l&&"date"!==l&&"datetime"!==l)if("float"===l)r.fixed=2;else{if("integer"!==l)return this._open_column_styles_menu.pop(),void t.classList.remove("psp-menu-open");r.fixed=0}let c=()=>s.blur(),u=t=>{let n=t.detail;n.pos_fg_color&&(n.pos_fg_color=m(n.pos_fg_color),n.neg_fg_color=m(n.neg_fg_color)),n.pos_bg_color&&(n.pos_bg_color=m(n.pos_bg_color),n.neg_bg_color=m(n.neg_bg_color)),n.color&&(n.color=m(n.color)),n.bg_color&&(n.bg_color=m(n.bg_color)),e[g]=e[g]||{},e[g][o]=n,e.draw({preserve_width:!0}),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update"))},d=async()=>{e.removeEventListener("regular-table-scroll",c),s.removeEventListener("perspective-column-style-change",u),s.removeEventListener("blur",d),this._open_column_styles_menu.pop(),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update")),t.classList.remove("psp-menu-open"),s.destroy()};s.addEventListener("perspective-column-style-change",u),s.addEventListener("blur",d),e.addEventListener("regular-table-scroll",c);let _=e[g]||{},h=Object.assign({},_[o]=_[o]||{});(h.pos_fg_color||h.pos_bg_color)&&(h.pos_fg_color=h.pos_fg_color?.[0],h.neg_fg_color=h.neg_fg_color?.[0],h.pos_bg_color=h.pos_bg_color?.[0],h.neg_bg_color=h.neg_bg_color?.[0]),h.color&&(h.color=h.color[0]),h.bg_color&&(h.bg_color=h.bg_color[0]),s.open(t,h,r)}async function z(e,t){let n=e.getMeta(t.target),r=t.target.classList.contains("psp-tree-label-collapse");t.shiftKey&&r?this._view.set_depth(n.row_header.filter((e=>void 0!==e)).length-2):t.shiftKey?this._view.set_depth(n.row_header.filter((e=>void 0!==e)).length-1):r?this._view.collapse(n.y):this._view.expand(n.y),this._num_rows=await this._view.num_rows(),this._num_columns=await this._view.num_columns(),e.draw()}async function P(e,t){if(1!==t.which)return;let n=t.target;if("A"===n.tagName)return;for(;"TD"!==n.tagName&&"TH"!==n.tagName;)if(n=n.parentElement,!e.contains(n))return;if(n.classList.contains("psp-tree-label"))return z.call(this,e,t),void t.stopImmediatePropagation();let r=n.getBoundingClientRect();if(n.classList.contains("psp-menu-enabled")&&t.clientY-r.top>16){n.classList.add("psp-menu-open");let r=e.getMeta(n),a=r.column_header?.[r.column_header?.length-1],o=this._schema[a];if(this._open_column_styles_menu.unshift(r._virtual_x),"string"===o||"date"===o||"datetime"===o)N.call(this,e,n);else{let[t,r]=await this._view.get_min_max(a),o=Math.max(Math.abs(t),Math.abs(r));o>1&&(o=Math.round(100*o)/100),N.call(this,e,n,o)}t.preventDefault(),t.stopImmediatePropagation()}else n.classList.contains("psp-header-leaf")&&!n.classList.contains("psp-header-corner")&&(E.call(this,e,t,n),t.stopImmediatePropagation())}function O(e,t){if(1!==t.which)return;let n=t.target;for(;"TD"!==n.tagName&&"TH"!==n.tagName;)if(n=n.parentElement,!e.contains(n))return;(n.classList.contains("psp-tree-label")&&t.offsetX<26||n.classList.contains("psp-header-leaf")&&!n.classList.contains("psp-header-corner"))&&t.stopImmediatePropagation()}function R(e,t){void 0===t&&(t=!1);let n=0===this._config.group_by.length&&0===this._config.split_by.length,r=e.hasAttribute("selectable"),a=t||!!e.children[0]._is_edit_mode;return n&&!r&&a}function $(e,t){let n=e[g]||{},r=R.call(this,t);e.parentElement.classList.toggle("edit-mode-allowed",R.call(this,t,!0));for(let a of e.querySelectorAll("td")){let t=e.getMeta(a),o=this.get_psp_type(t);if(r&&this._is_editable[t.x]){let e=t.column_header[t.column_header.length-1];"string"===o&&"link"===n[e]?.format?(a.toggleAttribute("contenteditable",!1),a.classList.toggle("boolean-editable",!1)):"boolean"===o?(a.toggleAttribute("contenteditable",!1),a.classList.toggle("boolean-editable",null!==t.user)):(r!==a.hasAttribute("contenteditable")&&a.toggleAttribute("contenteditable",r),a.classList.toggle("boolean-editable",!1))}else a.toggleAttribute("contenteditable",!1),a.classList.toggle("boolean-editable",!1)}}var j=(e,t,n)=>{let r=e.querySelectorAll("td"),a=n.get(e);if(a){for(let t of r){let n=e.getMeta(t);if(n.x===a.x&&n.y===a.y)return document.activeElement!==t&&t.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&e.contains(document.activeElement)&&document.activeElement.blur()}};function D(){if(this.isContentEditable){let e=document.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this),t.setEnd(e.endContainer,e.endOffset),t.toString().length}return this.target.selectionStart}function I(e,t,n){let r=e.getMeta(n),a=t._schema[t._column_paths[r.x]];if(r){let e=n.textContent,o=t._ids[r.y-r.y0];if("float"===a||"integer"===a){if(e=parseFloat(e.replace(/,/g,"")),isNaN(e))return!1}else if("date"===a||"datetime"===a){if(e=Date.parse(e),isNaN(e))return!1}else"boolean"===a&&(e="check"!==e&&("close"===e||null));let l={__INDEX__:o,[t._column_paths[r.x]]:e};return t._table.update([l],{port_id:t._edit_port}),!0}}function F(e,t){void 0===t&&(t=!1);let n=0===this._config.group_by.length&&0===this._config.split_by.length,r=e.hasAttribute("selectable"),a=t||!!e.children[0]._is_edit_mode;return n&&!r&&a}var B=function(e){let t;return async function(){if(t&&await t&&t)return;let n;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t=new Promise((e=>n=e)),await e.apply(this,a),t=void 0,n()}}((async function(e,t,n,r,a){let o=e.getMeta(n),l=this._column_paths.length,i=this._num_rows,s=t.get(e);if(!s)return;o.x+r<l&&0<=o.x+r&&(s.x=o.x+r),o.y+a<i&&0<=o.y+a&&(s.y=o.y+a);let c=Math.max(o.x0-10,0),u=Math.min(o.x0+10,l),d=Math.max(o.y0-5,0),_=Math.min(o.y0+10,i),g=o.x0+r,h=o.y0+a;for(;!j(e,0,t)&&g>=c&&g<u&&h>=d&&h<_;)await e.scrollToCell(g,h,l,i),t.set(e,s),g+=r,h+=a}));function Y(e,t,n,r){if(!F.call(this,t))return;let a=document.activeElement;switch(r.target.classList.remove("psp-error"),r.keyCode){case 13:r.preventDefault(),r.shiftKey?B.call(this,e,n,a,0,-1):B.call(this,e,n,a,0,1);break;case 37:0==D.call(a)&&(r.preventDefault(),B.call(this,e,n,a,-1,0));break;case 38:r.preventDefault(),B.call(this,e,n,a,0,-1);break;case 39:D.call(a)==a.textContent.length&&(r.preventDefault(),B.call(this,e,n,a,1,0));break;case 40:r.preventDefault(),B.call(this,e,n,a,0,1)}}function H(e,t,n){let r=e.getMeta(n.target);if(typeof r?.x<"u"){let a=F.call(this,t),o=this._is_editable[r.x],l="boolean"===this.get_psp_type(r),i="-"===n.target.textContent;a&&o&&l&&!i&&I(e,this,n.target)}}function W(e,t,n,r){if(F.call(this,t)&&n.has(e)){r.target.classList.remove("psp-error");let t=n.get(e);n.delete(e),t.content!==r.target.textContent&&(I(e,this,r.target)||(r.target.textContent=t.content,r.target.classList.add("psp-error"),r.target.focus()))}}function q(e,t,n,r){let a=e.getMeta(r.target);if(a){let t={x:a.x,y:a.y,content:r.target.textContent};n.set(e,t)}}async function U(e,t,n){let{_view:r,_config:a}=e,o=a.group_by,l=a.split_by,i=t>=0?t:0,s=i+1,c=await r.to_json({start_row:i,end_row:s}),u=c.map((e=>e.__ROW_PATH__))[0]||[],d=o.map(((e,t)=>{let n=u[t];return n?[e,"==",n]:void 0})).filter((e=>e)),_=o.length>0?n+1:n,g=Object.keys(c[0])[_],h={row:c[0]},p=[];if(g){let e=g.split("|");h.column_names=[e[e.length-1]],p=l.map(((t,n)=>{let r=e[n];return r?[t,"==",r]:void 0})).filter((e=>e)).filter((e=>{let[,,t]=e;return"__ROW_PATH__"!==t}))}let f=a.filter.concat(d).concat(p);return h.config={filter:f},h}async function K(e,t,n,r){let a=e.getMeta(r.target);if(!t.hasAttribute("selectable")||r.handled||1!==r.which||!a)return;let o=this._ids[a.y-a.y0];if(a&&a.y>=0){let l=n.get(e),i=!!l&&l.reduce(((e,t,n)=>e&&t===o[n]),!0),s=!!l&&o.length===l.length&&i,c={selected:!s},{row:u,column_names:d,config:_}=await U(this,a.y,a.x);s?(n.delete(e),c={...c,row:u,config:{filter:structuredClone(this._config.filter)}}):(n.set(e,o),c={...c,row:u,column_names:d,config:_}),await e.draw({preserve_width:!0}),r.handled=!0,t.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:c}))}}function G(e,t,n){if(!t.hasAttribute("selectable"))return;let r=n.has(e),a=n.get(e);for(let o of e.querySelectorAll("td"))if(r){let t=e.getMeta(o),n=this._ids[t.y-t.y0],r=a.reduce(((e,t,r)=>e&&t===n[r]),!0);o.classList.toggle("psp-row-selected",n.length===a.length&&r),o.classList.toggle("psp-row-subselected",n.length!==a.length&&r)}else o.classList.toggle("psp-row-selected",!1),o.classList.toggle("psp-row-subselected",!1);for(let o of e.querySelectorAll("tbody th")){let t=e.getMeta(o),n=this._ids[t.y-t.y0];if(!r||n[t.row_header_x])o.classList.toggle("psp-row-selected",!1),o.classList.toggle("psp-row-subselected",!1);else{let e=a.reduce(((e,t,r)=>e&&t===n[r]),!0);o.classList.toggle("psp-row-selected",n.length===a.length&&e),o.classList.toggle("psp-row-subselected",n.length!==a.length&&e)}}}async function X(e,t,n){n.delete(e);for(let r of e.querySelectorAll("td,th"))r.classList.toggle("psp-row-selected",!1),r.classList.toggle("psp-row-subselected",!1)}var J={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat,boolean:class{format(e){return e?"check":"close"}}},Z=new class{constructor(){this._formatters=new Map}create_datetime_formatter(e,t){let n=l(e);if("datetime"===e){if("custom"!==t.format){let e={...n.format,timeZone:t.timeZone,dateStyle:t.dateStyle,timeStyle:t.timeStyle};return"disabled"===e.dateStyle?e.dateStyle=void 0:void 0===e.dateStyle&&(e.dateStyle=n.format.dateStyle),"disabled"===e.timeStyle?e.timeStyle=void 0:void 0===e.timeStyle&&(e.timeStyle=n.format.timeStyle),new Intl.DateTimeFormat([],e)}{let e={timeZone:t.timeZone,second:t.second,minute:t.minute,hour:t.hour,day:t.day,weekday:t.weekday,month:t.month,year:t.year,hour12:t.hour12,fractionalSecondDigits:t.fractionalSecondDigits};return"disabled"===e.year?e.year=void 0:void 0===e.year&&(e.year="2-digit"),"disabled"===e.month?e.month=void 0:void 0===e.month&&(e.month="numeric"),"disabled"===e.day?e.day=void 0:void 0===e.day&&(e.day="numeric"),"disabled"===e.weekday&&(e.weekday=void 0),"disabled"===e.hour?e.hour=void 0:void 0===e.hour&&(e.hour="numeric"),"disabled"===e.minute?e.minute=void 0:void 0===e.minute&&(e.minute="numeric"),"disabled"===e.second?e.second=void 0:void 0===e.second&&(e.second="numeric"),void 0===e.hour12&&(e.hour12=!0),new Intl.DateTimeFormat([],e)}}{let e={...n.format,dateStyle:t.dateStyle};return"disabled"===e.dateStyle?e.dateStyle=void 0:void 0===e.dateStyle&&(e.dateStyle=n.format.dateStyle),new Intl.DateTimeFormat([],e)}}create_number_formatter(e,t){let{format:n}=l(e);return void 0!==t.fixed&&(n.minimumFractionDigits=t.fixed,n.maximumFractionDigits=t.fixed),new J[e]([],n)}create_boolean_formatter(e,t){let n=l(e);return new J[e]([],n.format)}get(e,t){let n=[e,t.fixed,t.timeZone,t.dateStyle,t.timeStyle,t.fractionalSecondDigits,t.format,t.year,t.month,t.day,t.weekday,t.hour,t.minute,t.second,t.hour12].join("-");if(!this._formatters.has(n)){l(e);"date"===e||"datetime"===e?this._formatters.set(n,this.create_datetime_formatter(e,t)):"integer"===e||"float"===e?this._formatters.set(n,this.create_number_formatter(e,t)):"boolean"===e?this._formatters.set(n,this.create_boolean_formatter(e,t)):this._formatters.set(n,!1)}return this._formatters.get(n)}};function Q(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=!1),null===t)return"-";let a=e[e.length-1],o=r&&this._table_schema[a]||this._schema[a]||"string",l=n[a]||{};if("integer"!==o&&"float"!==o||"bar"!==l?.number_fg_mode){if("link"===l?.format&&"string"===o){let e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","_blank"),e.textContent=t,e}if("bold"===l?.format&&"string"===o){let e=document.createElement("b");return e.textContent=t,e}if("italics"===l?.format&&"string"===o){let e=document.createElement("i");return e.textContent=t,e}{let e=Z.get(o,l);return e?e.format(t):t}}{let e=Math.max(0,Math.min(.95,.95*Math.abs(t/l.fg_gradient))),n=this._div_factory.get(),r=t>=0?"left":"right";return n.setAttribute("style",`width:${(100*e).toFixed(2)}%;position:absolute;${r}:0;height:80%;top:10%;pointer-events:none;`),n}}function ee(e,t,n){var r=this;return void 0===e&&(e=[]),function*(){let a=n[g];for(let n of e){n=["TOTAL",...n];let e=n[n.length-1];n=n.slice(0,n.length-1).fill("");let o=Q.call(r,[t[n.length-1]],e,a,!0);n=o instanceof HTMLElement?n.concat(o):n.concat({toString:()=>o}),n.length=t.length+1,yield n}}()}function te(e,t,n){let r=window.getComputedStyle(e).getPropertyValue(t).trim();return r.length>0?r:n}function ne(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}async function re(e,t,n,r){void 0===r&&(r={});let o=await n.get_config(),l=o.expressions.map((e=>e[1])),[i,s,c,u,d,_,h]=await Promise.all([t.schema(),t.validate_expressions(l),n.num_rows(),n.schema(),n.expression_schema(),n.column_paths(),this.parentElement.getEditPort()]),f=a()(te(e,"--plugin--background","#FFFFFF")).rgb(),b=m(te(e,"--rt-pos-cell--color","#338DCD")),w=m(te(e,"--rt-neg-cell--color","#FF5942")),y=m(p(b[0],f)),v=m(p(w[0],f)),x=m(te(e,"--active--color","#ff0000")),k={...u,...d},S={...i,...s.expression_schema},V=_.filter((e=>"__ROW_PATH__"!==e&&"__ID__"!==e)),E=[],A=[];for(let a of V){let e=a.split("|"),t=e[e.length-1];A.push(k[t]),E.push(!!i[t])}let L=Object.assign(r,{_edit_port:h,_view:n,_table:t,_table_schema:S,_config:o,_num_rows:c,_schema:k,_ids:[],_open_column_styles_menu:[],_plugin_background:f,_color:x,_pos_fg_color:b,_neg_fg_color:w,_pos_bg_color:y,_neg_bg_color:v,_column_paths:V,_column_types:A,_is_editable:E,_row_header_types:o.group_by.map((e=>S[e])),_series_color_map:new Map,_series_color_seed:new Map,get_psp_type:ne});return L._div_factory=L._div_factory||new class{constructor(e){this._name=e,this._elements=[],this._index=0}clear(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let e=this._elements[this._index];return this._index+=1,e}}("div"),e.setDataListener(function(){let e,t,n,r,a;return async function(o,l,i,s,c){let u,d={};s-l>0&&c-i>0?(this._is_old_viewport=this._last_window?.start_row===i&&this._last_window?.end_row===c&&this._last_window?.start_col===l&&this._last_window?.end_col===s,u={start_row:i,start_col:l,end_row:c,end_col:s,id:!0},d=await this._view.to_columns(u),this._last_window=u,this._ids=d.__ID__,this._reverse_columns=this._column_paths.slice(l,s).reduce(((e,t,n)=>(e.set(t,n),e)),new Map),this._reverse_ids=this._ids.reduce(((e,t,n)=>(e.set(t?.join("|"),n),e)),new Map)):this._div_factory.clear();let _=[],h=[],p=[],f=[];for(let e=l;e<Math.min(s,this._column_paths.length);++e){let t=this._column_paths[e],n=t.split("|"),r=d[t]||new Array(c-i).fill(null);_.push(r.map((e=>Q.call(this,n,e,o[g])))),h.push(r),p.push(n),f.push(t)}return s-l>0&&c-i>0&&(this.last_column_paths=t,this.last_meta=e,this.last_ids=n,this.last_reverse_ids=r,this.last_reverse_columns=a,t=f,e=h,n=this._ids,r=this._reverse_ids,a=this._reverse_columns),{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(ee.call(this,d.__ROW_PATH__,this._config.group_by,o)),column_headers:p,data:_,metadata:h}}}().bind(L,e),{virtual_mode:window.getComputedStyle(e).getPropertyValue("--datagrid-virtual-mode")?.trim()||"both"}),L}async function ae(e,t,n){let r=e.getMeta(n.target);if(!r)return;let{x:a,y:o}=r,{row:l,column_names:i,config:s}=await U(this,o,a);t.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:l,column_names:i,config:s}}))}async function oe(e){let t=this.parentElement,n=await t.getTable(!0);if(this._initialized)await re.call(this,this.regular_table,n,e,this.model);else{this.innerHTML="",this.appendChild(this.regular_table),this.model=await re.call(this,this.regular_table,n,e),this.regular_table.addStyleListener(V.bind(this.model,this.regular_table)),this.regular_table.addStyleListener(_.bind(this.model,this.regular_table)),this.regular_table.addStyleListener(d.bind(this.model,this.regular_table)),this.regular_table.addEventListener("click",O.bind(this.model,this.regular_table)),this.regular_table.addEventListener("mousedown",P.bind(this.model,this.regular_table));let r=new WeakMap;this.regular_table.addStyleListener(G.bind(this.model,this.regular_table,t,r)),this.regular_table.addEventListener("mousedown",K.bind(this.model,this.regular_table,t,r)),this.regular_table.addEventListener("psp-deselect-all",X.bind(this.model,this.regular_table,t,r)),this.regular_table.addEventListener("click",ae.bind(this.model,this.regular_table,t));let a=new WeakMap;this.regular_table.addStyleListener($.bind(this.model,this.regular_table,t)),this.regular_table.addStyleListener(j.bind(this.model,this.regular_table,t,a)),this.regular_table.addEventListener("click",H.bind(this.model,this.regular_table,t)),this.regular_table.addEventListener("focusin",q.bind(this.model,this.regular_table,t,a)),this.regular_table.addEventListener("focusout",W.bind(this.model,this.regular_table,t,a)),this.regular_table.addEventListener("keydown",Y.bind(this.model,this.regular_table,t,a)),this._initialized=!0}}function le(e,t){if(void 0===t&&(t=!1),!this._initialized)return;t&&(this._cached_column_sizes=e);let n={},{group_by:r,columns:a}=this.model._config,o=r?.length>0?r.length+1:0;for(let l of Object.keys(e))if("__ROW_PATH__"===l)n[o-1]=e[l];else{n[this.model._column_paths.indexOf(l)+o]=e[l]}this.regular_table._column_sizes.override=n}function ie(){if(!this._initialized)return[];if(this._cached_column_sizes){let e=this._cached_column_sizes;return this._cached_column_sizes=void 0,e}let e=this.regular_table._column_sizes.override,{group_by:t,columns:n}=this.model._config,r=t?.length>0?t.length+1:0,a={};for(let o of Object.keys(e))if(void 0!==e[o]){let t=o-r;t>-1?a[this.model._column_paths[t]]=e[o]:-1===t&&(a.__ROW_PATH__=e[o])}return a}function se(e){void 0===e&&(e=void 0),typeof e>"u"&&(e=!this._is_edit_mode),this._is_edit_mode=e,this.classList.toggle("editable",e),void 0!==this._edit_mode&&(this._edit_mode.classList.toggle("editable",e),this._edit_mode.children[0].textContent=e?"Editable":"Read Only")}function ce(e){void 0===e&&(e=void 0),typeof e>"u"&&(e=!this._is_scroll_lock),this._is_scroll_lock=e,this.classList.toggle("sub-cell-scroll-disabled",e),void 0!==this._scroll_lock&&(this._scroll_lock.classList.toggle("lock-scroll",e),this._scroll_lock.children[0].textContent=e?"Align Scroll":"Free Scroll")}function ue(e){let t={};if((e=JSON.parse(JSON.stringify(e))).columns)for(let r of Object.keys(e.columns)){let n=e.columns[r];void 0!==n.column_size_override&&(t[r]=n.column_size_override,delete n.column_size_override),n?.pos_fg_color&&(n.pos_fg_color=m(n.pos_fg_color),n.neg_fg_color=m(n.neg_fg_color)),n?.pos_bg_color&&(n.pos_bg_color=m(n.pos_bg_color),n.neg_bg_color=m(n.neg_bg_color)),n?.color&&(n.color=m(n.color)),0===Object.keys(n).length&&delete e.columns[r]}"editable"in e&&se.call(this,e.editable),"scroll_lock"in e&&ce.call(this,e.scroll_lock);let n=this.regular_table;try{n._resetAutoSize()}catch{}le.call(this,t,!0),n[g]=e.columns}function de(){this._toolbar||(this._toolbar=document.createElement("perspective-viewer-datagrid-toolbar")),this.parentElement.appendChild(this._toolbar)}function _e(){if(this.regular_table){let e=this.regular_table,t={columns:{},scroll_lock:!!this._is_scroll_lock,editable:!!this._is_edit_mode};for(let r of Object.keys(e[g]||{})){let n=Object.assign({},e[g][r]);(n?.pos_fg_color||n?.pos_bg_color)&&(n.pos_fg_color=n.pos_fg_color?.[0],n.neg_fg_color=n.neg_fg_color?.[0],n.pos_bg_color=n.pos_bg_color?.[0],n.neg_bg_color=n.neg_bg_color?.[0]),n?.color&&(n.color=n.color[0]),t.columns[r]=n}let n=ie.call(this);for(let r of Object.keys(n||{}))t.columns[r]||(t.columns[r]={}),t.columns[r].column_size_override=n[r];return JSON.parse(JSON.stringify(t))}return{}}async function ge(e){if(this.parentElement&&await this.activate(e),!this.isConnected||null==this.offsetParent)return;let t=ie.call(this),n=this.regular_table.draw({invalid_columns:!0});this.model._preserve_focus_state?this.model._preserve_focus_state=!1:(this.regular_table.scrollTop=0,this.regular_table.scrollLeft=0,this.regular_table.dispatchEvent(new CustomEvent("psp-deselect-all",{bubbles:!1})),this.regular_table._resetAutoSize()),le.call(this,t),await n,this._toolbar.classList.toggle("aggregated",this.model._config.group_by.length>0||this.model._config.split_by.length>0)}var he=class extends HTMLElement{constructor(){super(),this.regular_table=document.createElement("regular-table"),this._is_scroll_lock=!1}connectedCallback(){return de.call(this)}disconnectedCallback(){this._toolbar.parentElement.removeChild(this._toolbar)}async activate(e){return await oe.call(this,e)}get name(){return"Datagrid"}get category(){return"Basic"}get select_mode(){return"toggle"}get min_config_columns(){}get config_column_names(){return["Columns"]}get priority(){return 1}async draw(e){return await ge.call(this,e)}async update(e){this.model._num_rows=await e.num_rows(),await this.regular_table.draw()}async resize(){!this.isConnected||null==this.offsetParent||this._initialized&&await this.regular_table.draw()}async clear(){this.regular_table._resetAutoSize(),this.regular_table.clear()}save(){return _e.call(this)}restore(e){return ue.call(this,e)}async restyle(e){await this.draw(e)}delete(){this.regular_table.table_model&&this.regular_table._resetAutoSize(),this.regular_table.clear()}},pe=class extends HTMLElement{connectedCallback(){if(this._initialized)return;this._initialized=!0,this.setAttribute("slot","plugin-settings"),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>\n                :host{position:relative;display:block;}:host #container{position:absolute;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;top:0;left:0;right:0;bottom:0;}:host #toolbar{display:flex;align-items:center;height:36px;}:host #slot-container{flex:1;position:relative;}#scroll_lock.lock-scroll:before{-webkit-mask-image:var(--toolbar-scroll-lock-active--content);}#scroll_lock:before{-webkit-mask-image:var(--toolbar-scroll-lock--content);}#select_mode:before{content:"highlight_alt";}#edit_mode:before{-webkit-mask-image:var(--toolbar-edit-mode--content);}#edit_mode.editable:before{-webkit-mask-image:var(--toolbar-edit-mode-active--content);}:host(.aggregated) #toolbar #edit_mode{display:none;}.button:before{width:25px;height:21px;content:"";-webkit-mask-image:cover;mask-image:cover;background-color:var(--icon--color,#ccc);margin:0 5px;}.button.editable:before,.button.lock-scroll:before{color:inherit;}.button{display:inline-flex;align-items:center;user-select:none;width:37px;height:22px;box-sizing:border-box;white-space:nowrap;border:1px solid transparent;border-radius:3px;}.button>span{display:none;margin:0;padding:0;}.button:hover{background-color:var(--icon--color);color:var(--plugin--background);opacity:1;display:flex;align-items:center;cursor:pointer;min-width:var(--button--min-width,105px);}.button:hover:before{background-color:var(--plugin--background);margin:0 5px 0 5px;}.button:hover>span{display:contents;font-size:9px;line-height:36px;}\n            </style>\n            <div id="toolbar">\n                <span id="scroll_lock" class="button">\n                    <span>Free Scroll</span>\n                </span>\n                <span id="edit_mode" class="button"><span>Read Only</span></span>\n            </div>\n        ';let e=this.parentElement,t=e.querySelector("perspective-viewer-datagrid");t._scroll_lock=this.shadowRoot.querySelector("#scroll_lock"),t._scroll_lock.addEventListener("click",(()=>ce.call(t))),t._edit_mode=this.shadowRoot.querySelector("#edit_mode"),t._edit_mode.addEventListener("click",(()=>{se.call(t),t.regular_table.draw(),e.dispatchEvent(new Event("perspective-config-update"))}))}};!async function(){customElements.define("perspective-viewer-datagrid-toolbar",pe),customElements.define("perspective-viewer-datagrid",he),await customElements.whenDefined("perspective-viewer"),customElements.get("perspective-viewer").registerPlugin("perspective-viewer-datagrid")}(),function(){let e=document.createElement("style");e.textContent='regular-table{padding:0;margin:12px 0 0 12px;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none;}regular-table:hover{scrollbar-color:rgba(0,0,0,0.3)transparent;}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody td,perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table thead th:not(.rt-group-corner){transform:translate(var(--regular-table--transform-x,0px));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody{transform:translate(0,var(--regular-table--transform-y,0px));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:first-child td,perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:first-child th{clip-path:polygon(0 var(--regular-table--clip-y,0),0 200%,200% 200%,200% var(--regular-table--clip-y,0));}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table thead th.rt-group-corner{background:var(--plugin--background,white);z-index:1;}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr td:first-of-type{clip-path:polygon(var(--regular-table--clip-x,0)0,var(--regular-table--clip-x,0)200%,200% 200%,200% 0);}perspective-viewer-datagrid:not(.sub-cell-scroll-disabled) regular-table table tbody tr:first-child td:first-of-type{clip-path:polygon(var(--regular-table--clip-x,0)var(--regular-table--clip-y,0),var(--regular-table--clip-x,0)200%,200% 200%,200% var(--regular-table--clip-y,0));}regular-table{font-family:inherit;}regular-table div[tabindex]{outline:none;}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;}regular-table th{text-align:center;}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0px;}regular-table thead tr:last-child .rt-float,regular-table tbody .rt-float{text-align:right;}regular-table thead .rt-integer,regular-table tbody .rt-integer{text-align:right;}regular-table tbody th{text-align:left;}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%;}regular-table thead .rt-string,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table tbody .rt-date,regular-table thead .rt-datetime,regular-table tbody .rt-datetime{text-align:left;}regular-table thead tr:last-child th{border-bottom:1px solid#8b868045;}regular-table tbody tr:first-child td,regular-table tbody tr:first-child th{border-top:1px solid transparent!important;}regular-table th{position:relative;}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid#eee;height:100%;}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding-right:5px;padding-left:5px;padding-top:0px;padding-bottom:0px;height:19px;}regular-table tr:hover td{background:#eee;opacity:1;}regular-table tr:hover{color:#333;}regular-table table *{box-sizing:border-box;}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none;}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:var(--button--font-family,"Material Icons");}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:var(--button--font-family,"Material Icons");}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px#1a7da1;}regular-table .rt-selected td{background-color:#eee;}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis;}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%;}regular-table th span.rt-group-name{text-align:left;}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%;}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize;}regular-table a{color:var(--rt-pos-cell--color);}regular-table a:visited{color:var(--active--color);}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px;}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background:var(--icon--color);border:5.5px solid var(--plugin--background);max-height:50%;max-width:50%;min-width:10%;min-height:10%;}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0px var(--inactive--border-color,#8b868045);}.psp-header-group{box-shadow:0px 10px 0 -9px var(--inactive--border-color,#8b868045);}.psp-is-top{box-shadow:5px 4px 0px -4px var(--inactive--border-color,#8b868045);}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0px -4px var(--inactive--border-color,#8b868045),0px 10px 0 -9px var(--inactive--border-color,#8b868045);}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0px var(--inactive--border-color,#8b868045),0px 10px 0 -9px var(--inactive--border-color,#8b868045);}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0px -4px var(--inactive--border-color,#8b868045);}tr:only-child th{box-shadow:none!important;}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected){border-color:var(--rt-hover--border-color,#c5c9d080)!important;background-color:transparent;box-shadow:0px 1px 0px var(--rt-hover--border-color,#c5c9d080),0px 3px 0px rgba(0,0,0,0.05),0px 5px 0px rgba(0,0,0,0.01);}regular-table tbody tr:hover+tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent;}regular-table tbody tr th:first-child:not(:empty),regular-table tbody tr th:first-child:empty+th:not(:empty),regular-table tbody tr th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent;}regular-table tbody tr th:last-child,regular-table tbody tr td:last-child{border-right-width:1px;border-right-color:transparent;}regular-table tbody tr:hover{color:#161616;}regular-table tbody tr:hover th:first-child:not(:empty),regular-table tbody tr:hover th:first-child:empty+th:not(:empty),regular-table tbody tr:hover th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color,#c5c9d080)!important;}regular-table tbody tr:hover th:last-child,regular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color,#c5c9d080)!important;}perspective-viewer[settings] regular-table .psp-header-leaf{height:36px;vertical-align:top;padding-top:3.5px;}perspective-viewer[settings] regular-table .psp-header-leaf:not(.psp-header-corner):before{font-family:var(--button--font-family,inherit);content:var(--column-style-open-button--content,var(--config-button-icon--content,"\\1f527"));position:absolute;width:calc(100% - 8px);left:5px;bottom:0px;padding-bottom:1px;margin-bottom:3px;color:var(--inactive--border-color,#8b868045);font-size:9px;border:1px solid transparent;}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:not(.psp-header-corner):before{color:inherit;cursor:pointer;}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner){pointer-events:none;color:var(--plugin--background);background-color:var(--icon--color);}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner):before{content:var(--column-style-close-button--content,"-");}perspective-viewer[settings] regular-table .psp-header-leaf .rt-column-resize{height:18px;}.psp-row-selected,:hover .psp-row-selected,:hover th.psp-tree-leaf.psp-row-selected,:hover th.psp-tree-label.psp-row-selected{color:white!important;background-color:#ea7319!important;border-color:#ea7319!important;}.psp-row-selected.psp-tree-label:not(:hover):before{color:white;}.psp-row-subselected,:hover .psp-row-subselected,:hover th.psp-tree-leaf.psp-row-subselected,:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,0.2)!important;}.psp-error{color:red;}td:focus{outline:#666;outline-style:dotted;outline-width:1px;}perspective-viewer.dragging regular-table{pointer-events:none;}.psp-header-border:last-child{border-right-width:0px;}.psp-header-sort-desc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}.psp-header-sort-asc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}.psp-header-sort-col-desc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-col-desc-icon--mask-image);mask-image:var(--sort-col-desc-icon--mask-image);}.psp-header-sort-col-asc:after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:14px;height:12px;-webkit-mask-image:var(--sort-col-asc-icon--mask-image);mask-image:var(--sort-col-asc-icon--mask-image);}tbody th:last-of-type{border-right:1px solid var(--inactive--border-color,#8b868045);overflow:hidden;text-overflow:ellipsis;}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,#eee 10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none;}.psp-tree-label{max-width:0px;min-width:0px;}.psp-tree-label:before{color:var(--icon--color);font-family:var(--button--font-family,inherit);padding-right:11px;}.psp-tree-label-expand:before{content:var(--tree-label-expand--content,"+");}.psp-tree-label-collapse:before{content:var(--tree-label-collapse--content,"-");}.psp-tree-label-expand,.psp-tree-label-collapse{cursor:pointer;}.psp-tree-label:hover:before{color:var(--active--color);text-shadow:0px 0px 5px var(--active--color);}regular-table thead tr:last-child th{border-bottom-width:1px;border-bottom-color:var(--inactive--border-color,#8b868045);}.psp-tree-leaf{padding-left:24px;}.psp-align-right{text-align:right;}.psp-align-left{text-align:left;}.psp-positive:not(:focus){color:var(--rt-pos-cell--color);}.psp-negative:not(:focus){color:var(--rt-neg-cell--color);}regular-table table tbody td{min-width:52px!important;}.psp-is-width-override .rt-column-resize,.rt-column-resize:hover{border:1px dashed#999;border-bottom-width:0px;border-left-width:0px;}.psp-bool-type{font-family:var(--button--font-family,"Material Icons");}.boolean-editable{cursor:pointer;}regular-table table{user-select:none;color:#161616;border-collapse:separate;}regular-table table th{font-weight:400;}regular-table table td,regular-table table th{border-color:var(--inactive--border-color,#8b868045);height:23px;}regular-table table .psp-header-group{text-overflow:ellipsis;}regular-table table th.psp-header-leaf{border-bottom-width:0px;}regular-table table th.psp-header-leaf span{height:23px;min-height:23px;}regular-table table td,regular-table table th.psp-tree-label,regular-table table th.psp-tree-label,regular-table table th.psp-tree-leaf,regular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px;}regular-table table tbody th:empty{background-position:0px -10px;}@keyframes pulse_pos{0%{background-color:var(--pulse--background-color-start,rgba(0,128,255,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(0,128,255,0));}}@keyframes pulse_pos2{0%{background-color:var(--pulse--background-color-start,rgba(0,128,255,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(0,128,255,0));}}@keyframes pulse_neg{0%{background-color:var(--pulse--background-color-start,rgba(255,25,0,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(255,25,0,0));}}@keyframes pulse_neg2{0%{background-color:var(--pulse--background-color-start,rgba(255,25,0,0.5));}100%{background-color:var(--pulse--background-color-end,rgba(255,25,0,0));}}',document.head.insertBefore(e,document.head.firstChild)}()},7115:function(e,t,n){n.d(t,{ZP:function(){return H}});var r=n(5829),a=n.n(r),o=n(6782);var l=n.p+"bd793c1457b8a67a.wasm",i=Object.defineProperty,s={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(s,{COLUMN_SEPARATOR_STRING:()=>x,CONFIG_ALIASES:()=>u,CONFIG_VALID_KEYS:()=>d,DATA_TYPES:()=>c,FILTER_OPERATORS:()=>b,SORT_ORDERS:()=>h,SORT_ORDER_IDS:()=>p,TYPE_AGGREGATES:()=>f,TYPE_FILTERS:()=>k});var c={integer:"integer",float:"float",string:"string",boolean:"boolean",date:"date",datetime:"datetime",object:"object"},u={row_pivot:"group_by","row-pivot":"group_by","row-pivots":"group_by",col_pivot:"split_by",col_pivots:"split_by",column_pivot:"split_by","column-pivot":"split_by","column-pivots":"split_by",filters:"filter",sorts:"sort"},d=["viewport","group_by","split_by","aggregates","columns","filter","sort","computed_columns","expressions","group_by_depth","split_by_depth","filter_op"],_=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last minus first","last","high","join","low","high minus low","max","mean","median","min","pct sum parent","pct sum grand total","stddev","sum","sum abs","sum not null","unique","var"],g=["any","count","distinct count","distinct leaf","dominant","first by index","join","last by index","last","unique"],h=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],p=[2,0,1,0,1,3,4,3,4],f={string:g,float:_,integer:_,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],datetime:g,date:g},b={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},m=[b.bitwiseAnd,b.bitwiseOr,b.equals,b.doesNotEqual,b.or,b.and,b.isNull,b.isNotNull],w=[b.lessThan,b.greaterThan,b.equals,b.lessThanOrEquals,b.greaterThanOrEquals,b.doesNotEqual,b.isNull,b.isNotNull],y=[b.equals,b.contains,b.doesNotEqual,b.isIn,b.isNotIn,b.beginsWith,b.endsWith,b.isNull,b.isNotNull],v=[b.lessThan,b.greaterThan,b.equals,b.lessThanOrEquals,b.greaterThanOrEquals,b.doesNotEqual,b.isNull,b.isNotNull],x="|",k={string:y,float:w,integer:w,boolean:m,datetime:v,date:v},S={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}};function V(e){return e&&"object"==typeof e&&!Array.isArray(e)}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;let a=n.shift();if(V(e)&&V(a))for(let o in a)V(a[o])?(e[o]||Object.assign(e,{[o]:{}}),E(e[o],a[o])):Object.assign(e,{[o]:a[o]});return E(e,...n)}function A(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=E(S,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}var L=new WeakMap,T=0;function C(e,t){return function(){let n,r=()=>{},a=Array.prototype.slice.call(arguments,0,arguments.length);for(let e=a.length-1;e>=0;e--)"function"==typeof a[e]&&(n=a.splice(e,1)[0]);let o=L.get(n);L.delete(n);let l={cmd:t||"view_method",name:this._name,method:e,args:a,subscribe:!0,callback_id:o};this._worker.post(l,n,r),this._worker.unsubscribe(t,n)}}function M(e,t){return function(){let n,r=()=>{},a=Array.prototype.slice.call(arguments,0,arguments.length);for(let e=a.length-1;e>=0;e--)"function"==typeof a[e]&&(n=a.splice(e,1)[0]);T++,L.set(n,T);let o={cmd:t||"view_method",name:this._name,method:e,args:a,subscribe:!0,callback_id:T};this._worker.post(o,n,r,!0)}}function N(e,t){return function(){var n=Array.prototype.slice.call(arguments,0,arguments.length);return new Promise(function(r,a){var o={cmd:t||"view_method",name:this._name,method:e,args:n,subscribe:!1};this._worker.post(o,r,a)}.bind(this))}}function z(e,t,n){return new Promise(((r,a)=>{this._worker=e,this._name=Math.random()+"",this._worker.post({cmd:"view",view_name:this._name,table_name:t,config:n},(()=>{r(this)}),a),!0===this._worker._initialized&&!this._worker._features?.wait_for_response&&r(this)}))}function P(e){let t=e;do{for(let n of Object.getOwnPropertyNames(t)){let t=e[n];"constructor"!==n&&"function"==typeof t&&(e[n]=t.bind(e))}}while(t=t!==Object&&Object.getPrototypeOf(t))}function O(e,t,n){return new Promise(((r,a)=>{this._worker=e,this._name=n.name||Math.random()+"",P(this),t.to_arrow?(this._worker.post({cmd:"table",name:this._name,args:[],options:n||{}}),t.to_arrow().then((e=>{this._worker.post({cmd:"table",name:this._name,args:[e],options:n||{}},(()=>{t.on_update((e=>{this.update(e.delta)}),{mode:"row"}),r(this)}),a)}))):this._worker.post({cmd:"table",name:this._name,args:[t],options:n||{}},(()=>{r(this)}),a),!0===this._worker._initialized&&!this._worker._features?.wait_for_response&&r(this)}))}function R(e,t){this._worker=e,this._name=t}z.prototype,z.prototype.get_config=N("get_config"),z.prototype.get_min_max=N("get_min_max"),z.prototype.to_json=N("to_json"),z.prototype.to_arrow=N("to_arrow"),z.prototype.to_columns=N("to_columns"),z.prototype.to_csv=N("to_csv"),z.prototype.schema=N("schema"),z.prototype.expression_schema=N("expression_schema"),z.prototype.column_paths=N("column_paths"),z.prototype.num_columns=N("num_columns"),z.prototype.num_rows=N("num_rows"),z.prototype.dimensions=N("dimensions"),z.prototype.set_depth=N("set_depth"),z.prototype.get_row_expanded=N("get_row_expanded"),z.prototype.expand=N("expand"),z.prototype.collapse=N("collapse"),z.prototype.delete=N("delete"),z.prototype.col_to_js_typed_array=N("col_to_js_typed_array"),z.prototype.on_update=M("on_update","view_method"),z.prototype.remove_update=C("remove_update","view_method"),z.prototype.on_delete=M("on_delete","view_method"),z.prototype.remove_delete=C("remove_delete","view_method"),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var a,o,l=0|t,i=Math.max(l>=0?l:r-Math.abs(l),0);for(;i<r;){if((a=n[i])===(o=e)||"number"==typeof a&&"number"==typeof o&&isNaN(a)&&isNaN(o))return!0;i++}return!1}}),O.prototype.type="table",R.prototype=O.prototype,O.prototype.view=function(e){return new z(this._worker,this._name,e)},O.prototype.query_columns=N("query_columns","table_method"),O.prototype.get_index=N("get_index","table_method"),O.prototype.get_limit=N("get_limit","table_method"),O.prototype.get_num_views=N("get_num_views","table_method"),O.prototype.make_port=N("make_port","table_method"),O.prototype.remove_port=N("remove_port","table_method"),O.prototype.schema=N("schema","table_method"),O.prototype.validate_expressions=N("validate_expressions","table_method"),O.prototype.is_valid_filter=N("is_valid_filter","table_method"),O.prototype.size=N("size","table_method"),O.prototype.num_rows=N("num_rows","table_method"),O.prototype.num_columns=N("num_columns","table_method"),O.prototype.columns=N("columns","table_method"),O.prototype.clear=N("clear","table_method"),O.prototype.replace=N("replace","table_method"),O.prototype.delete=N("delete","table_method"),O.prototype.on_delete=M("on_delete","table_method"),O.prototype.remove=N("remove","table_method"),O.prototype.remove_delete=C("remove_delete","table_method"),O.prototype.update=function(e,t){return new Promise(((n,r)=>{this._worker.post({name:this._name,cmd:"table_method",method:"update",args:[e,t||{}]},n,r,!1)}))},O.prototype.execute=function(e){this._worker.post({cmd:"table_execute",name:this._name,f:e.toString()})};var $=class{constructor(){this._initialized=!1,this._worker={initialized:{value:!1},transferable:!1,msg_id:0,handlers:{},messages:[]},P(this)}unsubscribe(e,t){for(let n of Object.keys(this._worker.handlers))this._worker.handlers[n].resolve===t&&delete this._worker.handlers[n]}post(e,t,n,r){void 0===r&&(r=!1),++this._worker.msg_id,(t||n)&&(this._worker.handlers[this._worker.msg_id]={resolve:t,reject:n,keep_alive:r}),e.id=this._worker.msg_id,this._worker.initialized.value?this.send(e):this._worker.messages.push((()=>{this.send(e),("table"===e.cmd||"view"===e.cmd)&&!this._features?.wait_for_response&&t&&t()}))}async memory_usage(){return await new Promise(((e,t)=>{this.post({cmd:"memory_usage"},e,t)}))}async get_hosted_table_names(){return await new Promise(((e,t)=>{this.post({cmd:"get_hosted_table_names"},e,t)}))}initialize_profile_thread(){this._worker.initialized.value?this.send({id:-1,cmd:"init_profile_thread"}):this._worker.messages.push((()=>this.send({id:-1,cmd:"init_profile_thread"})))}send(){throw new Error("send() not implemented")}async open_table(e){return new R(this,e)}_handle(e){if(!this._worker.initialized.value){this._initialized||(this._initialized=!0);let t=this._worker.messages;if(this._worker.initialized.value=!0,this._worker.messages=[],e.data?.data){this._features={};for(let t of e.data.data)this._features[t]=!0}if(t)for(let e in t)t.hasOwnProperty(e)&&t[e]()}if(e.data.id){let t=this._worker.handlers[e.data.id];t&&(e.data.error?t.reject(e.data.error):t.resolve(e.data.data),t.keep_alive||delete this._worker.handlers[e.data.id])}}table(e,t){return new O(this,e,t||{})}terminate(){this._worker.terminate(),this._worker=void 0}},j=class extends ${_ping(){this._ping_loop&&this._ws.send("ping"),this._ping_loop=setTimeout(this._ping.bind(this),3e4)}_close(){clearTimeout(this._ping_loop),this._ping_loop=void 0,this._on_close_callback?.()}_onmessage(e){if("pong"!==e.data)if(this._pending_binary){let t=e.data;if(this._full_binary.set(new Uint8Array(t),this._total_chunk_length),this._total_chunk_length+=t.byteLength,this._total_chunk_length!==this._pending_binary_length)return;t=this._full_binary.buffer;let n={data:{id:this._pending_binary,data:t}};if(void 0!==this._pending_port_id){let e={port_id:this._pending_port_id,delta:t};n.data.data=e}this._handle(n),delete this._pending_binary,delete this._pending_binary_length,delete this._pending_port_id,this._total_chunk_length=0,this._full_binary=null}else(e=JSON.parse(e.data)).binary_length?(this._pending_binary=e.id,this._pending_binary_length=e.binary_length,e.data&&void 0!==e.data.port_id&&(this._pending_port_id=e.data.port_id),this._full_binary=new Uint8Array(this._pending_binary_length)):this._handle({data:e})}constructor(e){super(),this._ws=e,this._ws.binaryType="arraybuffer",this._full_binary,this._total_chunk_length=0,this._pending_binary_length=0,this._ws.onopen=()=>{this.send({id:-1,cmd:"init"})},this._ping(),this._ws.onclose=this._close.bind(this),this._ws.onmessage=this._onmessage.bind(this)}send(e){if(this._ws.readyState!==a().CLOSED){if(e.args&&e.args.length>0&&e.args[0]instanceof ArrayBuffer&&void 0!==e.args[0].byteLength){let t=e;return e.binary_length=e.args[0].byteLength,this._ws.send(JSON.stringify(t)),void this._ws.send(e.args[0])}this._ws.send(JSON.stringify(e))}else console.warn("Websocket connection is already closed.")}terminate(){return new Promise((e=>{this._on_close_callback=e,this._ws.close()}))}},D=!1;function I(e){return 559903==new Uint32Array(e.slice(0,4))[0]}var F=function(){let e;return function(){return e||(e=new class{async worker(){return await new Worker(n.p+"perspective.worker.js")}async wasm(){let e=await l,t=[],n=0,r=new o.Q1((e=>{e&&(n+=e.byteLength,t.push(e))}));if(e instanceof ArrayBuffer&&!e.buffer&&(e=new Uint8Array(e)),e.buffer&&e.buffer instanceof ArrayBuffer)D=!0,I(e.buffer)?r.push(e,!0):(n=e.byteLength,t=[e]);else if(e instanceof ArrayBuffer)n=e.byteLength,t=[new Uint8Array(e)];else{let a=(await fetch(e)).body.getReader(),o=0;for(;;){let{value:e,done:l}=await a.read();if(l)break;0===o&&I(e.buffer)||1===o?(o=1,r.push(e,l)):(o=2,n+=e.byteLength,t.push(e))}}let a=0,i=new Uint8Array(n);for(let o of t)i.set(o,a),a+=o.byteLength;return this._wasm=i.buffer,this._wasm}}),e}}(),B=class extends ${constructor(e){var t;e&&(t=e,globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=E(S,t)),super(),this.register()}async register(){let e,t={cmd:"init",config:A()};if(typeof WebAssembly>"u")throw new Error("WebAssembly not supported.");for(var n in[e,t.buffer]=await Promise.all([F().worker(),F().wasm()]),this._worker)e[n]=this._worker[n];this._worker=e,this._worker.addEventListener("message",this._handle.bind(this)),this._worker.postMessage(t),this._detect_transferable()}send(e){this._worker.transferable&&e.args&&e.args[0]instanceof ArrayBuffer?this._worker.postMessage(e,[e.args[0]]):this._worker.postMessage(e)}terminate(){this._worker.terminate(),this._worker=void 0}get transferable(){return this._worker?.transferable||!1}get inline(){return D}_detect_transferable(){var e=new ArrayBuffer(1);this._worker.postMessage(e,[e]),this._worker.transferable=0===e.byteLength}},Y=function(){let e,t;return{getInstance:function(n){void 0===e&&(e=new B(n));let r=JSON.stringify(n);if(t&&r!==t)throw new Error("Configuration object for shared_worker() has changed - this is probably a bug in your application.");return t=r,e}}}();var H={override:function(e){return F().set(e)},worker:function(e){return new B(e)},websocket:function(e){return void 0===e&&(e=window.location.origin.replace("http","ws")),new j(new WebSocket(e))},shared_worker:function(e){return Y.getInstance(e)},...Object.keys(s)}},6246:function(e,t,n){var r=n(6782),a=n.p+"e21af22195e764cb.wasm",o=Object.defineProperty,l=class extends HTMLElement{constructor(){super()}get name(){return"Debug"}get select_mode(){return"select"}get min_config_columns(){}get config_column_names(){}get priority(){return 0}async update(e){return this.draw(e)}async draw(e){this.style.backgroundColor="#fff";let t=await e.to_csv();this.innerHTML=`<pre style='margin:0;overflow:scroll;position:absolute;width:100%;height:100%'>${t}</pre>`}async clear(){this.innerHTML=""}async resize(){}async restyle(){}async save(){}async restore(){}async delete(){}};document.createElement("perspective-viewer-plugin").constructor===HTMLElement&&window.customElements.define("perspective-viewer-plugin",l);var i={};((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})(i,{ColumnDropDownElement:()=>K,CopyDropDownMenuElement:()=>G,ExportDropDownMenuElement:()=>X,FilterDropDownElement:()=>J,FunctionDropDownElement:()=>Z,PerspectiveDateColumnStyleElement:()=>Q,PerspectiveDatetimeColumnStyleElement:()=>ee,PerspectiveDebugPluginElement:()=>te,PerspectiveNumberColumnStyleElement:()=>ne,PerspectiveStringColumnStyleElement:()=>re,PerspectiveViewerElement:()=>ae,default:()=>ce,defineWebComponents:()=>U,getExprTKCommands:()=>q,initSync:()=>ie,registerPlugin:()=>H});var s=window.ClipboardItem,c=window.ResizeObserver;var u,d=new Array(128).fill(void 0);function _(e){return d[e]}function g(e){return null==e}d.push(void 0,null,!0,!1);var h=null;function p(){return(null===h||0===h.byteLength)&&(h=new Float64Array(u.memory.buffer)),h}var f=null;function b(){return(null===f||0===f.byteLength)&&(f=new Int32Array(u.memory.buffer)),f}var m=0,w=null;function y(){return(null===w||0===w.byteLength)&&(w=new Uint8Array(u.memory.buffer)),w}var v=new TextEncoder("utf-8"),x="function"==typeof v.encodeInto?function(e,t){return v.encodeInto(e,t)}:function(e,t){let n=v.encode(e);return t.set(n),{read:e.length,written:n.length}};function k(e,t,n){if(void 0===n){let n=v.encode(e),r=t(n.length);return y().subarray(r,r+n.length).set(n),m=n.length,r}let r=e.length,a=t(r),o=y(),l=0;for(;l<r;l++){let t=e.charCodeAt(l);if(t>127)break;o[a+l]=t}if(l!==r){0!==l&&(e=e.slice(l)),a=n(a,r,r=l+3*e.length);let t=y().subarray(a+l,a+r);l+=x(e,t).written}return m=l,a}var S=d.length;function V(e){S===d.length&&d.push(d.length+1);let t=S;return S=d[t],d[t]=e,t}var E=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function A(e,t){return E.decode(y().subarray(e,e+t))}function L(e){let t=_(e);return function(e){e<132||(d[e]=S,S=e)}(e),t}E.decode();var T=null;function C(e){let t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){let t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){let t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){let t=e.length,n="[";t>0&&(n+=C(e[0]));for(let r=1;r<t;r++)n+=", "+C(e[r]);return n+="]",n}let n,r=/\[object ([^\]]+)\]/.exec(toString.call(e));if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function M(e,t,n,r){let a={a:e,b:t,cnt:1,dtor:n},o=function(){a.cnt++;let e=a.a;a.a=0;try{for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r(e,a.b,...n)}finally{0==--a.cnt?u.__wbindgen_export_2.get(a.dtor)(e,a.b):a.a=e}};return o.original=a,o}function N(e,t){try{let r=u.__wbindgen_add_to_stack_pointer(-16);u.__wbindgen_export_3(r,e,t);var n=b()[r/4+0];if(b()[r/4+1])throw L(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}function z(e,t,n,r){let a={a:e,b:t,cnt:1,dtor:n},o=function(){a.cnt++;try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(a.a,a.b,...t)}finally{0==--a.cnt&&(u.__wbindgen_export_2.get(a.dtor)(a.a,a.b),a.a=0)}};return o.original=a,o}function P(e,t,n){return L(u.__wbindgen_export_4(e,t,V(n)))}function O(e,t,n){u.__wbindgen_export_5(e,t,V(n))}function R(e,t,n){u.__wbindgen_export_6(e,t,V(n))}function $(e,t){u.__wbindgen_export_7(e,t)}function j(e,t,n){u.__wbindgen_export_8(e,t,V(n))}var D=128;function I(e,t,n){try{u.__wbindgen_export_9(e,t,function(e){if(1==D)throw new Error("out of js stack");return d[--D]=e,D}(n))}finally{d[D++]=void 0}}var F=null;function B(){return(null===F||0===F.byteLength)&&(F=new Uint32Array(u.memory.buffer)),F}function Y(e,t){try{return e.apply(this,t)}catch(n){u.__wbindgen_export_11(V(n))}}function H(e){let t=k(e,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;u.registerPlugin(t,n)}function W(e,t){let n=B().subarray(e/4,e/4+t),r=[];for(let a=0;a<n.length;a++)r.push(L(n[a]));return r}function q(){try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.getExprTKCommands(a);var e=b()[a/4+0],t=b()[a/4+1],n=b()[a/4+2];if(b()[a/4+3])throw L(n);var r=W(e,t).slice();return u.__wbindgen_export_10(e,4*t),r}finally{u.__wbindgen_add_to_stack_pointer(16)}}function U(){u.defineWebComponents()}var K=class{__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_columndropdownelement_free(e)}},G=class{static __wrap(e){let t=Object.create(G.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_copydropdownmenuelement_free(e)}constructor(e){let t=u.copydropdownmenuelement_new(V(e));return G.__wrap(t)}open(e){u.copydropdownmenuelement_open(this.ptr,V(e))}hide(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.copydropdownmenuelement_hide(t,this.ptr);var e=b()[t/4+0];if(b()[t/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}unsafe_set_model(e){u.copydropdownmenuelement_unsafe_set_model(this.ptr,e)}connected_callback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},X=class{static __wrap(e){let t=Object.create(X.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_exportdropdownmenuelement_free(e)}constructor(e){let t=u.copydropdownmenuelement_new(V(e));return X.__wrap(t)}open(e){u.exportdropdownmenuelement_open(this.ptr,V(e))}hide(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.copydropdownmenuelement_hide(t,this.ptr);var e=b()[t/4+0];if(b()[t/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}unsafe_set_model(e){u.exportdropdownmenuelement_unsafe_set_model(this.ptr,e)}connected_callback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},J=class{__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_filterdropdownelement_free(e)}},Z=class{__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_functiondropdownelement_free(e)}},Q=class{static __wrap(e){let t=Object.create(Q.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectivedatecolumnstyleelement_free(e)}constructor(e){let t=u.perspectivedatecolumnstyleelement_new(V(e));return Q.__wrap(t)}reset(e){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_reset(n,this.ptr,V(e));var t=b()[n/4+0];if(b()[n/4+1])throw L(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_open(a,this.ptr,V(e),V(t),V(n));var r=b()[a/4+0];if(b()[a/4+1])throw L(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}close(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=b()[t/4+0];if(b()[t/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{let t=this.__destroy_into_raw(),n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_destroy(n,t);var e=b()[n/4+0];if(b()[n/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},ee=class{static __wrap(e){let t=Object.create(ee.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectivedatetimecolumnstyleelement_free(e)}constructor(e){let t=u.perspectivedatecolumnstyleelement_new(V(e));return ee.__wrap(t)}reset(e){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_reset(n,this.ptr,V(e));var t=b()[n/4+0];if(b()[n/4+1])throw L(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatetimecolumnstyleelement_open(a,this.ptr,V(e),V(t),V(n));var r=b()[a/4+0];if(b()[a/4+1])throw L(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}close(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=b()[t/4+0];if(b()[t/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{let t=this.__destroy_into_raw(),n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_destroy(n,t);var e=b()[n/4+0];if(b()[n/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},te=class{static __wrap(e){let t=Object.create(te.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectivedebugpluginelement_free(e)}constructor(e){let t=u.perspectivedebugpluginelement_new(V(e));return te.__wrap(t)}get name(){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedebugpluginelement_name(n,this.ptr);var e=b()[n/4+0],t=b()[n/4+1];return A(e,t)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_10(e,t)}}get select_mode(){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedebugpluginelement_select_mode(n,this.ptr);var e=b()[n/4+0],t=b()[n/4+1];return A(e,t)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_10(e,t)}}get min_config_columns(){return L(u.perspectivedebugpluginelement_config_column_names(this.ptr))}get config_column_names(){return L(u.perspectivedebugpluginelement_config_column_names(this.ptr))}update(e){return L(u.perspectivedebugpluginelement_draw(this.ptr,V(e)))}draw(e){return L(u.perspectivedebugpluginelement_draw(this.ptr,V(e)))}clear(){return L(u.perspectivedebugpluginelement_clear(this.ptr))}resize(){return L(u.perspectivedebugpluginelement_clear(this.ptr))}restyle(){return L(u.perspectivedebugpluginelement_clear(this.ptr))}save(){return L(u.perspectivedebugpluginelement_clear(this.ptr))}restore(){return L(u.perspectivedebugpluginelement_clear(this.ptr))}delete(){return L(u.perspectivedebugpluginelement_clear(this.ptr))}connectedCallback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},ne=class{static __wrap(e){let t=Object.create(ne.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectivenumbercolumnstyleelement_free(e)}constructor(e){let t=u.perspectivedatecolumnstyleelement_new(V(e));return ne.__wrap(t)}reset(e,t){try{let r=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivenumbercolumnstyleelement_reset(r,this.ptr,V(e),V(t));var n=b()[r/4+0];if(b()[r/4+1])throw L(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivenumbercolumnstyleelement_open(a,this.ptr,V(e),V(t),V(n));var r=b()[a/4+0];if(b()[a/4+1])throw L(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}close(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=b()[t/4+0];if(b()[t/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{let t=this.__destroy_into_raw(),n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivenumbercolumnstyleelement_destroy(n,t);var e=b()[n/4+0];if(b()[n/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},re=class{static __wrap(e){let t=Object.create(re.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectivestringcolumnstyleelement_free(e)}constructor(e){let t=u.perspectivedatecolumnstyleelement_new(V(e));return re.__wrap(t)}reset(e){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivestringcolumnstyleelement_reset(n,this.ptr,V(e));var t=b()[n/4+0];if(b()[n/4+1])throw L(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{let a=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivestringcolumnstyleelement_open(a,this.ptr,V(e),V(t),V(n));var r=b()[a/4+0];if(b()[a/4+1])throw L(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}close(){try{let t=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=b()[t/4+0];if(b()[t/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{let t=this.__destroy_into_raw(),n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectivestringcolumnstyleelement_destroy(n,t);var e=b()[n/4+0];if(b()[n/4+1])throw L(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){u.copydropdownmenuelement_connected_callback(this.ptr)}},ae=class{static __wrap(e){let t=Object.create(ae.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();u.__wbg_perspectiveviewerelement_free(e)}constructor(e){let t=u.perspectiveviewerelement_new(V(e));return ae.__wrap(t)}connectedCallback(){u.copydropdownmenuelement_connected_callback(this.ptr)}load(e){return L(u.perspectiveviewerelement_load(this.ptr,V(e)))}delete(){return L(u.perspectiveviewerelement_delete(this.ptr))}getView(){return L(u.perspectiveviewerelement_getView(this.ptr))}getTable(e){return L(u.perspectiveviewerelement_getTable(this.ptr,g(e)?16777215:e?1:0))}flush(){return L(u.perspectiveviewerelement_flush(this.ptr))}restore(e){return L(u.perspectiveviewerelement_restore(this.ptr,V(e)))}save(e){var t=g(e)?0:k(e,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;return L(u.perspectiveviewerelement_save(this.ptr,t,n))}download(e){return L(u.perspectiveviewerelement_download(this.ptr,g(e)?16777215:e?1:0))}copy(e){return L(u.perspectiveviewerelement_copy(this.ptr,g(e)?16777215:e?1:0))}reset(e){return L(u.perspectiveviewerelement_reset(this.ptr,g(e)?16777215:e?1:0))}notifyResize(e){return L(u.perspectiveviewerelement_notifyResize(this.ptr,g(e)?16777215:e?1:0))}setAutoSize(e){u.perspectiveviewerelement_setAutoSize(this.ptr,e)}getEditPort(){try{let n=u.__wbindgen_add_to_stack_pointer(-16);u.perspectiveviewerelement_getEditPort(n,this.ptr);var e=p()[n/8+0],t=b()[n/4+2];if(b()[n/4+3])throw L(t);return e}finally{u.__wbindgen_add_to_stack_pointer(16)}}restyleElement(){return L(u.perspectiveviewerelement_restyleElement(this.ptr))}resetThemes(e){var t=g(e)?0:function(e,t){let n=t(4*e.length),r=B();for(let a=0;a<e.length;a++)r[n/4+a]=V(e[a]);return m=e.length,n}(e,u.__wbindgen_export_0),n=m;return L(u.perspectiveviewerelement_resetThemes(this.ptr,t,n))}setThrottle(e){u.perspectiveviewerelement_setThrottle(this.ptr,!g(e),g(e)?0:e)}toggleConfig(e){return L(u.perspectiveviewerelement_toggleConfig(this.ptr,g(e)?16777215:e?1:0))}getAllPlugins(){return L(u.perspectiveviewerelement_getAllPlugins(this.ptr))}getPlugin(e){try{let o=u.__wbindgen_add_to_stack_pointer(-16);var t=g(e)?0:k(e,u.__wbindgen_export_0,u.__wbindgen_export_1),n=m;u.perspectiveviewerelement_getPlugin(o,this.ptr,t,n);var r=b()[o/4+0],a=b()[o/4+1];if(b()[o/4+2])throw L(a);return L(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}unsafeGetModel(){return u.perspectiveviewerelement_unsafeGetModel(this.ptr)}};function oe(){let e={wbg:{}};return e.wbg.__wbindgen_is_undefined=function(e){return void 0===_(e)},e.wbg.__wbindgen_in=function(e,t){return _(e)in _(t)},e.wbg.__wbindgen_number_get=function(e,t){let n=_(t),r="number"==typeof n?n:void 0;p()[e/8+1]=g(r)?0:r,b()[e/4+0]=!g(r)},e.wbg.__wbindgen_boolean_get=function(e){let t=_(e);return"boolean"==typeof t?t?1:0:2},e.wbg.__wbindgen_string_get=function(e,t){let n=_(t),r="string"==typeof n?n:void 0;var a=g(r)?0:k(r,u.__wbindgen_export_0,u.__wbindgen_export_1),o=m;b()[e/4+1]=o,b()[e/4+0]=a},e.wbg.__wbindgen_is_bigint=function(e){return"bigint"==typeof _(e)},e.wbg.__wbindgen_is_object=function(e){let t=_(e);return"object"==typeof t&&null!==t},e.wbg.__wbindgen_is_string=function(e){return"string"==typeof _(e)},e.wbg.__wbindgen_bigint_from_i64=function(e){return V(e)},e.wbg.__wbindgen_bigint_from_u64=function(e){return V(BigInt.asUintN(64,e))},e.wbg.__wbindgen_error_new=function(e,t){return V(new Error(A(e,t)))},e.wbg.__wbg_static_accessor_PSP_76ce333a23e53b1c=function(){return V(i)},e.wbg.__wbindgen_object_clone_ref=function(e){return V(_(e))},e.wbg.__wbindgen_jsval_eq=function(e,t){return _(e)===_(t)},e.wbg.__wbindgen_string_new=function(e,t){return V(A(e,t))},e.wbg.__wbg_supportedValuesOf_a11f66836385caee=function(e){return V(Intl.supportedValuesOf(_(e)))},e.wbg.__wbindgen_object_drop_ref=function(e){L(e)},e.wbg.__wbindgen_cb_drop=function(e){let t=L(e).original;return 1==t.cnt--&&(t.a=0,!0)},e.wbg.__wbg_expressionschema_27d413f7c0ff1e53=function(e){return V(_(e).expression_schema)},e.wbg.__wbg_restore_cd81849fcc1ecc04=function(e,t){_(e).restore(_(t))},e.wbg.__wbindgen_is_null=function(e){return null===_(e)},e.wbg.__wbg_contentRect_f7622b5081f8fd10=function(e){return V(_(e).contentRect)},e.wbg.__wbg_new_fbbbe71b4fa83ead=function(e){return V(new s(_(e)))},e.wbg.__wbg_update_0bf42c805a48e94b=function(){return Y((function(e,t,n,r,a,o,l){return V(_(e).update(_(t),0===n?void 0:r>>>0,0===a?void 0:o>>>0,0!==l))}),arguments)},e.wbg.__wbg_draw_5ad42536e3eee6f4=function(){return Y((function(e,t,n,r,a,o,l){return V(_(e).draw(_(t),0===n?void 0:r>>>0,0===a?void 0:o>>>0,0!==l))}),arguments)},e.wbg.__wbg_delete_dcf28f873a9ecec4=function(e){_(e).delete()},e.wbg.__wbg_setrenderwarning_3452e0de8c520d49=function(e,t){_(e).render_warning=0!==t},e.wbg.__wbg_size_cca1681c3e43e751=function(){return Y((function(e){return V(_(e).size())}),arguments)},e.wbg.__wbg_columns_687f8ecc20b563e2=function(){return Y((function(e){return V(_(e).columns())}),arguments)},e.wbg.__wbg_schema_361c7c42ce3749d0=function(){return Y((function(e){return V(_(e).schema())}),arguments)},e.wbg.__wbg_makeport_7b3acd15ce5dd446=function(){return Y((function(e){return V(_(e).make_port())}),arguments)},e.wbg.__wbg_numtablerows_b43a0294408ee5f9=function(e){return _(e).num_table_rows},e.wbg.__wbg_numtablecolumns_30fcf15c5f8e6c34=function(e){return _(e).num_table_columns},e.wbg.__wbg_numviewrows_b78c56b89ef84dfd=function(e){return _(e).num_view_rows},e.wbg.__wbg_numviewcolumns_2e5bcd8da405f276=function(e){return _(e).num_view_columns},e.wbg.__wbg_errors_9f451b41371e40c2=function(e){return V(_(e).errors)},e.wbg.__wbg_tocolumns_ebdc8b3b5cfe8ea2=function(){return Y((function(e){return V(_(e).to_columns())}),arguments)},e.wbg.__wbindgen_number_new=function(e){return V(e)},e.wbg.__wbg_onupdate_ca45dac52ba9bfda=function(e,t){_(e).on_update(_(t))},e.wbg.__wbg_removeupdate_0b86eb40e85cab5e=function(e,t){_(e).remove_update(_(t))},e.wbg.__wbg_expressionalias_f09b6b5564cf1ab5=function(e){return V(_(e).expression_alias)},e.wbg.__wbg_validateexpressions_0849bf2e3d165714=function(){return Y((function(e,t){return V(_(e).validate_expressions(L(t)))}),arguments)},e.wbg.__wbg_view_0fc6424602af6118=function(){return Y((function(e,t){return V(_(e).view(_(t)))}),arguments)},e.wbg.__wbg_tocsv_1b170e2b60a4f690=function(){return Y((function(e,t){return V(_(e).to_csv(L(t)))}),arguments)},e.wbg.__wbg_toarrow_e1a890d598371b1f=function(){return Y((function(e){return V(_(e).to_arrow())}),arguments)},e.wbg.__wbg_dimensions_afe03974632065f1=function(){return Y((function(e){return V(_(e).dimensions())}),arguments)},e.wbg.__wbg_schema_e10ec920cbd21a79=function(){return Y((function(e){return V(_(e).schema())}),arguments)},e.wbg.__wbg_delete_925c1dc24a546eaf=function(){return Y((function(e){return V(_(e).delete())}),arguments)},e.wbg.__wbg_name_647e9520e2c8e69a=function(e,t){let n=k(_(t).name,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_category_229b499d93355281=function(e,t){let n=_(t).category;var r=g(n)?0:k(n,u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;b()[e/4+1]=a,b()[e/4+0]=r},e.wbg.__wbg_maxcolumns_b6bb2842b458acf0=function(e,t){let n=_(t).max_columns;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_maxcells_c55c80b96b6cf43b=function(e,t){let n=_(t).max_cells;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_renderwarning_e5d9c6a47bdc8403=function(e){let t=_(e).render_warning;return g(t)?16777215:t?1:0},e.wbg.__wbg_selectmode_7f98aca43fe7143d=function(e){return V(_(e).select_mode)},e.wbg.__wbg_minconfigcolumns_2fd03ce1830631d5=function(e,t){let n=_(t).min_config_columns;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_configcolumnnames_41b57db8e98dbd19=function(e){let t=_(e).config_column_names;return g(t)?0:V(t)},e.wbg.__wbg_priority_16f36cb8b2a1d092=function(e,t){let n=_(t).priority;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_save_c980b61ef9f81e8a=function(e){return V(_(e).save())},e.wbg.__wbg_restyle_6da7fefe89cb24d5=function(){return Y((function(e,t){return V(_(e).restyle(_(t)))}),arguments)},e.wbg.__wbg_resize_8c7c316cbd61e9fc=function(){return Y((function(e){return V(_(e).resize())}),arguments)},e.wbg.__wbg_new_11e6316f1dd5b8c0=function(e){return V(new c(_(e)))},e.wbg.__wbg_observe_34c99d16983d3e0d=function(e,t){_(e).observe(_(t))},e.wbg.__wbg_unobserve_98d51f6fafd95fba=function(e,t){_(e).unobserve(_(t))},e.wbg.__wbg_bootstrap_d58b243830b40b33=function(e,t,n,r,a,o){let l=function(e,t,n,r){let a=e[n],o=a.prototype;class l extends HTMLElement{constructor(){super(),this._instance=new a(this)}}let i=Object.getOwnPropertyNames(o);for(let s of i)"get"in Object.getOwnPropertyDescriptor(o,s)?Object.defineProperty(l.prototype,s,{get:function(){return this._instance[s]}}):Object.defineProperty(l.prototype,s,{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._instance[s].call(this._instance,...t)}});for(let s of r)Object.defineProperty(l,s,{value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[s].call(e,...n)}});customElements.define(t,l)}(_(e),A(t,n),A(r,a),L(o));return V(l)},e.wbg.__wbg_listenerid_12315eee21527820=function(e,t){let n=_(t).__yew_listener_id;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_setlistenerid_3183aae8fa5840fb=function(e,t){_(e).__yew_listener_id=t>>>0},e.wbg.__wbg_setsubtreeid_d32e6327eef1f7fc=function(e,t){_(e).__yew_subtree_id=t>>>0},e.wbg.__wbg_setcachekey_80183b7cfc421143=function(e,t){_(e).__yew_subtree_cache_key=t>>>0},e.wbg.__wbg_subtreeid_e348577f7ef777e3=function(e,t){let n=_(t).__yew_subtree_id;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_cachekey_b61393159c57fd7b=function(e,t){let n=_(t).__yew_subtree_cache_key;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return V(new Error)},e.wbg.__wbg_stack_658279fe44541cf6=function(e,t){let n=k(_(t).stack,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(A(e,t))}finally{u.__wbindgen_export_10(e,t)}},e.wbg.__wbindgen_jsval_loose_eq=function(e,t){return _(e)==_(t)},e.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){let n=k(String(_(t)),u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){return V(_(e)[_(t)])},e.wbg.__wbg_set_20cbc34131e76824=function(e,t,n){_(e)[L(t)]=L(n)},e.wbg.__wbg_error_c0a7dc7e3b138aad=function(e,t){var n=W(e,t).slice();u.__wbindgen_export_10(e,4*t),console.error(...n)},e.wbg.__wbg_newwithu8arraysequence_fede89c6795cc33e=function(){return Y((function(e){return V(new Blob(_(e)))}),arguments)},e.wbg.__wbg_newwithstrsequenceandoptions_710e3955c3af1c1f=function(){return Y((function(e,t){return V(new Blob(_(e),_(t)))}),arguments)},e.wbg.__wbg_write_835b6fdc840018db=function(e,t){return V(_(e).write(_(t)))},e.wbg.__wbg_length_cb56788f94a79587=function(e){return _(e).length},e.wbg.__wbg_item_cd42d84b8a35d126=function(e,t){let n=_(e).item(t>>>0);return g(n)?0:V(n)},e.wbg.__wbg_length_eef5266d0b30c7d7=function(e){return _(e).length},e.wbg.__wbg_getPropertyValue_05e910529ab6e32a=function(){return Y((function(e,t,n,r){let a=k(_(t).getPropertyValue(A(n,r)),u.__wbindgen_export_0,u.__wbindgen_export_1),o=m;b()[e/4+1]=o,b()[e/4+0]=a}),arguments)},e.wbg.__wbg_item_4c111cb0cc721409=function(e,t,n){let r=k(_(t).item(n>>>0),u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;b()[e/4+1]=a,b()[e/4+0]=r},e.wbg.__wbg_setProperty_21e2e7868b86a93e=function(){return Y((function(e,t,n,r,a){_(e).setProperty(A(t,n),A(r,a))}),arguments)},e.wbg.__wbg_instanceof_CssStyleRule_6e8af49f43f0b7ab=function(e){let t;try{t=_(e)instanceof CSSStyleRule}catch{t=!1}return t},e.wbg.__wbg_selectorText_62ef3bed9323aefc=function(e,t){let n=k(_(t).selectorText,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_style_71d307158ce61414=function(e){return V(_(e).style)},e.wbg.__wbg_cssRules_d2d7f924cdcf6c4c=function(){return Y((function(e){return V(_(e).cssRules)}),arguments)},e.wbg.__wbg_new_6ed14e2e6f8b5a03=function(){return Y((function(e,t){return V(new CustomEvent(A(e,t)))}),arguments)},e.wbg.__wbg_newwitheventinitdict_3607f3d9a58509d5=function(){return Y((function(e,t,n){return V(new CustomEvent(A(e,t),_(n)))}),arguments)},e.wbg.__wbg_setdropEffect_95e777b58aabb679=function(e,t,n){_(e).dropEffect=A(t,n)},e.wbg.__wbg_setData_7cbabb43b90bb947=function(){return Y((function(e,t,n,r,a){_(e).setData(A(t,n),A(r,a))}),arguments)},e.wbg.__wbg_setDragImage_12deaa947a938ec4=function(e,t,n,r){_(e).setDragImage(_(t),n,r)},e.wbg.__wbg_readyState_70087d592b243b36=function(e,t){let n=k(_(t).readyState,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_body_be46234bb33edd63=function(e){let t=_(e).body;return g(t)?0:V(t)},e.wbg.__wbg_activeElement_4f793763dfcc99d7=function(e){let t=_(e).activeElement;return g(t)?0:V(t)},e.wbg.__wbg_styleSheets_bdce530fbe6c099e=function(e){return V(_(e).styleSheets)},e.wbg.__wbg_fonts_dfcbe0032e3ae560=function(e){return V(_(e).fonts)},e.wbg.__wbg_createElement_e2a0e21263eb5416=function(){return Y((function(e,t,n){return V(_(e).createElement(A(t,n)))}),arguments)},e.wbg.__wbg_createElementNS_0047de728927ea00=function(){return Y((function(e,t,n,r,a){return V(_(e).createElementNS(0===t?void 0:A(t,n),A(r,a)))}),arguments)},e.wbg.__wbg_createTextNode_866e33a51b47f04c=function(e,t,n){return V(_(e).createTextNode(A(t,n)))},e.wbg.__wbg_width_f0cbf7dcbbe056da=function(e){return _(e).width},e.wbg.__wbg_height_e46975153da440ae=function(e){return _(e).height},e.wbg.__wbg_width_6762f1c0e103466e=function(e){return _(e).width},e.wbg.__wbg_height_7228c2f4dd8e75bd=function(e){return _(e).height},e.wbg.__wbg_top_98bc5382de3ec5d2=function(e){return _(e).top},e.wbg.__wbg_left_09342c290d46b4a6=function(e){return _(e).left},e.wbg.__wbg_get_36817a0b6bd3b305=function(e,t,n,r){let a=_(t)[A(n,r)];var o=g(a)?0:k(a,u.__wbindgen_export_0,u.__wbindgen_export_1),l=m;b()[e/4+1]=l,b()[e/4+0]=o},e.wbg.__wbg_set_6903780050f0d9a9=function(){return Y((function(e,t,n,r,a){_(e)[A(t,n)]=A(r,a)}),arguments)},e.wbg.__wbg_delete_d197db23212363f3=function(e,t,n){delete _(e)[A(t,n)]},e.wbg.__wbg_add_ea314b325ad27189=function(){return Y((function(e,t){_(e).add(..._(t))}),arguments)},e.wbg.__wbg_add_73f794d491a0e44f=function(){return Y((function(e,t,n){_(e).add(A(t,n))}),arguments)},e.wbg.__wbg_remove_10fbe66510bfee98=function(){return Y((function(e,t){_(e).remove(..._(t))}),arguments)},e.wbg.__wbg_remove_f021903057d23f5e=function(){return Y((function(e,t,n){_(e).remove(A(t,n))}),arguments)},e.wbg.__wbg_toggle_e36c504dbc3d7694=function(){return Y((function(e,t,n){return _(e).toggle(A(t,n))}),arguments)},e.wbg.__wbg_dataTransfer_445ade328cdd17c8=function(e){let t=_(e).dataTransfer;return g(t)?0:V(t)},e.wbg.__wbg_instanceof_Element_cb847a3fc7b1b1a4=function(e){let t;try{t=_(e)instanceof Element}catch{t=!1}return t},e.wbg.__wbg_namespaceURI_436d78f0f18e05c1=function(e,t){let n=_(t).namespaceURI;var r=g(n)?0:k(n,u.__wbindgen_export_0,u.__wbindgen_export_1),a=m;b()[e/4+1]=a,b()[e/4+0]=r},e.wbg.__wbg_tagName_92d4c105959ede9f=function(e,t){let n=k(_(t).tagName,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_classList_c4ebb3813d3a2f5d=function(e){return V(_(e).classList)},e.wbg.__wbg_scrollTop_296f89e3a4486106=function(e){return _(e).scrollTop},e.wbg.__wbg_scrollLeft_7d962ecb3da16acc=function(e){return _(e).scrollLeft},e.wbg.__wbg_setscrollLeft_5124e83b21ab4746=function(e,t){_(e).scrollLeft=t},e.wbg.__wbg_clientWidth_1fa51f20a3bebbbf=function(e){return _(e).clientWidth},e.wbg.__wbg_clientHeight_0fe149fdad1fe046=function(e){return _(e).clientHeight},e.wbg.__wbg_setinnerHTML_76167cda24d9b96b=function(e,t,n){_(e).innerHTML=A(t,n)},e.wbg.__wbg_children_93bcc921a4904ad4=function(e){return V(_(e).children)},e.wbg.__wbg_attachShadow_c071102f3dae5d9a=function(){return Y((function(e,t){return V(_(e).attachShadow(_(t)))}),arguments)},e.wbg.__wbg_getAttribute_2c20e00a5cd314af=function(e,t,n,r){let a=_(t).getAttribute(A(n,r));var o=g(a)?0:k(a,u.__wbindgen_export_0,u.__wbindgen_export_1),l=m;b()[e/4+1]=l,b()[e/4+0]=o},e.wbg.__wbg_getBoundingClientRect_aaa701cbcb448965=function(e){return V(_(e).getBoundingClientRect())},e.wbg.__wbg_hasAttribute_8d21af81e8fc2f17=function(e,t,n){return _(e).hasAttribute(A(t,n))},e.wbg.__wbg_matches_bda2f7b6478030a6=function(){return Y((function(e,t,n){return _(e).matches(A(t,n))}),arguments)},e.wbg.__wbg_releasePointerCapture_b0063bfa1890f17b=function(){return Y((function(e,t){_(e).releasePointerCapture(t)}),arguments)},e.wbg.__wbg_removeAttribute_ad7a5bf2eed30373=function(){return Y((function(e,t,n){_(e).removeAttribute(A(t,n))}),arguments)},e.wbg.__wbg_setAttribute_79c9562d32d05e66=function(){return Y((function(e,t,n,r,a){_(e).setAttribute(A(t,n),A(r,a))}),arguments)},e.wbg.__wbg_setPointerCapture_5479dc0d082282b7=function(){return Y((function(e,t){_(e).setPointerCapture(t)}),arguments)},e.wbg.__wbg_toggleAttribute_b07fecd058040a59=function(){return Y((function(e,t,n,r){return _(e).toggleAttribute(A(t,n),0!==r)}),arguments)},e.wbg.__wbg_target_b629c177f9bee3da=function(e){let t=_(e).target;return g(t)?0:V(t)},e.wbg.__wbg_bubbles_80a0700df9c59aee=function(e){return _(e).bubbles},e.wbg.__wbg_cancelBubble_c9a8182589205d54=function(e){return _(e).cancelBubble},e.wbg.__wbg_composedPath_d4428cc409ddd3e6=function(e){return V(_(e).composedPath())},e.wbg.__wbg_preventDefault_16b2170b12f56317=function(e){_(e).preventDefault()},e.wbg.__wbg_stopPropagation_7647c9985222f9b0=function(e){_(e).stopPropagation()},e.wbg.__wbg_addEventListener_615d4590d38da1c9=function(){return Y((function(e,t,n,r){_(e).addEventListener(A(t,n),_(r))}),arguments)},e.wbg.__wbg_addEventListener_cf5b03cd29763277=function(){return Y((function(e,t,n,r,a){_(e).addEventListener(A(t,n),_(r),_(a))}),arguments)},e.wbg.__wbg_dispatchEvent_615d1ccbba577081=function(){return Y((function(e,t){return _(e).dispatchEvent(_(t))}),arguments)},e.wbg.__wbg_removeEventListener_86fd19ed073cd1ed=function(){return Y((function(e,t,n,r){_(e).removeEventListener(A(t,n),_(r))}),arguments)},e.wbg.__wbg_instanceof_FontFace_52e8786298dcabeb=function(e){let t;try{t=_(e)instanceof FontFace}catch{t=!1}return t},e.wbg.__wbg_family_afd8897a6b516d76=function(e,t){let n=k(_(t).family,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_weight_a1f1e299df7b3fa2=function(e,t){let n=k(_(t).weight,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_loaded_02544538272a8a04=function(){return Y((function(e){return V(_(e).loaded)}),arguments)},e.wbg.__wbg_values_aafc66d1486c9292=function(e){return V(_(e).values())},e.wbg.__wbg_next_92f073c7b53427b2=function(){return Y((function(e){return V(_(e).next())}),arguments)},e.wbg.__wbg_item_2ab86c1e3cb70ed3=function(e,t){let n=_(e).item(t>>>0);return g(n)?0:V(n)},e.wbg.__wbg_getwithindex_aec05ea9d2417c75=function(e,t){let n=_(e)[t>>>0];return g(n)?0:V(n)},e.wbg.__wbg_scrollTop_99ac74051927ce93=function(e){return _(e).scrollTop},e.wbg.__wbg_setscrollTop_a800ac5312e75de8=function(e,t){_(e).scrollTop=t},e.wbg.__wbg_dataset_704ec547006a213c=function(e){return V(_(e).dataset)},e.wbg.__wbg_style_2141664e428fef46=function(e){return V(_(e).style)},e.wbg.__wbg_offsetParent_fadc40e6ce156dc2=function(e){let t=_(e).offsetParent;return g(t)?0:V(t)},e.wbg.__wbg_offsetWidth_56caa7d0f7e171a2=function(e){return _(e).offsetWidth},e.wbg.__wbg_offsetHeight_31cde48f5fbc2368=function(e){return _(e).offsetHeight},e.wbg.__wbg_blur_b94a30ed202c3612=function(){return Y((function(e){_(e).blur()}),arguments)},e.wbg.__wbg_click_f3e37a4a2595187d=function(e){_(e).click()},e.wbg.__wbg_focus_6497e1b44dabfb24=function(){return Y((function(e){_(e).focus()}),arguments)},e.wbg.__wbg_checked_44c09d0c819e33ad=function(e){return _(e).checked},e.wbg.__wbg_setchecked_cbd6f423c4deba69=function(e,t){_(e).checked=0!==t},e.wbg.__wbg_value_1f2c9e357d18d3ea=function(e,t){let n=k(_(t).value,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_setvalue_a706abe70dab1b65=function(e,t,n){_(e).value=A(t,n)},e.wbg.__wbg_selectedIndex_1e9fee59fa44bd02=function(e){return _(e).selectedIndex},e.wbg.__wbg_setvalue_7f698ba375d14330=function(e,t,n){_(e).value=A(t,n)},e.wbg.__wbg_value_00fb0fdc46959169=function(e,t){let n=k(_(t).value,u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbg_setvalue_f92ff20dd33356a8=function(e,t,n){_(e).value=A(t,n)},e.wbg.__wbg_setselectionStart_dd9b85d67b4216ee=function(){return Y((function(e,t,n){_(e).selectionStart=0===t?void 0:n>>>0}),arguments)},e.wbg.__wbg_selectionEnd_cd4e4c1adfe0d246=function(){return Y((function(e,t){let n=_(t).selectionEnd;b()[e/4+1]=g(n)?0:n,b()[e/4+0]=!g(n)}),arguments)},e.wbg.__wbg_setselectionEnd_7c74ebb970b35942=function(){return Y((function(e,t,n){_(e).selectionEnd=0===t?void 0:n>>>0}),arguments)},e.wbg.__wbg_keyCode_b33194be2ceec53b=function(e){return _(e).keyCode},e.wbg.__wbg_shiftKey_31e62e9d172b26f0=function(e){return _(e).shiftKey},e.wbg.__wbg_clientX_35f23f953e04ec0e=function(e){return _(e).clientX},e.wbg.__wbg_clientY_8104e462abc0b3ec=function(e){return _(e).clientY},e.wbg.__wbg_offsetX_413d9f02022e72ad=function(e){return _(e).offsetX},e.wbg.__wbg_offsetY_488f80a0a9666028=function(e){return _(e).offsetY},e.wbg.__wbg_shiftKey_fdd99b6df96e25c5=function(e){return _(e).shiftKey},e.wbg.__wbg_button_a1c470d5e4c997f2=function(e){return _(e).button},e.wbg.__wbg_relatedTarget_66d2be52fe1361a2=function(e){let t=_(e).relatedTarget;return g(t)?0:V(t)},e.wbg.__wbg_clipboard_72ae7717d527a067=function(e){let t=_(e).clipboard;return g(t)?0:V(t)},e.wbg.__wbg_isConnected_93fb8849454bdb93=function(e){return _(e).isConnected},e.wbg.__wbg_parentNode_e81e6d5dc2fc35b0=function(e){let t=_(e).parentNode;return g(t)?0:V(t)},e.wbg.__wbg_parentElement_0e8c9afce5cb9d6e=function(e){let t=_(e).parentElement;return g(t)?0:V(t)},e.wbg.__wbg_lastChild_e0fcecf63df5f824=function(e){let t=_(e).lastChild;return g(t)?0:V(t)},e.wbg.__wbg_nextSibling_653f43ab9380175f=function(e){let t=_(e).nextSibling;return g(t)?0:V(t)},e.wbg.__wbg_setnodeValue_10d5890cd7e3f998=function(e,t,n){_(e).nodeValue=0===t?void 0:A(t,n)},e.wbg.__wbg_settextContent_19dc6a6146112f16=function(e,t,n){_(e).textContent=0===t?void 0:A(t,n)},e.wbg.__wbg_appendChild_b8199dc1655c852d=function(){return Y((function(e,t){return V(_(e).appendChild(_(t)))}),arguments)},e.wbg.__wbg_cloneNode_4c5e9ec3203eb137=function(){return Y((function(e,t){return V(_(e).cloneNode(0!==t))}),arguments)},e.wbg.__wbg_contains_d7dbb4dfe10d9428=function(e,t){return _(e).contains(_(t))},e.wbg.__wbg_getRootNode_d1b23203c654b1e5=function(e){return V(_(e).getRootNode())},e.wbg.__wbg_insertBefore_77a7d032a91abf86=function(){return Y((function(e,t,n){return V(_(e).insertBefore(_(t),_(n)))}),arguments)},e.wbg.__wbg_removeChild_794db72cbb6f21d3=function(){return Y((function(e,t){return V(_(e).removeChild(_(t)))}),arguments)},e.wbg.__wbg_getEntriesByName_bf69b2da670dc020=function(e,t,n,r,a){return V(_(e).getEntriesByName(A(t,n),A(r,a)))},e.wbg.__wbg_mark_88960258286b2684=function(){return Y((function(e,t,n){_(e).mark(A(t,n))}),arguments)},e.wbg.__wbg_measure_6cfb450367bf8564=function(){return Y((function(e,t,n,r,a){_(e).measure(A(t,n),A(r,a))}),arguments)},e.wbg.__wbg_now_c644db5194be8437=function(e){return _(e).now()},e.wbg.__wbg_startTime_0f0e575a7b97165d=function(e){return _(e).startTime},e.wbg.__wbg_pointerId_d2caae4465ba386f=function(e){return _(e).pointerId},e.wbg.__wbg_instanceof_ShadowRoot_7088dfa874f5499c=function(e){let t;try{t=_(e)instanceof ShadowRoot}catch{t=!1}return t},e.wbg.__wbg_host_33f0224f975dc46a=function(e){return V(_(e).host)},e.wbg.__wbg_length_551f829bae645f61=function(e){return _(e).length},e.wbg.__wbg_item_494a4f50d5ab293f=function(e,t){let n=_(e).item(t>>>0);return g(n)?0:V(n)},e.wbg.__wbg_which_0dd05aa408002d08=function(e){return _(e).which},e.wbg.__wbg_createObjectURL_adf40f2719ba3b9b=function(){return Y((function(e,t){let n=k(URL.createObjectURL(_(t)),u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n}),arguments)},e.wbg.__wbg_instanceof_Window_e266f02eee43b570=function(e){let t;try{t=_(e)instanceof Window}catch{t=!1}return t},e.wbg.__wbg_document_950215a728589a2d=function(e){let t=_(e).document;return g(t)?0:V(t)},e.wbg.__wbg_navigator_b18e629f7f0b75fa=function(e){return V(_(e).navigator)},e.wbg.__wbg_innerWidth_7e9d12e05bcb598e=function(){return Y((function(e){return V(_(e).innerWidth)}),arguments)},e.wbg.__wbg_innerHeight_3ef25a30618357e0=function(){return Y((function(e){return V(_(e).innerHeight)}),arguments)},e.wbg.__wbg_performance_8629f414811abc46=function(e){let t=_(e).performance;return g(t)?0:V(t)},e.wbg.__wbg_getComputedStyle_ae586cab8f5c81f8=function(){return Y((function(e,t){let n=_(e).getComputedStyle(_(t));return g(n)?0:V(n)}),arguments)},e.wbg.__wbg_requestAnimationFrame_afe426b568f84138=function(){return Y((function(e,t){return _(e).requestAnimationFrame(_(t))}),arguments)},e.wbg.__wbg_setTimeout_6609c9aa64f32bfc=function(){return Y((function(e,t,n){return _(e).setTimeout(_(t),n)}),arguments)},e.wbg.__wbg_debug_7960d327fd96f71a=function(e,t,n,r){console.debug(_(e),_(t),_(n),_(r))},e.wbg.__wbg_error_fe807da27c4a4ced=function(e){console.error(_(e))},e.wbg.__wbg_error_62b53e8733a5a02b=function(e,t,n){console.error(_(e),_(t),_(n))},e.wbg.__wbg_error_fd84ca2a8a977774=function(e,t,n,r){console.error(_(e),_(t),_(n),_(r))},e.wbg.__wbg_info_5566be377f5b52ae=function(e,t,n,r){console.info(_(e),_(t),_(n),_(r))},e.wbg.__wbg_trace_62f71326d384be35=function(e,t,n,r){console.trace(_(e),_(t),_(n),_(r))},e.wbg.__wbg_warn_e57696dbb3977030=function(e){console.warn(_(e))},e.wbg.__wbg_warn_48cbddced45e5414=function(e,t,n,r){console.warn(_(e),_(t),_(n),_(r))},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof _(e)},e.wbg.__wbg_self_e7c1f827057f6584=function(){return Y((function(){return V(self.self)}),arguments)},e.wbg.__wbg_window_a09ec664e14b1b81=function(){return Y((function(){return V(window.window)}),arguments)},e.wbg.__wbg_globalThis_87cbb8506fecf3a9=function(){return Y((function(){return V(globalThis.globalThis)}),arguments)},e.wbg.__wbg_global_c85a9259e621f3db=function(){return Y((function(){return V(n.g.global)}),arguments)},e.wbg.__wbg_newnoargs_2b8b6bd7753c76ba=function(e,t){return V(new Function(A(e,t)))},e.wbg.__wbg_new_b525de17f44a8943=function(){return V(new Array)},e.wbg.__wbg_new_f841cc6f2098f4b5=function(){return V(new Map)},e.wbg.__wbg_next_b7d530c04fd8b217=function(e){return V(_(e).next)},e.wbg.__wbg_value_6ac8da5cc5b3efda=function(e){return V(_(e).value)},e.wbg.__wbg_iterator_55f114446221aa5a=function(){return V(Symbol.iterator)},e.wbg.__wbg_new_f9876326328f45ed=function(){return V(new Object)},e.wbg.__wbg_new_1a153916efe94e88=function(e,t){return V(new Intl.DateTimeFormat(_(e),_(t)))},e.wbg.__wbg_at_155d8a5ce48004cd=function(e,t){return V(_(e).at(t))},e.wbg.__wbg_get_27fe3dac1c4d0224=function(e,t){return V(_(e)[t>>>0])},e.wbg.__wbg_set_17224bc548dd1d7b=function(e,t,n){_(e)[t>>>0]=L(n)},e.wbg.__wbg_from_67ca20fa722467e6=function(e){return V(Array.from(_(e)))},e.wbg.__wbg_isArray_39d28997bf6b96b4=function(e){return Array.isArray(_(e))},e.wbg.__wbg_length_e498fbc24f9c1d4f=function(e){return _(e).length},e.wbg.__wbg_push_49c286f04dd3bf59=function(e,t){return _(e).push(_(t))},e.wbg.__wbg_instanceof_ArrayBuffer_a69f02ee4c4f5065=function(e){let t;try{t=_(e)instanceof ArrayBuffer}catch{t=!1}return t},e.wbg.__wbg_slice_cd850bbc3b09b547=function(e,t,n){return V(_(e).slice(t>>>0,n>>>0))},e.wbg.__wbg_instanceof_Error_749a7378f4439ee0=function(e){let t;try{t=_(e)instanceof Error}catch{t=!1}return t},e.wbg.__wbg_message_a95c3ef248e4b57a=function(e){return V(_(e).message)},e.wbg.__wbg_call_95d1ea488d03e4e8=function(){return Y((function(e,t){return V(_(e).call(_(t)))}),arguments)},e.wbg.__wbg_call_9495de66fdbe016b=function(){return Y((function(e,t,n){return V(_(e).call(_(t),_(n)))}),arguments)},e.wbg.__wbg_set_388c4c6422704173=function(e,t,n){return V(_(e).set(_(t),_(n)))},e.wbg.__wbg_next_88560ec06a094dea=function(){return Y((function(e){return V(_(e).next())}),arguments)},e.wbg.__wbg_done_1ebec03bbd919843=function(e){return _(e).done},e.wbg.__wbg_isSafeInteger_8c4789029e885159=function(e){return Number.isSafeInteger(_(e))},e.wbg.__wbg_getTimezoneOffset_2a6b27fb18493a56=function(e){return _(e).getTimezoneOffset()},e.wbg.__wbg_new_f127e324c1313064=function(e){return V(new Date(_(e)))},e.wbg.__wbg_entries_4e1315b774245952=function(e){return V(Object.entries(_(e)))},e.wbg.__wbg_is_8f1618fe9a4fd388=function(e,t){return Object.is(_(e),_(t))},e.wbg.__wbg_keys_60443f4f867207f9=function(e){return V(Object.keys(_(e)))},e.wbg.__wbg_get_baf4855f9a986186=function(){return Y((function(e,t){return V(Reflect.get(_(e),_(t)))}),arguments)},e.wbg.__wbg_has_3feea89d34bd7ad5=function(){return Y((function(e,t){return Reflect.has(_(e),_(t))}),arguments)},e.wbg.__wbg_set_6aa458a4ebdb65cb=function(){return Y((function(e,t,n){return Reflect.set(_(e),_(t),_(n))}),arguments)},e.wbg.__wbg_buffer_cf65c07de34b9a08=function(e){return V(_(e).buffer)},e.wbg.__wbg_stringify_029a979dfb73aa17=function(){return Y((function(e){return V(JSON.stringify(_(e)))}),arguments)},e.wbg.__wbg_resolvedOptions_8d355f78be16b46d=function(e){return V(_(e).resolvedOptions())},e.wbg.__wbg_instanceof_Promise_4333c4e5587e8936=function(e){let t;try{t=_(e)instanceof Promise}catch{t=!1}return t},e.wbg.__wbg_new_9d3a9ce4282a18a8=function(e,t){try{var n={a:e,b:t};let r=new Promise(((e,t)=>{let r=n.a;n.a=0;try{return function(e,t,n,r){u.__wbindgen_export_12(e,t,V(n),V(r))}(r,n.b,e,t)}finally{n.a=r}}));return V(r)}finally{n.a=n.b=0}},e.wbg.__wbg_resolve_fd40f858d9db1a04=function(e){return V(Promise.resolve(_(e)))},e.wbg.__wbg_then_ec5db6d509eb475f=function(e,t){return V(_(e).then(_(t)))},e.wbg.__wbg_then_f753623316e2873a=function(e,t,n){return V(_(e).then(_(t),_(n)))},e.wbg.__wbg_newwithbyteoffsetandlength_9fb2f11355ecadf5=function(e,t,n){return V(new Uint8Array(_(e),t>>>0,n>>>0))},e.wbg.__wbg_new_537b7341ce90bb31=function(e){return V(new Uint8Array(_(e)))},e.wbg.__wbg_instanceof_Uint8Array_01cebe79ca606cca=function(e){let t;try{t=_(e)instanceof Uint8Array}catch{t=!1}return t},e.wbg.__wbg_buffer_5f1fc856188c4b44=function(e){return V(_(e).buffer)},e.wbg.__wbg_length_27a2afe8ab42b09f=function(e){return _(e).length},e.wbg.__wbg_byteLength_29d6f6f493852fd4=function(e){return _(e).byteLength},e.wbg.__wbg_byteOffset_85a4ff4bd899e78b=function(e){return _(e).byteOffset},e.wbg.__wbg_set_17499e8aa4003ebd=function(e,t,n){_(e).set(_(t),n>>>0)},e.wbg.__wbindgen_bigint_get_as_i64=function(e,t){let n=_(t),r="bigint"==typeof n?n:void 0;((null===T||0===T.byteLength)&&(T=new BigInt64Array(u.memory.buffer)),T)[e/8+1]=g(r)?BigInt(0):r,b()[e/4+0]=!g(r)},e.wbg.__wbindgen_debug_string=function(e,t){let n=k(C(_(t)),u.__wbindgen_export_0,u.__wbindgen_export_1),r=m;b()[e/4+1]=r,b()[e/4+0]=n},e.wbg.__wbindgen_throw=function(e,t){throw new Error(A(e,t))},e.wbg.__wbindgen_memory=function(){return V(u.memory)},e.wbg.__wbindgen_closure_wrapper3619=function(e,t,n){return V(M(e,t,40,N))},e.wbg.__wbindgen_closure_wrapper3621=function(e,t,n){return V(z(e,t,42,P))},e.wbg.__wbindgen_closure_wrapper3623=function(e,t,n){return V(M(e,t,42,O))},e.wbg.__wbindgen_closure_wrapper3625=function(e,t,n){return V(M(e,t,42,O))},e.wbg.__wbindgen_closure_wrapper3627=function(e,t,n){return V(z(e,t,42,R))},e.wbg.__wbindgen_closure_wrapper3629=function(e,t,n){return V(z(e,t,40,R))},e.wbg.__wbindgen_closure_wrapper9884=function(e,t,n){return V(M(e,t,2367,$))},e.wbg.__wbindgen_closure_wrapper9912=function(e,t,n){return V(M(e,t,2372,j))},e.wbg.__wbindgen_closure_wrapper9975=function(e,t,n){return V(M(e,t,2388,I))},e}function le(e,t){return u=e.exports,se.__wbindgen_wasm_module=t,T=null,h=null,f=null,F=null,w=null,u}function ie(e){let t=oe();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),le(new WebAssembly.Instance(e,t),e)}async function se(e){let t=oe();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if("application/wasm"==e.headers.get("Content-Type"))throw r;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r)}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return le(n,r)}var ce=se;function ue(e,t){return function(n,r){let a=0;for(let o of t)if(o in n){if(a++>0)throw new Error(`Duplicate "${e}" fields`);n[e]=n[o],o!==e&&(delete n[o],r.warn&&console.warn(`Deprecated perspective attribute "${o}" renamed "${e}"`))}return n}}ue("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),ue("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),ue("filter",["filter","filters"]);function de(e){return 559903==new Uint32Array(e.slice(0,4))[0]}window.addEventListener("unhandledrejection",(e=>{"View method cancelled"===e.reason?.message&&e.preventDefault()}));var _e=async function(){let e=await a,t=[],n=0,o=new r.Q1((e=>{e&&(n+=e.byteLength,t.push(e))}));if(e instanceof URL||"string"==typeof e){let r=(await fetch(e.toString())).body?.getReader(),a=0;if(void 0!==r)for(;;){let{value:e,done:l}=await r.read();if(l||void 0===e)break;0===a&&de(e?.buffer)||1===a?(a=1,o.push(e,l)):(a=2,n+=e.byteLength,t.push(e))}}else if(e instanceof Uint8Array)de(e.buffer)?o.push(e,!0):(n=e.byteLength,t=[e]);else{let r=new Uint8Array(e);de(e)?o.push(r,!0):(n=r.byteLength,t=[r])}let l=0,s=new Uint8Array(n);for(let r of t)s.set(r,l),l+=r.byteLength;return await ce(s),U(),i}(),ge=class extends HTMLElement{constructor(){super(),this.__load_wasm()}async __load_wasm(){await _e,void 0===this._instance&&(this._instance=new ae(this))}},he=ae.prototype,pe=Object.getOwnPropertyNames(he);for(let fe of pe)Object.defineProperty(ge.prototype,fe,{value:async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return await this.__load_wasm(),await this._instance[fe].call(this._instance,...t)}});for(let fe of["registerPlugin","getExprTKCommands"])Object.defineProperty(ge,fe,{value:async function(){let e=await _e;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[fe].call(e,...n)}});customElements.define("perspective-viewer",ge)}}]);